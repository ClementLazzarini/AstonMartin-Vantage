(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{103:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class s{static setVisibility(t,e){e&&""!==e?t.classList.remove("hidden"):t.classList.add("hidden")}static extend(t){return t.setVisibility=s.setVisibility,t}}var n=s.setVisibility},261:function(t,e,i){"use strict";i.r(e),i.d(e,"smallImageBlockController",(function(){return u}));var s=i(6),n=i.n(s),a=i(113),c=i.n(a),r=i(69),o=i(76),d=i(95),l=i(103);class h{constructor(t){this.el=t,this.config=Object(r.a)(this.el.getAttribute("data-config-id")),this.createInitialConfig=o.a.bind(this),this.config&&this.init()}init(){this.initDOM(),this.initMethods(),this.initBindings(),this.createInitialConfig(),this.generatePictures(this.picture),this.changeImages(this.initialConfig),this.changeContent(this.initialConfig)}initDOM(){this.picture=this.el.querySelector('[fid="picture"]'),this.heading=this.el.querySelector('[fid="heading"]'),this.paragraph=this.el.querySelector('[fid="paragraph"]'),this.cta=this.el.querySelector('[fid="cta"]')}initMethods(){this.generatePictures=t=>{var e=t.querySelector("picture"),i=document.createDocumentFragment();n()(this.config,t=>{var s=e.cloneNode(!0);s.setAttribute("btid",t.bodyType),i.appendChild(s)}),t.replaceChild(i,e)},this.changeImages=t=>{t.bodyType&&t.image&&Object(d.a)(this.picture,t.bodyType,t.image)},this.changeContent=t=>{var e=this.queue?this.queue:t;this.currentBodyType=e.bodyType,this.heading.textContent=e.contentTitle,this.paragraph.innerHTML=c.a.sanitize(e.content),this.cta.setAttribute("href",e.href),Object(l.a)(this.cta,e.href),this.toggleVisible(!1),this.busy=!1,this.queue=null},this.toggleVisible=t=>{t?this.el.classList.add("small-image-block--hidden"):this.el.classList.remove("small-image-block--hidden")},this.onBodyTypeChange=t=>{this.busy&&n()(this.config,e=>{e.bodyType===t.detail&&(this.queue=e)}),n()(this.config,e=>{e.bodyType===t.detail&&(this.changeImages(e),this.busy||t.detail===this.currentBodyType||(this.toggleVisible(!0),this.busy=!0,setTimeout(()=>this.changeContent(e),300)))})}}initBindings(){document.addEventListener("bodytype-switch",this.onBodyTypeChange)}}e.default=h;var u=new class{constructor(){this.blocks=[]}init(){n()(document.body.querySelectorAll("[data-small-image-block]"),t=>{this.blocks.push(new h(t))})}}},69:function(t,e,i){"use strict";e.a=t=>{var e=document.querySelector("script#".concat(t));return e&&e.textContent?JSON.parse(e.textContent):null}},76:function(t,e,i){"use strict";i(81);e.a=function(){var t,e;window.AMLConfig.modelBodyTypeId=window.AMLConfig.modelBodyTypeId||(e=new URL(document.location.href).searchParams.get("body")||null,null===(t=document.querySelector('.sticky-nav .body-type-switch [data-bodytype-name="'.concat(e,'"]')))||void 0===t?void 0:t.getAttribute("data-bodytype-id")),this.initialConfig=this.config.filter(t=>t.bodyType===window.AMLConfig.modelBodyTypeId)[0]||this.config&&this.config[0]}},79:function(t,e,i){"use strict";var s=i(6),n=i.n(s);e.a=new class{swapPicture(t,e){var i=t.querySelectorAll("source");i.length?n()(i,(t,i)=>{t.setAttribute("data-srcset",e.src[i].srcset)}):n()(e.src.reverse(),(i,s)=>{var n=document.createElement("source");n.setAttribute("media",e.src[s].media),n.setAttribute("data-srcset",e.src[s].srcset),document.documentElement.classList.contains("ie")?t.insertBefore(n,t.childNodes[0]):t.prepend(n)});var s=t.querySelector("img");s&&(s.setAttribute("alt",e.alt),s.classList.add("lazyload"),document.documentElement.classList.contains("ie")&&s.setAttribute("src",e.src[e.src.length-1].srcset))}swapImage(t,e){t&&(t.setAttribute("alt",e.alt),t.setAttribute("data-src",e.src),t.classList.add("lazyload"))}}},95:function(t,e,i){"use strict";var s=i(79);e.a=(t,e,i)=>{var n=t.querySelector('[btid="'.concat(e,'"]'));n.classList.contains("ready")||(s.a.swapPicture(n,i),n.classList.add("ready"));var a=t.querySelector(".active");a&&a.classList.remove("active"),n.classList.add("active")}}}]);
//# sourceMappingURL=small-image-block.bundle.js.map