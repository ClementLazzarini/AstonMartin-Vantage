(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{276:function(t,i,e){"use strict";e.r(i),e.d(i,"modelStickyNav",(function(){return S}));var s=e(6),o=e.n(s),c=e(49),n=e.n(c),r=e(96),h=e(83),a=e.n(h),d=e(58),l=e(67),u=e(59);var S=new class{constructor(){if(this.el=document.querySelector('[fid="sticky-nav"]'),"function"==typeof window.CustomEvent)return!1;function t(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),e}t.prototype=window.Event.prototype,window.CustomEvent=t}init(){this.el&&(this.initBodyTypeSwitch(),this.stickyNavSpacer=this.el.querySelector('[fid="sticky-nav-spacer"]'),this.sectionSwitch=this.el.querySelector('[fid="section-switch"]'),this.sectionSwitchCurrent=this.sectionSwitch.querySelector('[fid="section-switch-current"]'),this.sectionSwitchMenu=this.sectionSwitch.querySelector('[fid="section-switch-menu"]'),this.sectionSwitchArea=this.sectionSwitch.querySelector('[fid="section-switch-area"]'),this.sectionSwitchTriggers=this.sectionSwitchMenu.querySelectorAll('[fid="section-switch-trigger"]'),this.sectionSwitchIcon=this.sectionSwitch.querySelector('[fid="section-switch-icon"]'),this.activeSection=!1,this.activeSectionOffset=0,this.isIE=document.documentElement.classList.contains("ie"),this.pageSections=document.body.querySelectorAll("[data-section]"),this.isMobile=window.innerWidth<=1024,this.initBindings(),this.initScrollMagic(),this.sectionScrollListener(),this.initHashSection())}initBodyTypeSwitch(){this.bodyTypeSwitch=this.el.querySelector(".body-type-switch"),this.bodyTypeSwitch&&(this.bodyTypeSwitchButtons=this.bodyTypeSwitch.querySelectorAll("[data-bodytype-id]"),window.AMLConfig.modelBodyTypeId||(window.AMLConfig.modelBodyTypeId=this.bodyTypeSwitchButtons[0].getAttribute("data-bodytype-id")),this.bodyTypeSwitchActiveLine=this.bodyTypeSwitch.querySelector(".active-line"),this.bodyTypeSwitchMobile=this.el.querySelector('[fid="mobile-body-switch"]'),this.bodyTypeSwitchNameMobile=this.el.querySelector('[fid="mobile-body-switch-name"]'),this.bodyTypeSwitchClose=this.el.querySelector('[fid="body-switch-close"]'),this.onBodyTypeChange(window.AMLConfig.modelBodyTypeId),this.bodyTypeSwitchMobile.addEventListener("click",t=>{t.preventDefault(),this.bodyTypeSwitch.classList.add("mobile-active"),this.el.classList.add("mobile-active"),document.body.classList.add("body-type-switch-open")}),this.bodyTypeSwitchClose.addEventListener("click",t=>{t.preventDefault(),this.bodyTypeSwitch.classList.remove("mobile-active"),this.el.classList.remove("mobile-active"),document.body.classList.remove("body-type-switch-open")}))}initBindings(){window.addEventListener("resize",n()(()=>{this.mobileCheck()},100)),document.addEventListener("bodytype-switch",this.onBodyTypeChange.bind(this)),this.sectionSwitch.addEventListener("mouseenter",()=>{this.isMobile||this.showSectionMenu()}),this.sectionSwitch.addEventListener("click",()=>{this.isMobile||this.showSectionMenu()}),this.sectionSwitch.addEventListener("mouseleave",()=>{this.isMobile||this.hideSectionMenu()}),[...this.sectionSwitchTriggers].forEach(t=>{t.querySelector("a").addEventListener("click",()=>{this.toggleSection(t)})})}mobileCheck(){this.isMobile=window.innerWidth<=1024,this.isMobile&&(this.sectionSwitchMenu.style.top=0)}toggleSpacer(t){t?(this.isIE&&this.el.classList.add("active"),r.b.to([this.stickyNavSpacer,this.sectionSwitchArea],.4,{height:"".concat(this.sectionSwitchMenu.offsetHeight-60,"px")})):(this.isIE&&this.el.classList.remove("active"),r.b.to([this.stickyNavSpacer,this.sectionSwitchArea],.4,{height:"0px"}))}onBodyTypeChange(t){var i=t.detail||t;if(i!==this.currentBodyType){[...this.bodyTypeSwitchButtons].forEach(t=>t.classList.remove("active"));var e=[...this.bodyTypeSwitchButtons].filter(t=>t.getAttribute("data-bodytype-id")===i)[0]||this.bodyTypeSwitchButtons[0];e.classList.add("active"),this.currentBodyType=e.bodyType,this.setActiveLine(e),this.bodyTypeSwitchNameMobile.innerHTML=e.innerHTML,this.bodyTypeSwitch.classList.remove("mobile-active"),this.el.classList.remove("mobile-active"),document.body.classList.remove("body-type-switch-open")}}showSectionMenu(){this.hardClosing||(this.sectionSwitch.classList.add("active"),this.sectionSwitchMenu.classList.add("active"),this.orderSectionList(!0),this.toggleSpacer(!0))}hideSectionMenu(){this.sectionSwitch.classList.remove("active"),this.sectionSwitchMenu.classList.remove("active"),this.orderSectionList(!1),this.toggleSpacer(!1)}toggleSection(t,i){if(!this.scrollingToSection){this.activeSection&&this.activeSection.classList.remove("active"),this.activeSection=t,this.activeSection.classList.add("active");var e=this.activeSection.querySelector("a");this.sectionSwitchCurrent.innerHTML=e.innerHTML,this.activeSectionId=t.getAttribute("section-trigger"),i?this.orderSectionList(!1):(this.hardClosing=!0,this.scrollingToSection=!0,this.isMobile||this.hideSectionMenu(),this.activeSectionId&&setTimeout(()=>{this.hardClosing=!1,this.directScroll=!0,o()(this.pageSections,t=>{t.getAttribute("data-section")===this.activeSectionId&&this.goToSection(t)})},400))}}orderSectionList(t){if(this.isMobile)this.sectionSwitchMenu.style.top=0;else if(!t&&this.activeSection){var i=this.activeSection.offsetTop;r.b.to(this.sectionSwitchMenu,.3,{css:{top:"-".concat(i,"px")}})}else r.b.to(this.sectionSwitchMenu,.3,{css:{top:"0px"}})}setActiveLine(t){r.b.to(this.bodyTypeSwitchActiveLine,.3,{css:{width:t.offsetWidth,left:t.offsetLeft}})}goToSection(t){var i=this.el.offsetHeight,e=Math.abs(Object(d.a)(t)-window.pageYOffset),s=Math.min(e/4,3e3);null!==t&&Object(l.a)(t,{duration:s,offset:1-i,easing:u.h,callback:()=>{setTimeout(()=>{this.scrollingToSection=!1},100)}})}initScrollMagic(){var t=this.el,i=new CustomEvent("stickySetMargin");var e=document.querySelector("main");this.controller=new a.a.Controller,this.scrollMagicScene=new a.a.Scene({triggerElement:e}).setClassToggle(t,"sticky").addTo(this.controller).on("start",(function(){setTimeout(()=>{t.dispatchEvent(i)},700)}))}sectionScrollListener(){o()(this.pageSections,t=>{this.sectionTriggerScrollmagic(t)})}sectionTriggerScrollmagic(t){new a.a.Scene({triggerElement:t,triggerHook:.5,duration:500}).on("start",i=>{var e="REVERSE"===i.scrollDirection?"up":"down",s=t.getAttribute("data-section");[...this.sectionSwitchTriggers].forEach((t,i)=>{t.getAttribute("section-trigger")===s&&("down"===e?this.toggleSection(t,!0):"up"===e&&i>=1&&this.toggleSection(this.sectionSwitchTriggers[i-1],!0))})}).addTo(this.controller)}initHashSection(){window.location.hash?[...this.sectionSwitchTriggers].forEach(t=>{t.querySelector("a").getAttribute("href")===window.location.hash&&this.toggleSection(t)}):this.toggleSection(this.sectionSwitchTriggers[0],!0)}}},58:function(t,i,e){"use strict";i.a=t=>{for(var i=0,e=t;e;)i+=e.offsetTop,e=e.offsetParent;return i}},59:function(t,i,e){"use strict";function s(t,i,e,s){return e*Math.sin(t/s*(2*Math.PI)-Math.PI/2)+e+i}function o(t,i,e,s){return e*((t=t/s-1)*t*t+1)+i}function c(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i}function n(t,i,e,s){return-e*Math.cos(t/s*(Math.PI/2))+e+i}function r(t,i,e,s){return e*Math.sin(t/s*(Math.PI/2))+i}function h(t,i,e,s){return t==s?i+e:e*(1-Math.pow(2,-10*t/s))+i}function a(t,i,e,s){return 0==t?i:t==s?i+e:(t/=s/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(2-Math.pow(2,-10*--t))+i}e.d(i,"a",(function(){return s})),e.d(i,"f",(function(){return o})),e.d(i,"c",(function(){return c})),e.d(i,"e",(function(){return n})),e.d(i,"h",(function(){return r})),e.d(i,"g",(function(){return h})),e.d(i,"d",(function(){return a}))},67:function(t,i,e){"use strict";var s=e(59),o=(()=>{var t,i,e,o,c,n,r,h,a,d,l,u;function S(){return window.scrollY||window.pageYOffset}function w(t){return t.getBoundingClientRect().top+i}function y(e){a||(a=e),l=c(d=e-a,i,r,h),window.scrollTo(0,l),d<h?window.requestAnimationFrame(y):(window.scrollTo(0,i+r),t&&n&&(t.setAttribute("tabindex","-1"),t.focus()),"function"==typeof u&&u(),a=!1)}return function(a){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(h=d.duration||1e3,o=d.offset||0,u=d.callback,c=d.easing||s.default,n=d.a11y||!1,i=S(),typeof a){case"number":t=void 0,n=!1,e=i+a;break;case"object":e=w(t=a);break;case"string":t=document.querySelector(a),e=w(t)}switch(r=e-i+o,typeof d.duration){case"number":h=d.duration;break;case"function":h=d.duration(r)}window.requestAnimationFrame(y)}})();i.a=o}}]);
//# sourceMappingURL=model-sticky-nav.bundle.js.map