(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{103:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));class n{static setVisibility(t,e){e&&""!==e?t.classList.remove("hidden"):t.classList.add("hidden")}static extend(t){return t.setVisibility=n.setVisibility,t}}var s=n.setVisibility},262:function(t,e,i){"use strict";i.r(e),i.d(e,"largeImageBlockController",(function(){return p}));var n=i(49),s=i.n(n),r=i(6),o=i.n(r),a=i(113),c=i.n(a),h=i(83),u=i.n(h),l=i(69),d=i(76),g=i(95),f=i(103),y=window.matchMedia("(min-width: 1025px)");class m{constructor(t){this.el=t,this.config=Object(l.a)(this.el.getAttribute("data-config-id")),this.createInitialConfig=d.a.bind(this),this.config&&this.init()}init(){this.initDOM(),this.initMethods(),this.initBindings(),this.createInitialConfig(),this.generatePictures(this.authorImgContainer),this.generatePictures(this.quotePictureContainer),this.generatePictures(this.pictureContainer),this.changeImages(this.initialConfig),this.changeContent(this.initialConfig),this.initScrollMagic(),this.setPadding()}initDOM(){this.heading=this.el.querySelector('[fid="heading"]'),this.quote=this.el.querySelector('[fid="quote"]'),this.authorImgContainer=this.el.querySelector('[fid="authorImg"]'),this.authorName=this.el.querySelector('[fid="authorName"]'),this.authorTitle=this.el.querySelector('[fid="authorTitle"]'),this.contentTitle=this.el.querySelector('[fid="contentTitle"]'),this.content=this.el.querySelector('[fid="content"]'),this.cta=this.el.querySelector('[fid="cta"]'),this.button=this.el.querySelector('[fid="btn"]'),this.quoteContainer=this.el.querySelector('[fid="quoteContainer"]'),this.quotePictureContainer=this.el.querySelector('[fid="quotePictureContainer"]'),this.pictureContainer=this.el.querySelector('[fid="pictureContainer"]'),this.contentContainer=this.el.querySelector('[fid="contentContainer"]'),this.isIE=document.querySelector("html").classList.contains("ie")}initMethods(){var t=this;this.generatePictures=t=>{var e=t.querySelector("picture"),i=document.createDocumentFragment();o()(this.config,t=>{var n=e.cloneNode(!0);n.setAttribute("btid",t.bodyType),i.appendChild(n)}),t.replaceChild(i,e)},this.handleScrollMagic=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.scrollMagicScene&&(y.matches?e&&!t.pinned?(t.scrollMagicScene.setPin(t.quoteContainer),t.pinned=!0):!e&&t.pinned&&(t.scrollMagicScene.removePin(!0),t.pinned=!1):(t.scrollMagicScene.removePin(!0),t.pinned=!1))},this.checkHeight=()=>{var t=this.quotePictureContainer.offsetHeight+this.pictureContainer.offsetHeight-this.quoteContainer.offsetHeight-120;t>0?(this.calculated=t,this.handleScrollMagic()):(this.calculated=0,this.handleScrollMagic(!1))},this.checkStickyNavHeight=()=>{var t=document.querySelector('[fid="sticky-nav"]');this.stickyNavHeight=t?-1*t.offsetHeight:0},this.initScrollMagic=()=>{this.checkHeight(),this.checkStickyNavHeight();this.quoteContainer&&this.pictureContainer&&this.contentContainer&&(this.controller=new u.a.Controller,this.scrollMagicScene=new u.a.Scene({triggerElement:this.quoteContainer,triggerHook:"onLeave",duration:()=>this.calculated}).offset(this.stickyNavHeight).setClassToggle(this.quoteContainer,"sticky").addTo(this.controller),this.handleScrollMagic())},this.changeImages=t=>{t.image&&(this.isIE?(this.pictureContainer.classList.add("ie"),this.pictureContainer.style.backgroundImage="url(".concat(t.image.src[0].srcset,")")):Object(g.a)(this.pictureContainer,t.bodyType,t.image)),t.authorImg&&Object(g.a)(this.authorImgContainer,t.bodyType,t.authorImg),t.quoteHeroImage&&(this.isIE?(this.quotePictureContainer.classList.add("ie"),this.quotePictureContainer.style.backgroundImage="url(".concat(t.quoteHeroImage.src[0].srcset,")")):Object(g.a)(this.quotePictureContainer,t.bodyType,t.quoteHeroImage))},this.changeContent=t=>{var e=this.queue?this.queue:t;this.currentBodyType=e.bodyType,this.heading.textContent=e.heading,Object(f.a)(this.quoteContainer,e.quote),this.quote.innerHTML=c.a.sanitize(e.quote),this.authorName.textContent=e.authorName,this.authorTitle.textContent=e.authorTitle,this.contentTitle.textContent=e.contentTitle,this.content.innerHTML=c.a.sanitize(e.content),this.cta.setAttribute("href",e.href),Object(f.a)(this.cta,e.href),this.toggleVisible(!1),this.checkHeight(),this.busy=!1,this.queue=null,this.setPadding()},this.toggleVisible=t=>{t?this.el.classList.add("large-image-block--hidden"):this.el.classList.remove("large-image-block--hidden")},this.onBodyTypeChange=t=>{this.busy&&o()(this.config,e=>{e.bodyType===t.detail&&(this.queue=e)}),o()(this.config,e=>{e.bodyType===t.detail&&(this.changeImages(e),this.busy||t.detail===this.currentBodyType||(this.toggleVisible(!0),this.busy=!0,setTimeout(()=>this.changeContent(e),300)))})},this.setPadding=()=>{if(this.contentContainer){var t="0px";y.matches&&(t="".concat(this.contentContainer.offsetHeight,"px")),this.currentHeight&&this.currentHeight===t||(this.quoteContainer.style.paddingBottom=t,this.currentHeight=t)}}}initBindings(){document.addEventListener("bodytype-switch",this.onBodyTypeChange),y.addListener(this.handleScrollMagic),y.matches&&window.addEventListener("resize",this.checkHeight),y.addListener(()=>{y.matches?window.addEventListener("resize",this.checkHeight):window.removeEventListener("resize",this.checkHeight)}),window.addEventListener("resize",s()(()=>{this.setPadding()},100))}}e.default=m;var p=new class{constructor(){this.blocks=[]}init(){o()(document.body.querySelectorAll("[data-large-image-block]"),t=>{this.blocks.push(new m(t))})}}},49:function(t,e,i){var n=i(18),s=i(73),r=i(68),o=Math.max,a=Math.min;t.exports=function(t,e,i){var c,h,u,l,d,g,f=0,y=!1,m=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var i=c,n=h;return c=h=void 0,f=e,l=t.apply(n,i)}function b(t){return f=t,d=setTimeout(q,e),y?v(t):l}function C(t){var i=t-g;return void 0===g||i>=e||i<0||m&&t-f>=u}function q(){var t=s();if(C(t))return S(t);d=setTimeout(q,function(t){var i=e-(t-g);return m?a(i,u-(t-f)):i}(t))}function S(t){return d=void 0,p&&c?v(t):(c=h=void 0,l)}function w(){var t=s(),i=C(t);if(c=arguments,h=this,g=t,i){if(void 0===d)return b(g);if(m)return clearTimeout(d),d=setTimeout(q,e),v(g)}return void 0===d&&(d=setTimeout(q,e)),l}return e=r(e)||0,n(i)&&(y=!!i.leading,u=(m="maxWait"in i)?o(r(i.maxWait)||0,e):u,p="trailing"in i?!!i.trailing:p),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=g=h=d=void 0},w.flush=function(){return void 0===d?l:S(s())},w}},68:function(t,e,i){var n=i(18),s=i(74),r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=a.test(t);return i||c.test(t)?h(t.slice(2),i?2:8):o.test(t)?NaN:+t}},69:function(t,e,i){"use strict";e.a=t=>{var e=document.querySelector("script#".concat(t));return e&&e.textContent?JSON.parse(e.textContent):null}},73:function(t,e,i){var n=i(10);t.exports=function(){return n.Date.now()}},74:function(t,e,i){var n=i(7),s=i(8);t.exports=function(t){return"symbol"==typeof t||s(t)&&"[object Symbol]"==n(t)}},76:function(t,e,i){"use strict";i(81);e.a=function(){var t,e;window.AMLConfig.modelBodyTypeId=window.AMLConfig.modelBodyTypeId||(e=new URL(document.location.href).searchParams.get("body")||null,null===(t=document.querySelector('.sticky-nav .body-type-switch [data-bodytype-name="'.concat(e,'"]')))||void 0===t?void 0:t.getAttribute("data-bodytype-id")),this.initialConfig=this.config.filter(t=>t.bodyType===window.AMLConfig.modelBodyTypeId)[0]||this.config&&this.config[0]}},79:function(t,e,i){"use strict";var n=i(6),s=i.n(n);e.a=new class{swapPicture(t,e){var i=t.querySelectorAll("source");i.length?s()(i,(t,i)=>{t.setAttribute("data-srcset",e.src[i].srcset)}):s()(e.src.reverse(),(i,n)=>{var s=document.createElement("source");s.setAttribute("media",e.src[n].media),s.setAttribute("data-srcset",e.src[n].srcset),document.documentElement.classList.contains("ie")?t.insertBefore(s,t.childNodes[0]):t.prepend(s)});var n=t.querySelector("img");n&&(n.setAttribute("alt",e.alt),n.classList.add("lazyload"),document.documentElement.classList.contains("ie")&&n.setAttribute("src",e.src[e.src.length-1].srcset))}swapImage(t,e){t&&(t.setAttribute("alt",e.alt),t.setAttribute("data-src",e.src),t.classList.add("lazyload"))}}},95:function(t,e,i){"use strict";var n=i(79);e.a=(t,e,i)=>{var s=t.querySelector('[btid="'.concat(e,'"]'));s.classList.contains("ready")||(n.a.swapPicture(s,i),s.classList.add("ready"));var r=t.querySelector(".active");r&&r.classList.remove("active"),s.classList.add("active")}}}]);
//# sourceMappingURL=large-image-block.bundle.js.map