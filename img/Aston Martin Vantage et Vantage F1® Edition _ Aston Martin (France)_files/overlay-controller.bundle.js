(window.webpackJsonp=window.webpackJsonp||[]).push([[64,7,11,12,33,34,37,40,42,43,66,83,98],{104:function(e,t,i){"use strict";i.r(t),i.d(t,"subNavigation",(function(){return u}));var s=i(6),a=i.n(s),r=i(17),n=i.n(r),o=i(58),l=i(67),c=i(59),d=i(56),h=i(86);var u=new class{init(){this.isInited||(this.isInited=!0,this.subNav=null,this.activeMenu=0,this.prevScrollPosition=0,this.subnavHeight=0,this.currentSubnavItem=null,this.directScroll=!1,this.screenWidth=window.innerWidth,this.subNavInView=!0,this.initDOMElements(),null!==this.subNav&&(this.highlightSection(),this.initBindings(),window.location.hash.length>0&&(this.scrollToHash(),this.setActiveItems(this.subNavItems),this.setActiveItems(this.subnavOverlayItems)),window.pageYOffset<65?this.subNav.classList.add("subnavigation--inited"):this.subNav.classList.add("subnavigation--inited-instant")))}initDOMElements(){this.header=document.body.querySelector("header"),this.subNav=document.body.querySelector("[data-subnavigation]"),this.subnavHeight=this.subNav?this.subNav.clientHeight:0,this.header=document.body.querySelector("header"),this.pageSections=document.body.querySelectorAll("[data-section]"),this.subnavOverlay=document.body.querySelector('[data-overlay="subnavigation-menu"]'),this.headerParallaxItem=h.parallaxController.getParallaxItemByName("header"),this.primaryNavParallaxItem=h.parallaxController.getParallaxItemByName("primaryNav");var e=d.helper.getPageColor(),t=d.helper.colorToHex(e),i=d.helper.lightenDarkenColor(t,10);null!==this.subNav&&(this.subNav.style.backgroundColor="".concat(i),this.subNavWrapper=this.subNav.querySelector("[data-subnavigation-wrapper]"),this.subNavItems=this.subNav.querySelectorAll("[data-subnavigation-wrapper] li a")),null!==this.subnavOverlay&&(this.subnavOverlay.style.backgroundColor="".concat(i),this.subnavOverlayItems=this.subnavOverlay.querySelectorAll("li a")),null!==this.header&&(this.headerMenus=this.header.querySelectorAll("nav > div"))}initBindings(){window.addEventListener("scroll",n()(()=>{this.setMenuPositions()},50)),window.addEventListener("resize",n()(()=>{this.onResize()},50)),window.addEventListener("hashchange",this.onHashChange.bind(this)),this.subNav&&this.subNav.addEventListener("click",this.onSubnavElementClick.bind(this)),this.subnavOverlay&&this.subnavOverlay.addEventListener("click",this.onSubnavOverlayElementClick.bind(this))}setMenuPositions(){0===[].length&&(this.controlSubNav(),this.highlightSection())}controlSubNav(){var e=this.prevScrollPosition<window.pageYOffset?-1:1;null!==this.subNav&&(this.subNavInView=this.subNav.offsetTop>window.pageYOffset-this.subNav.offsetHeight,this.subNavHeadInView=this.subNav.offsetTop>window.pageYOffset+this.subNav.offsetHeight,this.subNavInView&&(this.header.classList.remove("header--subnavigation-active"),this.headerParallaxItem&&this.headerParallaxItem.enableParallax(),this.primaryNavParallaxItem&&this.primaryNavParallaxItem.enableParallax(),this.showHeaderItems()),!this.subNavHeadInView&&this.screenWidth>768&&this.hideHeaderItems(!0),window.pageYOffset>this.header.clientHeight&&this.screenWidth<769&&this.hideHeaderItems(),this.subNavInView||(this.header.classList.add("header--subnavigation-active"),this.headerParallaxItem&&this.headerParallaxItem.disableParallax(),this.primaryNavParallaxItem&&this.primaryNavParallaxItem.disableParallax()),!this.subNavInView&&this.screenWidth<769&&this.showHeaderItems(!0),this.subNavHeadInView&&this.screenWidth>768&&this.showHeaderItems(),e>0&&this.subNavInView?(this.subNavWrapper.classList.remove("hidden"),this.subNavWrapper.classList.remove("subnavigation__wrapper--fixed")):e<0&&!this.subNavInView&&this.subNavWrapper.classList.add("subnavigation__wrapper--fixed"),this.prevScrollPosition=window.pageYOffset)}onResize(){this.screenWidth=window.innerWidth,this.highlightSection()}onMenuTransition(e){window.innerWidth<769&&"opacity"===e.propertyName&&(e.target.classList.contains("visible")||e.target.classList.remove("active"))}onSubnavElementClick(e){this.onElemClick(e,0)}onSubnavOverlayElementClick(e){this.onElemClick(e,1e3*this.subnavOverlay.style.transitionDelay.replace("s",""))}onElemClick(e,t){var i=this,s=e.target.getAttribute("href");if(s&&s.length){var a=s.slice(1);window.location.hash.slice(1)===a&&setTimeout(()=>{i.directScroll=!0,i.scrollTo(a),this.setActiveItems(this.subNavItems),this.setActiveItems(this.subnavOverlayItems)},t)}}onHashChange(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.scrollToHash(),this.setActiveItems(this.subNavItems),this.setActiveItems(this.subnavOverlayItems)}scrollToHash(){this.directScroll=!0,this.scrollTo(window.location.hash.slice(1))}scrollTo(e){a()(this.pageSections,(t,i)=>{var s=t.getAttribute("data-section");s===e&&(this.currentSubnavItem=this.subNav.querySelector("[href='#".concat(s,"']")),this.activeMenu=i,this.goToSection(t))})}goToSection(e){var t=Math.abs(Object(o.a)(e)-window.pageYOffset),i=Math.min(t/4,3e3);null!==e&&Object(l.a)(e,{duration:i,offset:1-this.subnavHeight,easing:c.h,callback:()=>{this.highlightClickedSection(),setTimeout(()=>{this.directScroll=!1},100)}})}highlightClickedSection(){this.subNavItems&&this.currentSubnavItem&&(a()(this.subNavItems,e=>{e.classList.remove("active")}),this.currentSubnavItem.classList.add("active"))}highlightSection(){this.directScroll||(a()(this.pageSections,(e,t)=>{window.pageYOffset+this.subnavHeight>=e.offsetTop&&(this.activeMenu=t)}),this.setActiveItems(this.subNavItems),this.setActiveItems(this.subnavOverlayItems))}setActiveItems(e){a()(e,(e,t)=>{t===this.activeMenu?e.classList.add("active"):e.classList.remove("active"),window.innerWidth<769&&(t===this.activeMenu?(e.classList.add("active"),setTimeout(()=>{e.classList.add("visible")},50)):e.classList.remove("visible"))})}hideHeaderItems(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.disableLogo(),!1===e&&a()(this.headerMenus,e=>{e.classList.add("hidden")})}showHeaderItems(){!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.enableLogo(),a()(this.headerMenus,e=>{e.classList.remove("hidden")})}disableLogo(){this.header.classList.add("disable")}enableLogo(){this.header.classList.remove("disable")}destroy(){window.removeEventListener("hashchange",this.onHashChange),this.subNav&&this.subNav.removeEventListener("click",this.onSubnavElementClick),this.subnavOverlay&&this.subnavOverlay.removeEventListener("click",this.onSubnavOverlayElementClick)}getDirectScroll(){return this.directScroll}}},106:function(e,t,i){"use strict";i.r(t),i.d(t,"enquireController",(function(){return j}));var s=i(6),a=i.n(s),r=i(57),n=i(66),o=i(56),l=i(65),c=i(72),d=i(22),h="",u=0;var m=class{constructor(e){this.enquire=e,this.id=e.getAttribute("data-enquire"),this.targetIndex=1,this.currentIndex=1,this.locationInputInited=!1,this.lat=null,this.lng=null,this.store={},this.dealers=[],this.skipDealers=0,this.isEnquire="enquire"===this.id,this.maxInitCount=60,this.init()}init(){0===(u=1)&&window.google||1===u&&window.Microsoft?(this.initDOMElements(),this.initBindings(),this.getKeyFromApiScript()):--this.maxInitCount>0&&setTimeout(()=>{this.init()},100)}getKeyFromApiScript(){var e=0===u?"https://maps.googleapis.com/maps/api/":"https://www.bing.com/api/",t=Array.from(document.scripts).filter(t=>t.src.indexOf(e)>=0&&t);t.length&&(h=t[0].src.split("key=")[1])}initDOMElements(){this.enquireLocation=this.enquire.querySelector("[data-enquire-location]"),this.enquireContents=this.enquire.querySelectorAll("[data-enquire-content]"),this.enquireDealerContent=this.enquire.querySelector("[data-enquire-dealer-list]"),this.enquireBackButton=this.enquire.querySelector("[data-enquire-back]"),this.enquireButtons=this.enquire.querySelectorAll("[data-enquire-target]"),this.loadMoreButton=this.enquire.querySelectorAll("[data-load-more]"),this.enquireButtons&&(this.firstEnquireButton=this.enquireButtons[0]),this.enquirePager=this.enquire.querySelector("[data-pager]"),this.enquireSearch=this.enquire.querySelector("[data-enquire-search]"),navigator.geolocation&&window.Microsoft&&this.enquireSearch.classList.add("show"),this.dealerSlider=c.sliderController.getSliderById(this.id)}googleMapsAutosuggestions(){if(!this.locationInputInited&&google){var e=new google.maps.places.Autocomplete(this.enquireLocation,{types:["(regions)"]});e.addListener("place_changed",()=>{var t=e.getPlace();((t||{}).geometry||{}).location?(this.lat=t.geometry.location.lat(),this.lng=t.geometry.location.lng(),this.updateDealers()):Object(l.b)(this.firstEnquireButton)}),this.locationInputInited=!0}}bingMapsAutosuggestion(){!this.locationInputInited&&Microsoft&&(Microsoft.Maps.loadModule("Microsoft.Maps.AutoSuggest",{callback:()=>{new Microsoft.Maps.AutosuggestManager({maxResults:4}).attachAutosuggest("#enquire-location-input",".form.enquire__location.block--full-width",e=>{(e||{}).location?(this.lat=e.location.latitude,this.lng=e.location.longitude,this.updateDealers()):Object(l.b)(this.firstEnquireButton)})}}),this.locationInputInited=!0)}initBindings(){if(a()(this.enquireButtons,e=>{e.addEventListener("click",e=>{this.onEnquireButton(e)}),d.accessibilityHelper.subscribe(e,"open",e=>{this.onEnquireButton(e)})}),this.enquireSearch.addEventListener("click",()=>{this.getLocation()}),d.accessibilityHelper.subscribe(this.enquireSearch,"open",this.getLocation.bind(this)),this.enquireLocation){var e=0===u?this.googleMapsAutosuggestions:this.bingMapsAutosuggestion;this.enquireLocation.addEventListener("input",()=>{e.apply(this)}),this.enquireLocation.addEventListener("keypress",e=>{13===e.keyCode&&e.preventDefault()})}a()(this.loadMoreButton,e=>{e.addEventListener("click",()=>{this.loadMoreDealers()}),d.accessibilityHelper.subscribe(e,"open",this.loadMoreDealers.bind(this))}),this.enquireBackButton.addEventListener("click",e=>{this.targetIndex-=1,this.navigateToPageIndex(e)}),d.accessibilityHelper.subscribe(this.enquireBackButton,"open",e=>{this.targetIndex-=1,this.navigateToPageIndex(e)}),a()(this.enquireContents,e=>{e.addEventListener("transitionend",e=>{this.onCardTransition(e)})}),window.addEventListener("resize",()=>{var e=this.enquire.querySelector('[data-enquire-content="'.concat(this.currentIndex,'"]'));this.setSectionHeight(e)})}navigateToPageIndex(e){e.preventDefault(),this.hidePages(),this.enquirePager&&o.helper.setActualPagerButton(this.enquirePager,this.targetIndex-1)}saveValues(e){2===this.currentIndex&&(this.store.EnquireType=e.currentTarget.getAttribute("data-enquire-type")),3===this.currentIndex&&(this.store.DealerCode=e.currentTarget.getAttribute("data-enquire-dealer"))}getStore(){return this.store}onCardTransition(e){if("opacity"===e.propertyName&&(e.target.classList.contains("visible")||e.target.classList.remove("show"),parseInt(e.target.getAttribute("data-enquire-content"),10)===this.currentIndex&&!e.target.classList.contains("visible"))){var t=this.enquire.querySelector('[data-enquire-content="'.concat(this.targetIndex,'"]'));this.enquire.setAttribute("data-enquire-page",this.targetIndex),this.showPage(t),this.currentIndex=this.targetIndex}}onEnquireButton(e){e.currentTarget.classList.contains("button--disabled")||(this.targetIndex=parseInt(e.currentTarget.getAttribute("data-enquire-target"),10),e.currentTarget.hasAttribute("data-submit-form")||this.navigateToPageIndex(e)),this.saveValues(e)}showPage(e){e.classList.add("show"),setTimeout(()=>{this.setSectionHeight(e),e.style.transform="translateY(0)",e.classList.add("visible"),e.setAttribute("aria-hidden","false")},100)}updateDealers(){Object(l.a)(this.firstEnquireButton),r.a.findDealers(this.lat,this.lng).then(e=>{this.dealers=e,a()(this.dealers,e=>{e.isEnquire=this.isEnquire}),this.skipDealers=0,this.enquireDealerContent.innerHTML="",window.innerWidth>768?this.getDealers(6):this.getDealers(2),this.dealerSlider.init(),this.dealerSlider.handleFocus(),Object(l.d)(this.firstEnquireButton)}).catch(()=>{Object(l.d)(this.firstEnquireButton),Object(l.b)(this.firstEnquireButton)})}getDealers(e){this.showItems=this.skipDealers+e;var t=this.skipDealers;if(null!==this.enquireDealerContent){for(var i=this.dealers.map(e=>({lat:e.lat,lon:e.lon}));t<this.showItems;t++)if(this.dealers[t]){var s=document.createElement("div");s.className="enquire__card block--bg-white col col--3",s.setAttribute("data-slider-item",""),s.innerHTML=n.a.render("enquireDealerInfo",this.dealers[t]),this.enquireDealerContent.appendChild(s),d.accessibilityHelper.removeClickFocus(this.enquireDealerContent),this.showMap(i,t)}this.updateDealerTargetButtons(),Object(l.c)(this.firstEnquireButton)}this.skipDealers+=e}loadMoreDealers(){window.innerWidth>768?this.getDealers(3):this.getDealers(1),this.dealerSlider.initDOMElements()}updateDealerTargetButtons(){var e=document.querySelectorAll('[data-enquire-target="4"]');e&&a()(e,e=>{e.hasAttribute("data-inited")||(e.setAttribute("data-inited","true"),e.addEventListener("click",e=>{e.currentTarget.classList.contains("button--disabled")||(this.targetIndex=parseInt(e.currentTarget.getAttribute("data-enquire-target"),10),this.navigateToPageIndex(e),this.saveValues(e))}))})}hidePages(){var e=this.currentIndex>this.targetIndex?1:-1;a()(this.enquireContents,t=>{var i=parseInt(t.getAttribute("data-enquire-content"),10);i===this.currentIndex?(t.classList.remove("visible"),t.style.transform="translateY(".concat(100*e,"%)"),t.setAttribute("aria-hidden","true")):i!==this.currentIndex&&i!==this.targetIndex&&(t.classList.remove("visible"),t.style.transform="translateY(100%)",t.setAttribute("aria-hidden","true"))})}getLocation(){var e=new google.maps.Geocoder,t={};navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,t.lat=this.lat,t.lng=this.lng,e.geocode({location:t},e=>{this.enquireLocation.value=e[3].formatted_address,this.enquireLocation.focus()}),this.updateDealers()})}showMap(e,t){var i=this.enquire.querySelectorAll("[data-enquire-map]");0===u?a()(i,(i,s)=>{if(t===s){var a=e[s].lat,r=e[s].lon,n="".concat("https://maps.googleapis.com/maps/api/staticmap","?key=").concat(h,"&center=").concat(a,",").concat(r,"&").concat("zoom=14&format=png&maptype=roadmap&style=element:geometry%7Ccolor:0xf5f5f5&style=element:labels.icon%7Cvisibility:off&style=element:labels.text.fill%7Ccolor:0x616161&style=element:labels.text.stroke%7Ccolor:0xf5f5f5&style=feature:administrative.land_parcel%7Celement:labels.text.fill%7Ccolor:0xbdbdbd&style=feature:poi%7Celement:geometry%7Ccolor:0xeeeeee&style=feature:poi%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:poi.park%7Celement:geometry%7Ccolor:0xe5e5e5&style=feature:poi.park%7Celement:geometry.fill%7Ccolor:0xc4c4c4&style=feature:poi.park%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:road%7Celement:geometry%7Ccolor:0xffffff&style=feature:road.arterial%7Celement:labels.text.fill%7Ccolor:0x757575&style=feature:road.highway%7Celement:geometry%7Ccolor:0xdadada&style=feature:road.highway%7Celement:labels.text.fill%7Ccolor:0x616161&style=feature:road.local%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&style=feature:transit.line%7Celement:geometry%7Ccolor:0xe5e5e5&style=feature:transit.station%7Celement:geometry%7Ccolor:0xeeeeee&style=feature:water%7Celement:geometry%7Ccolor:0xc9c9c9&style=feature:water%7Celement:labels.text.fill%7Ccolor:0x9e9e9e&size=600x400&markers=color:blue%7Clabel:A%7Cicon:").concat("https://goo.gl/duWZL3","%7C").concat(a,",").concat(r);i.querySelector("img").src=n}}):1===u&&a()(i,(i,s)=>{if(t===s){var a=e[s].lat,r=e[s].lon,n="".concat("https://dev.virtualearth.net/REST/V1/Imagery/Map/Road/").concat(a,"%2C").concat(r,"/15?mapSize=600,400&format=png&pushpin=").concat(a,",").concat(r,";").concat("37","&key=").concat(h,"&st=").concat("water|fc:c9c9c9;lbc:9e9e9e_transportation|fc:ffffff;sc:ffffff;lbc:9e9e9e;loc:60ffffff_railway|fc:e5e5e5;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_trail|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_road|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_building|fc:d5d5d5_point|v:false_political|bv:false_area|fc:e5e5e5;lbc:616161;loc:e5e5e5_park|fc:c4c4c4_g|landColor:e5e5e5");i.querySelector("img").src=n}})}setSectionHeight(e){var t=parseInt(window.getComputedStyle(this.enquire).paddingTop,10)+parseInt(window.getComputedStyle(this.enquire).paddingBottom,10);this.enquire.style.height="".concat(t+e.clientHeight,"px")}},p=i(90),g=i.n(p),v=i(49),y=i.n(v),f=i(17),b=i.n(f),w=i(82);var S=class{constructor(e){this.enquireCtrl=e,this.enquire=e.enquire,this.myScope=this.enquire.querySelector('[data-enquire-step="2"]'),this.formData={},this.modelData=[],this.currentModel={},this.currentBodyStyle={},this.currentCountry="",this.init()}init(){this.isInited||(this.initDOMElements(),this.initBindings(),this.isInited=!0),this.clearForm(),this.loadData(),this.getformData()}initDOMElements(){this.form=this.myScope.querySelector(".form"),this.formElements=this.form.querySelectorAll("[data-form-element]"),this.inputs=this.form.querySelectorAll("[data-form-input]"),this.submitButton=this.form.querySelector("[data-submit-form]"),this.modelSelect=this.form.querySelector('select[name="Model"]'),this.bodyStyleSelect=this.form.querySelector('[name="BodyStyle"]'),this.vehicleEngineSelect=this.form.querySelector('[name="VehicleEngine"]'),this.modelSelect&&(this.customModel=new w.a(this.modelSelect)),this.bodyStyleSelect&&(this.customBodyStyle=new w.a(this.bodyStyleSelect),this.customBodyStyle.disableSelect(),this.setDropdownVisibility(this.customBodyStyle,!1)),this.vehicleEngineSelect&&(this.customVehicleEngine=new w.a(this.vehicleEngineSelect),this.customVehicleEngine.disableSelect(),this.setDropdownVisibility(this.customVehicleEngine,!1)),this.elPreferredDatetime=this.myScope.querySelectorAll(".section-preferred-datetime")}initBindings(){this.submitButton.addEventListener("click",e=>{e.preventDefault(),Object(l.a)(this.submitButton),this.validateForm(e)}),a()(this.inputs,e=>{"SELECT"===e.tagName||"checkbox"===e.getAttribute("type")?e.addEventListener("change",()=>{this.onInputChange(e)}):e.addEventListener("keydown",()=>{this.onInputChange(e)})}),null!==this.modelSelect&&this.customVehicleEngine&&this.modelSelect.addEventListener("change",e=>{this.customVehicleEngine.resetOptions(),this.updateModelBodyStyles(e),this.updateModelEngines()}),null!==this.bodyStyleSelect&&this.bodyStyleSelect.addEventListener("change",e=>{this.updateModelEngines(e)})}loadData(){this.modelSelect&&(this.enquireCtrl.modelData?(this.modelData=this.enquireCtrl.modelData,this.customModel.resetOptions(),this.customModel.loadSelectOptions(this.sortArrByName(this.modelData.Models),"SalesforceValue"),this.clearForm(),this.getformData()):r.a.getModels().then(e=>{this.modelData=e,this.customModel.resetOptions(),this.customModel.loadSelectOptions(this.sortArrByName(this.modelData.Models),"SalesforceValue"),this.clearForm(),this.getformData()},e=>{throw e}))}sortArrByName(e){return e.sort((e,t)=>e.Name.localeCompare(t.Name))}populateModelSelect(){var e=document.querySelector("main").getAttribute("data-model-name");document.querySelector("main").hasAttribute("data-model-name")&&""!==document.querySelector("main").getAttribute("data-model-name")&&this.customModel.showSelected(e),this.updateModelBodyStyles(e),this.customBodyStyle.mimic.classList.remove("select__mimic--inactive")}clearForm(){this.customModel.resetDefault(),this.customModel.resetSelected(),this.customBodyStyle.resetDefault(),this.customBodyStyle.resetSelected(),this.setDropdownVisibility(this.customBodyStyle,!1),this.customVehicleEngine.resetDefault(),this.customVehicleEngine.resetSelected(),this.setDropdownVisibility(this.customVehicleEngine,!1),this.formData={},this.form.reset(),a()(this.inputs,e=>{this.onInputChange(e)}),"model-page"===document.body.getAttribute("data-page").toLowerCase()&&this.populateModelSelect()}getformData(){var e=document.querySelector("main"),t=e.getAttribute("data-model-name");this.enquireCtrl.enquireCampaignId?this.formData.Campaign=this.enquireCtrl.enquireCampaignId:this.enquireCtrl.selectedDealer.campaignId?this.formData.Campaign=this.enquireCtrl.selectedDealer.campaignId:this.formData.Campaign=e.hasAttribute("data-enquire-campaign")?e.getAttribute("data-enquire-campaign"):"",a()(this.inputs,e=>{"checkbox"===e.type?this.formData[e.name]=e.checked:this.formData[e.name]=e.value}),this.customModel&&(this.formData.ModelLabel=this.customModel.getSelectedText()),this.customBodyStyle&&(this.formData.BodyStyleLabel=this.customBodyStyle.getSelectedText()),t&&!this.formData.Model&&(this.formData.Model=t),this.formData.EnquireType=this.enquireCtrl.enquireType,this.formData.DealerCode=this.enquireCtrl.selectedDealer.name,this.formData.ReferralUrl=document.URL,this.formData.CountryCode=this.enquireCtrl.selectedDealer.countryCode,this.formData.Culture=document.documentElement.lang}validateForm(){this.getformData(),r.a.enquireFormV2(JSON.stringify(this.formData),this.api).then(e=>{Object(l.d)(this.submitButton),this.handleErrors(e)})}getUrlDataAfterHash(){var e=window.location.hash.substr(1,100);this.additionalInfo&&(this.additionalInfo.value=e)}handleErrors(e){var t=!1,i=Object.keys(e);a()(this.formElements,s=>{var a=i.indexOf(s.getAttribute("data-form-element")),r=o.helper.getParentNode(s,".form__element-group").length>0&&window.innerWidth>768,n=o.helper.getParentNode(s,".form__element-group")[0];a>=0?(t=!0,s.querySelector("[data-form-error-message]").innerHTML=e[i[a]][0],r&&n.classList.add("error"),s.classList.add("error")):s.classList.remove("error")}),this.scrollToFirstError(),i.includes("DealerCode")?this.enquireCtrl.showStep("1"):t||(this.stepValid=!0,this.enquireCtrl.showStep("3"))}updateModelBodyStyles(e){var t=null;"object"==typeof e?t=e&&e.target&&e.target.value:"string"==typeof e&&(t=e),this.setDropdownVisibility(this.customBodyStyle,!1),this.customBodyStyle.toggleDisabled(t),this.customBodyStyle.resetDefault(),this.customBodyStyle.resetOptions(),e&&(a()(this.modelData.Models,e=>{e.SalesforceValue===t&&(this.currentModel=e,this.checkBodyAndEngine(e))}),this.customBodyStyle.loadSelectOptions(this.currentModel.BodyStyles,"SalesforceValue"),this.customBodyStyle.setFirstOption(t,this.currentModel.BodyStyles),this.currentModel.BodyStyles&&1===this.currentModel.BodyStyles.length&&this.updateModelEngines(this.currentModel.BodyStyles[0].Name,!0))}checkBodyAndEngine(e,t){var i=!0,s=!0;e.BodyStyles.length>1&&(s=!1),t&&t.VehicleEngines.length>1&&(i=!1),this.setDropdownVisibility(this.customBodyStyle,!s),this.setDropdownVisibility(this.customVehicleEngine,!i)}updateModelEngines(e,t){var i=e&&!t?e.target.value:null;t&&(i=e),e&&(i&&this.customVehicleEngine.toggleDisabled(i),this.customVehicleEngine.resetDefault(),this.customVehicleEngine.resetOptions(),a()(this.currentModel.BodyStyles,e=>{e.SalesforceValue===i&&(this.currentBodyStyle=e,this.checkBodyAndEngine(this.currentModel,e))}),this.customVehicleEngine.loadSelectOptions(this.currentBodyStyle.VehicleEngines,"SalesforceValue"),this.customVehicleEngine.setFirstOption(i,this.currentBodyStyle.VehicleEngines))}setDropdownVisibility(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?e.showSelect():e.hideSelect(),e.selectWrapper.parentNode.parentNode&&(t?e.selectWrapper.parentNode.parentNode.classList.remove("hide"):e.selectWrapper.parentNode.parentNode.classList.add("hide"))}scrollToFirstError(){var e=this.form.querySelectorAll(".error");e.length&&(e[0].scrollIntoView(),window.scrollBy(0,-100))}onInputChange(e){var t=o.helper.getParentNode(e,".form__element-group")[0],i=o.helper.getParentNode(e,"[data-form-element]")[0];i.classList.contains("error")&&i.classList.remove("error"),t&&t.classList.contains("error")&&0===t.querySelectorAll(".error").length&&t.classList.remove("error")}isStepValid(){return!0}};var A=class{constructor(e){this.enquireCtrl=e,this.enquire=e.enquire,this.myScope=this.enquire.querySelector('[data-enquire-step="3"]'),this.formData={},this.modelData=[],this.currentModel={},this.currentBodyStyle={},this.currentCountry="",this.currentCountry="",this.stepValid=!1,this.init()}init(){this.isInited||(this.initDOMElements(),this.initBindings(),this.isInited=!0),this.clearForm(),this.loadData(),this.getformData()}initDOMElements(){this.form=this.myScope.querySelector(".form"),this.formElements=this.form.querySelectorAll("[data-form-element]"),this.inputs=this.form.querySelectorAll("[data-form-input]"),this.submitButton=this.form.querySelector("[data-submit-form]"),this.titleSelect=this.form.querySelector('select[name="Title"]'),this.modelSelect=this.form.querySelector('select[name="Model"]'),this.bodyStyleSelect=this.form.querySelector('[name="BodyStyle"]'),this.vehicleEngineSelect=this.form.querySelector('[name="VehicleEngine"]'),this.titleSelect&&(this.customTitle=new w.a(this.titleSelect)),this.modelSelect&&(this.customModel=new w.a(this.modelSelect)),this.bodyStyleSelect&&(this.customBodyStyle=new w.a(this.bodyStyleSelect),this.customBodyStyle.disableSelect()),this.vehicleEngineSelect&&(this.customVehicleEngine=new w.a(this.vehicleEngineSelect),this.customVehicleEngine.disableSelect())}initBindings(){this.submitButton.addEventListener("click",e=>{e.preventDefault(),Object(l.a)(this.submitButton),this.validateForm(e)}),a()(this.inputs,e=>{"SELECT"===e.tagName||"checkbox"===e.getAttribute("type")?e.addEventListener("change",()=>{this.onInputChange(e)}):e.addEventListener("keydown",()=>{this.onInputChange(e)})}),null!==this.modelSelect&&this.customVehicleEngine&&this.modelSelect.addEventListener("change",e=>{this.customVehicleEngine.resetOptions(),this.updateModelBodyStyles(e),this.updateModelEngines()}),null!==this.bodyStyleSelect&&this.bodyStyleSelect.addEventListener("change",e=>{this.updateModelEngines(e)})}loadData(){this.modelSelect&&(this.enquireCtrl.modelData?(this.modelData=this.enquireCtrl.modelData,this.customModel.resetOptions(),this.customModel.loadSelectOptions(this.sortArrByName(this.modelData.Models),"SalesforceValue"),this.clearForm(),this.getformData()):r.a.getModels().then(e=>{this.modelData=e,this.customModel.resetOptions(),this.customModel.loadSelectOptions(this.sortArrByName(this.modelData.Models),"SalesforceValue"),this.clearForm(),this.getformData()},e=>{throw e}))}clearForm(){this.stepValid=!1,this.formData={},this.form.reset(),a()(this.inputs,e=>{this.onInputChange(e)}),"model-page"===document.body.getAttribute("data-page").toLowerCase()&&this.populateModelSelect()}getformData(){if(this.formData=Object.assign({},this.enquireCtrl.steps[2].formData),this.enquireCtrl.enquireCampaignId)this.formData.Campaign=this.enquireCtrl.enquireCampaignId;else if(this.enquireCtrl.selectedDealer.campaignId)this.formData.Campaign=this.enquireCtrl.selectedDealer.campaignId;else{var e=document.querySelector("main");this.formData.Campaign=e.hasAttribute("data-enquire-campaign")?e.getAttribute("data-enquire-campaign"):""}a()(this.inputs,e=>{"checkbox"===e.type?this.formData[e.name]=e.checked:(this.formData[e.name]=e.value,"Title"===e.name&&(this.formData.LocalizedTitle=e.options[e.selectedIndex].text))}),4===this.formData.EnquireType?(this.formData.Model=this.enquireCtrl.steps[2].formData.Model,this.formData.ModelLabel=this.enquireCtrl.steps[2].formData.ModelLabel,this.formData.BodyStyle=this.enquireCtrl.steps[2].formData.BodyStyle,this.formData.BodyStyleLabel=this.enquireCtrl.steps[2].formData.BodyStyleLabel):(this.customModel&&(this.formData.ModelLabel=this.customModel.getSelectedText()),this.customBodyStyle&&(this.formData.BodyStyleLabel=this.customBodyStyle.getSelectedText())),this.formData.EnquireType=this.enquireCtrl.enquireType,this.formData.DealerCode=this.enquireCtrl.selectedDealer.name,this.formData.ReferralUrl=document.URL,this.formData.CountryCode=this.enquireCtrl.selectedDealer.countryCode,this.formData.Culture=document.documentElement.lang}validateForm(){this.getformData(),r.a.enquireFormV2(JSON.stringify(this.formData),this.api).then(e=>{Object(l.d)(this.submitButton),this.handleErrors(e),e.IsSuccess&&(this.enquireCtrl.showStep("4"),this.stepValid=!0)})}getUrlDataAfterHash(){var e=window.location.hash.substr(1,100);this.additionalInfo&&(this.additionalInfo.value=e)}handleErrors(e){var t=Object.keys(e);a()(this.formElements,i=>{var s=t.indexOf(i.getAttribute("data-form-element")),a=o.helper.getParentNode(i,".form__element-group").length>0&&window.innerWidth>768,r=o.helper.getParentNode(i,".form__element-group")[0];s>=0?(i.querySelector("[data-form-error-message]").innerHTML=e[t[s]][0],a&&r.classList.add("error"),i.classList.add("error")):i.classList.remove("error")}),this.scrollToFirstError(),t.includes("DealerCode")&&this.enquireCtrl.showStep("1")}scrollToFirstError(){var e=this.form.querySelectorAll(".error");e.length&&(e[0].scrollIntoView(),window.scrollBy(0,-100))}onInputChange(e){var t=o.helper.getParentNode(e,".form__element-group")[0],i=o.helper.getParentNode(e,"[data-form-element]")[0];i.classList.contains("error")&&i.classList.remove("error"),t&&t.classList.contains("error")&&0===t.querySelectorAll(".error").length&&t.classList.remove("error")}updateModelBodyStyles(e){var t=null;"object"==typeof e?t=e&&e.target&&e.target.value:"string"==typeof e&&(t=e),this.customBodyStyle.toggleDisabled(t),this.customBodyStyle.resetDefault(),this.customBodyStyle.resetOptions(),e&&(a()(this.modelData.Models,e=>{e.SalesforceValue===t&&(this.currentModel=e,this.checkBodyAndEngine(e))}),this.customBodyStyle.loadSelectOptions(this.currentModel.BodyStyles,"SalesforceValue"),this.customBodyStyle.setFirstOption(t,this.currentModel.BodyStyles),this.currentModel.BodyStyles&&1===this.currentModel.BodyStyles.length&&this.updateModelEngines(this.currentModel.BodyStyles[0].Name,!0))}checkBodyAndEngine(e,t){var i=!0,s=!0;e.BodyStyles.length>1&&(s=!1),t&&t.VehicleEngines.length>1?i=!1:t||a()(e.BodyStyles,e=>{e.VehicleEngines.length>1&&(i=!1)}),s?this.customBodyStyle.hideSelect():this.customBodyStyle.showSelect(),i?this.customVehicleEngine.hideSelect():this.customVehicleEngine.showSelect(),this.customVehicleEngine.selectWrapper.parentNode&&(i?this.customVehicleEngine.selectWrapper.parentNode.classList.add("hide"):this.customVehicleEngine.selectWrapper.parentNode.classList.remove("hide"),s?this.customBodyStyle.selectWrapper.parentNode.classList.add("hide"):this.customBodyStyle.selectWrapper.parentNode.classList.remove("hide")),this.customBodyStyle.selectWrapper.parentNode.parentNode&&this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.contains("form__row")&&(i&&s?this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.add("hide"):this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.remove("hide"))}updateModelEngines(e,t){var i=e&&!t?e.target.value:null;t&&(i=e),e&&(i&&this.customVehicleEngine.toggleDisabled(i),this.customVehicleEngine.resetDefault(),this.customVehicleEngine.resetOptions(),a()(this.currentModel.BodyStyles,e=>{e.SalesforceValue===i&&(this.currentBodyStyle=e)}),this.customVehicleEngine.loadSelectOptions(this.currentBodyStyle.VehicleEngines,"SalesforceValue"),this.customVehicleEngine.setFirstOption(i,this.currentBodyStyle.VehicleEngines))}populateModelSelect(){if(this.modelSelect){var e=document.querySelector("main").getAttribute("data-model-name");document.querySelector("main").hasAttribute("data-model-name")&&""!==document.querySelector("main").getAttribute("data-model-name")&&this.customModel.showSelected(e),this.updateModelBodyStyles(e),this.customBodyStyle.mimic.classList.remove("select__mimic--inactive")}}isStepValid(){return this.stepValid}sortArrByName(e){return e.sort((e,t)=>e.Name.localeCompare(t.Name))}};var q=class{constructor(e){this.enquireCtrl=e,this.myScope=this.enquireCtrl.enquire.querySelector('[data-enquire-step="4"]'),this.formData={},this.currentCountry="",this.stepValid=!1,this.init()}init(){this.isInited||(this.initDOMElements(),this.initBindings(),this.isInited=!0),this.clearForm(),this.getformData(),this.showConfimView()}initDOMElements(){this.form=this.myScope.querySelector(".form"),this.formElements=this.form.querySelectorAll("[data-form-element]"),this.inputs=this.form.querySelectorAll("[data-form-input]"),this.submitButton=this.form.querySelector("[data-submit-form]"),this.modelSelect=this.form.querySelector('select[name="Model"]'),this.confirmViewEl=this.myScope.querySelector('[data-role="confirm"]'),this.thankYouViewEl=this.myScope.querySelector('[data-role="thankyou"]'),this.mapImageEl=this.myScope.querySelector("[data-enquire-map]")}initBindings(){this.submitButton.addEventListener("click",e=>{e.preventDefault(),Object(l.a)(this.submitButton),this.validateForm(e)}),a()(this.inputs,e=>{"SELECT"===e.tagName||"checkbox"===e.getAttribute("type")?e.addEventListener("change",()=>{this.onInputChange(e)}):e.addEventListener("keydown",()=>{this.onInputChange(e)})})}getformData(){if(this.formData=Object.assign({},this.enquireCtrl.steps[3].formData),this.enquireCtrl.enquireCampaignId)this.formData.Campaign=this.enquireCtrl.enquireCampaignId;else if(this.enquireCtrl.selectedDealer.campaignId)this.formData.Campaign=this.enquireCtrl.selectedDealer.campaignId;else{var e=document.querySelector("main");this.formData.Campaign=e.hasAttribute("data-enquire-campaign")?e.getAttribute("data-enquire-campaign"):""}this.formData.Model=this.enquireCtrl.steps[3].formData.Model,this.formData.BodyStyle=this.enquireCtrl.steps[3].formData.BodyStyle,this.formData.VehicleEngine=this.enquireCtrl.steps[3].formData.VehicleEngine,this.formData.EnquireType=this.enquireCtrl.enquireType,this.formData.DealerCode=this.enquireCtrl.selectedDealer.name,this.formData.ReferralUrl=document.URL,this.formData.CountryCode=this.enquireCtrl.selectedDealer.countryCode,this.formData.Culture=document.documentElement.lang,this.formData.isConfirmed=!0}validateForm(){this.getformData(),r.a.enquireFormV2(JSON.stringify(this.formData),this.api).then(e=>{Object(l.d)(this.submitButton),e.IsSuccess?(this.showThankYouView(),this.enquireCtrl.setEnquireSubmitted(),this.enquireCtrl.clearData()):this.handleErrors(e)})}clearForm(){this.stepValid=!1,this.formData={}}getUrlDataAfterHash(){var e=window.location.hash.substr(1,100);this.additionalInfo&&(this.additionalInfo.value=e)}handleErrors(e){Object.keys(e).includes("DealerCode")?this.enquireCtrl.showStep("1"):this.enquireCtrl.showStep("3")}scrollToFirstError(){var e=this.form.querySelectorAll(".error");e.length&&(e[0].scrollIntoView(),window.scrollBy(0,-100))}onInputChange(e){var t=o.helper.getParentNode(e,".form__element-group")[0],i=o.helper.getParentNode(e,"[data-form-element]")[0];i.classList.contains("error")&&i.classList.remove("error"),t&&t.classList.contains("error")&&0===t.querySelectorAll(".error").length&&t.classList.remove("error")}showConfimView(){var e=this.enquireCtrl.selectedDealer||{};this.enquireCtrl.showMapImage(this.mapImageEl,e.lat,e.lon),this.myScope.querySelector('[data-field="dealerName"]').innerHTML=e.name||"",this.myScope.querySelector('[data-field="dealerAddress"]').innerHTML=e.address||"",this.myScope.querySelector('[data-field="dealerPhone"]').innerHTML=e.phone||"",this.myScope.querySelector(".hours").classList.add("hidden"),this.myScope.querySelector('[data-field="dealerMapDirectionsUrl"]').setAttribute("href",e.mapDirectionsUrl),this.myScope.querySelector('[data-field="dealerWebsiteUrl"]').setAttribute("href",e.website),this.myScope.querySelector('[data-field="date"]').innerHTML=this.formData.Date||"-",this.myScope.querySelector('[data-field="time"]').innerHTML=this.formData.Time||"-",this.myScope.querySelector('[data-field="model"]').innerHTML=this.formData.ModelLabel||this.formData.Model||"",this.myScope.querySelector('[data-field="bodyStyle"]').innerHTML=this.formData.BodyStyleLabel||this.formData.BodyStyle||"-",this.myScope.querySelector('[data-field="vehicleEngine"]').innerHTML=this.formData.VehicleEngine||"-";var t="";t=/zh/.test(document.documentElement.lang)?"".concat(this.formData.LastName||""," ").concat(this.formData.FirstName||""," ").concat(this.formData.LocalizedTitle||""):"".concat(this.formData.LocalizedTitle||""," ").concat(this.formData.FirstName||""," ").concat(this.formData.LastName||""),this.myScope.querySelector('[data-field="contactName"]').innerHTML=t||"",this.myScope.querySelector('[data-field="contactTel"]').innerHTML=this.formData.Phone||"",this.myScope.querySelector('[data-field="contactEmail"]').innerHTML=this.formData.Email||"",e.website?this.myScope.querySelector(".visit").classList.remove("hidden"):this.myScope.querySelector(".visit").classList.add("hidden"),this.formData.ContactViaSms?this.myScope.querySelector('[data-field="ContactViaSms"]').classList.remove("hidden"):this.myScope.querySelector('[data-field="ContactViaSms"]').classList.add("hidden"),this.formData.ContactViaEmail?this.myScope.querySelector('[data-field="ContactViaEmail"]').classList.remove("hidden"):this.myScope.querySelector('[data-field="ContactViaEmail"]').classList.add("hidden"),this.formData.ContactViaPhone?this.myScope.querySelector('[data-field="ContactViaPhone"]').classList.remove("hidden"):this.myScope.querySelector('[data-field="ContactViaPhone"]').classList.add("hidden"),this.formData.ContactViaPost?this.myScope.querySelector('[data-field="ContactViaPost"]').classList.remove("hidden"):this.myScope.querySelector('[data-field="ContactViaPost"]').classList.add("hidden"),this.confirmViewEl.classList.add("active"),this.thankYouViewEl.classList.remove("active")}showThankYouView(){this.confirmViewEl.classList.remove("active"),this.thankYouViewEl.classList.add("active")}};var L=class{constructor(e){this.enquire=e,this.enquireType=0,this.lat=null,this.lng=null,this.defaultZoom=12,this.defaultUnit="km",this.formData={},this.dealers=[],this.skipDealers=0,this.mapObject=null,this.isInited=!1,this.isMobile=window.innerWidth<=768,this.screenHeight=window.innerHeight,this.defaultRowHeight=98,this.selectedDealer={},this.defaultDealer=null,this.isMyLocationSearched=!1;try{var t=JSON.parse(this.enquire.getAttribute("data-config"));this.setConfig(t)}catch(e){console.warn("Unable to read enquire button config")}this.steps=[],this.steps[2]=new S(this),this.steps[3]=new A(this),this.steps[4]=new q(this),this.ctaButtons=document.body.querySelectorAll("button[data-enquire-config]"),a()(this.ctaButtons,e=>{e.addEventListener("click",e=>{try{var t=JSON.parse(e.currentTarget.getAttribute("data-enquire-config"));this.enquireCampaignId=t.campaignId,this.enquireType=t.type,this.enquireTypeLabel=t.typeLabel||null,this.enquireStep2Label=t.enquireStep2Label||null,this.additionalCommentsPlaceholder=t.additionalCommentsPlaceholder||null,t.models&&(this.modelData={Models:JSON.parse(t.models)})}catch(e){console.warn("Unable to read enquire button config",e)}this.init()})})}setConfig(e){try{e&&e.defaultLocation&&(this.lat=parseFloat(e.defaultLocation.latitude)||null,this.lng=parseFloat(e.defaultLocation.longitude)||null,this.defaultZoom=parseInt(e.defaultLocation.zoom,10)||this.defaultZoom,this.defaultUnit=e.defaultLocation.distanceUnit||this.unit,this.defaultUnitLabel=e.defaultLocation.distanceUnitLabel,this.culture=e.defaultLocation.culture||null)}catch(e){console.warn("Inconvenience with parsing enquire config",e)}try{if(e&&e.defaultDealer){var t=r.a.transformDealerDataFromConfig(e.defaultDealer);this.setDefaultDealer(t||null)}}catch(e){console.warn("Inconvenience with parsing enquire config",e)}}init(){this.isInited||(this.initDOMElements(),this.initBindings(),this.loadMap(),this.initAutosuggest(),g.a.polyfill(),this.prepareIconImages(),this.isInited=!0),this.enquire.setAttribute("enquireType",this.enquireType),this.initUserJourney(),this.selectedDealer={},this.setOverlayLabels(),this.dealerList.classList.remove("all-loaded"),a()(this.dealerList.querySelectorAll(".row-result"),e=>{e.parentNode.removeChild(e)}),this.dealerList.classList.add("empty"),this.mapEl.classList.remove("dealer-active"),this.dealerList.classList.remove("dealer-active"),this.enquire.classList.remove("dealer-active"),this.overlayHeader.classList.remove("submitted"),this.defaultDealer?(this.selectedDealer=this.defaultDealer,this.showStep("2")):this.showStep("1"),setTimeout(()=>{this.steps[2].init(),this.steps[3].init(),this.steps[4].init(),this.getMyLocation()},0),setTimeout(()=>{this.isMyLocationSearched||this.updateDealers()},100),this.clearMap()}setDefaultDealer(e){e&&(this.defaultDealer=e||{},this.defaultDealer.mapDirectionsUrl=this.getMapDirectionsUrl(this.defaultDealer),this.formData.DealerCode=this.defaultDealer.name||"undefined")}initUserJourney(){this.defaultDealer&&(this.stepButtons[0].classList.add("hidden"),this.stepButtons[1].querySelector(".step-label").innerHTML="1.",this.stepButtons[2].querySelector(".step-label").innerHTML="2.",this.stepButtons[3].querySelector(".step-label").innerHTML="3.")}initDOMElements(){this.enquire.classList.add("top-scrolled"),this.stepButtons=this.enquire.querySelectorAll("[data-trigger-step]"),this.stepContents=this.enquire.querySelectorAll("[data-enquire-step]"),this.revealButtons=this.enquire.querySelectorAll('[data-action="open"]'),this.loadMoreButton=this.enquire.querySelector('[data-action="loadmore"]'),this.dealerList=this.enquire.querySelector(".dealer-list"),this.enquireDealerContent=this.enquire.querySelector("[data-enquire-dealer-list]"),this.enquireLocation=this.enquire.querySelector("#location-input"),this.labelSearchLocation=this.enquireLocation.getAttribute("placeholder"),this.labelMyLocation=this.enquireLocation.getAttribute("data-label-my-location"),this.clearInputButton=this.enquire.querySelector('[data-action="clear-input"]'),this.enquireForm=this.enquire.querySelector(".form.enquire__location"),this.stepSubtitle=this.enquire.querySelector(".subtitle h2"),this.mapEl=this.enquire.querySelector(".dealer-map"),this.overlayOuterWrapper=this.enquire.querySelector(".overlay__outer-wrapper"),this.overlayContent=this.enquire.querySelector(".overlay__content"),this.overlayHeader=this.enquire.querySelector(".overlay__header"),this.enquireHeaderTitle=this.overlayHeader.querySelector(".title h1")}initBindings(){a()(this.stepButtons,e=>{e.addEventListener("click",e=>{this.onStepButtonClick(e)})}),a()(this.stepButtons,e=>{e.addEventListener("click",e=>{this.onStepButtonClick(e)})}),this.loadMoreButton.addEventListener("click",()=>{this.loadMoreDealers()}),this.enquireForm.addEventListener("submit",e=>{e.preventDefault()}),this.enquireLocation.addEventListener("focus",()=>{this.enquireLocation.setAttribute("placeholder",this.labelSearchLocation)}),this.enquireLocation.addEventListener("blur",()=>{this.setEnquireLocationPlaceholder()}),this.clearInputButton.addEventListener("click",()=>{this.enquireLocation.value="",this.enquireLocation.focus()}),window.addEventListener("resize",y()(()=>{this.screenHeight=window.innerHeight,this.isMobile=window.innerWidth<=768},250)),this.overlayContent.addEventListener("scroll",b()(()=>{this.overlayContent.scrollTop<150?this.enquire.classList.add("top-scrolled"):this.enquire.classList.remove("top-scrolled")},100),!1),window.addEventListener("orientationchange",()=>{this.screenHeight=window.innerHeight,this.isMobile=window.innerWidth<=768},!1)}onStepButtonClick(e){var t=e.currentTarget.getAttribute("data-trigger-step");"1"===t&&this.showStep("1"),"2"===t&&this.isStepValid()&&this.showStep("2"),"3"===t&&this.isStepValid()&&this.steps[2].isStepValid()&&this.showStep("3"),"4"===t&&this.steps[3].isStepValid()&&this.showStep("4")}showStep(e){a()(this.stepButtons,t=>{if(t.getAttribute("data-trigger-step")===e){t.classList.add("active");var i=t.querySelector(".name").innerHTML;this.stepSubtitle.innerHTML=i}else t.classList.remove("active");parseInt(t.getAttribute("data-trigger-step"),10)>e&&(t.disabled=!0,t.classList.remove("step-valid")),parseInt(t.getAttribute("data-trigger-step"),10)<=e&&(t.classList.add("step-valid"),t.disabled=!1)}),a()(this.stepContents,t=>{t.getAttribute("data-enquire-step")===e?t.classList.add("active"):t.classList.remove("active")}),"1"===e?this.selectedDealer.name&&this.enquire.classList.add("dealer-active"):this.enquire.classList.remove("dealer-active"),"4"===e&&this.steps[4].init(),this.overlayContent.scrollTop=0}toggleDealer(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.enquire.querySelectorAll(".row-result");a()(i,i=>{if(i.isEqualNode(e))if(!i.classList.contains("active")||t){var s=i.querySelector(".paper").clientHeight+1;i.style.height="".concat(s,"px"),i.classList.add("active"),this.mapEl.classList.add("dealer-active"),this.dealerList.classList.add("dealer-active"),this.enquire.classList.add("dealer-active"),this.overlayContent.scrollTop=0,d.accessibilityHelper.enableFocus(i.querySelector(".content-more"))}else i.style.height="".concat(this.defaultRowHeight,"px"),i.classList.remove("active"),this.mapEl.classList.remove("dealer-active"),this.dealerList.classList.remove("dealer-active"),this.enquire.classList.remove("dealer-active"),this.mapEl.style.top="auto",this.overlayContent.scrollTop=52+this.screenHeight/4+this.defaultRowHeight*i.dealerIndex,d.accessibilityHelper.disableFocus(i.querySelector(".content-more"));else i.style.height="",i.classList.remove("active"),d.accessibilityHelper.disableFocus(i.querySelector(".content-more"))})}toggleOpeningHours(e){if(e.classList.contains("active"))e.classList.remove("active"),e.style.height="";else{e.classList.add("active");var t=e.querySelector(".paper").clientHeight+1;e.style.height="".concat(t,"px");var i=e.closest(".row-result");i&&(i.style.height="auto")}}getMyLocation(){this.defaultDealer||navigator.geolocation.getCurrentPosition(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude,this.isMyLocationSearched=!0,this.setEnquireLocationPlaceholder(),this.updateDealers()})}setEnquireLocationPlaceholder(){this.isMyLocationSearched?this.enquireLocation.setAttribute("placeholder",this.labelMyLocation):this.enquireLocation.setAttribute("placeholder",this.labelSearchLocation)}updateDealers(){this.lat&&this.lng&&(this.dealerList.classList.remove("all-loaded"),this.enquireDealerContent.innerHTML="",r.a.findDealers2(this.lat,this.lng).then(e=>{this.enquireDealerContent.innerHTML="",this.dealers=e,this.skipDealers=0,window.innerWidth>768?this.getDealers(10):this.getDealers(5),this.dealers.length&&this.dealerList.classList.remove("empty")}).catch(()=>{}))}getDealers(e){this.showItems=this.skipDealers+e;var t=this.skipDealers;if(null!==this.enquireDealerContent){for(;t<this.showItems;t++)if(this.dealers[t]){this.dealers[t].letterIndex=this.toLetterIndex(t),this.dealers[t].mapDirectionsUrl=this.getMapDirectionsUrl(this.dealers[t]),this.dealers[t].unit=this.defaultUnitLabel,this.dealers[t].distance="km"===this.defaultUnit?this.dealers[t].DistanceMetres:this.dealers[t].DistanceMiles,this.dealers[t].OpeningHoursToday=this.getOpeningHoursToday(this.dealers[t].OpeningHours),this.dealers[t].showOpeningHours=this.dealers[t].OpeningHours.length>0;var i=document.createElement("div");i.className="row-result",i.setAttribute("data-dealer-index",t),i.dealerIndex=t,i.dealerData=this.dealers[t],i.innerHTML=n.a.render("enquireV2DealerListRow",this.dealers[t]),this.enquireDealerContent.appendChild(i),this.dealers[t].dealerEl=i,"zh-CHS"===this.culture&&(i.querySelector(".unit").style.display="none",i.querySelector(".dist").style.display="none"),i.querySelector('[data-action="open"]').addEventListener("click",e=>{e.preventDefault();var t=this.findAncestor(e.currentTarget,".row-result");this.toggleDealer(t),this.selectedDealerEl&&this.selectedDealerEl.isEqualNode(t)||(this.centerMapTo(t.dealerData.lat,t.dealerData.lon),this.selectDealer(t))}),i.querySelector('[data-action="select-dealer"]').addEventListener("click",e=>{var t=this.findAncestor(e.currentTarget,".row-result");this.selectedDealer=t.dealerData,this.showStep("2")}),this.dealers[t].showOpeningHours&&i.querySelector(".opening-hours").addEventListener("click",e=>{e.preventDefault(),this.toggleOpeningHours(e.currentTarget)}),d.accessibilityHelper.disableFocus(i.querySelector(".content-more")),d.accessibilityHelper.removeClickFocus(this.enquireDealerContent),0===t&&(i.classList.add("selected"),this.centerMapTo(i.dealerData.lat,i.dealerData.lon),this.selectDealer(i)),0!==t||this.isMobile||this.toggleDealer(i,!0)}this.addMapPins(this.dealers.slice(0,this.showItems))}this.skipDealers+=e}loadMoreDealers(){window.innerWidth,this.getDealers(1e3),this.dealerList.classList.add("all-loaded")}toLetterIndex(e){return String.fromCharCode(65+e)}findAncestor(e,t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}setEnquireSubmitted(){this.overlayHeader.classList.add("submitted")}clearData(){this.enquireLocation.value="",this.steps[2].clearForm(),this.steps[3].clearForm(),this.steps[4].clearForm()}isStepValid(){return void 0!==this.selectedDealer.name}getOpeningHoursToday(e){var t=((new Date).getDay()-1)%7;return e.length>=t&&e[t]||""}setOverlayLabels(){this.enquireTypeLabel&&(this.enquireHeaderTitle.innerHTML=this.enquireTypeLabel),this.enquireStep2Label&&(this.stepButtons[1].querySelector(".name").innerHTML=this.enquireStep2Label),this.additionalCommentsPlaceholder&&(this.stepContents[2].querySelector("#AdditionalComments").placeholder=this.additionalCommentsPlaceholder)}onMapApiReady(){this.isInited&&(this.loadMap(),/comp|inter|loaded/.test(document.readyState)?this.initAutosuggest():document.addEventListener("DOMContentLoaded",()=>{this.initAutosuggest()},!1))}},M=i(70);function E(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}var C=null;var I=class extends L{clearMap(){this.mapObject&&this.mapObject.layers.clear()}initAutosuggest(){window.Microsoft&&window.Microsoft.Maps.loadModule&&window.Microsoft.Maps.loadModule("Microsoft.Maps.AutoSuggest",{callback:()=>{var e={maxResults:4,autoDetectLocation:!/zh/.test(document.documentElement.lang),userLocation:new window.Microsoft.Maps.Location(this.lat,this.lng),countryCode:/zh/.test(document.documentElement.lang)?"cn":void 0};new window.Microsoft.Maps.AutosuggestManager(e).attachAutosuggest("#location-input",".form.enquire__location",e=>{(e||{}).location&&(this.lat=e.location.latitude,this.lng=e.location.longitude,this.isMyLocationSearched=!1,this.centerMapTo(this.lat,this.lng),this.updateDealers())})}})}loadMap(){if(window.Microsoft&&window.Microsoft.Maps.Location){var e=document.getElementById("dealer-map");this.mapObject=new window.Microsoft.Maps.Map(e,{center:this.lat?new window.Microsoft.Maps.Location(this.lat,this.lng):null,zoom:this.defaultZoom,showBreadcrumb:!1,showMapTypeSelector:!1,showZoomButtons:!this.isMobile,navigationBarMode:window.Microsoft.Maps.NavigationBarMode.compact,customMapStyle:this.getMapTheme()}),window.Microsoft.Maps.loadModule("Microsoft.Maps.Clustering",()=>{this.addMapPins(this.dealers)})}}centerMapTo(e,t){this.mapObject&&this.mapObject.setView({center:new window.Microsoft.Maps.Location(e,t),zoom:this.defaultZoom})}createMapPin(e){if(!window.Microsoft||!window.Microsoft.Maps.loadModule)return null;var t=this.createMapPinIcon(e.dealerData.letterIndex,0===e.dealerIndex),i=new window.Microsoft.Maps.Location(e.dealerData.lat,e.dealerData.lon),s=new window.Microsoft.Maps.Pushpin(i,{icon:t,anchor:new window.Microsoft.Maps.Point(31,26)});return s.metadata={dealerIndex:e.dealerIndex},window.Microsoft.Maps.Events.addHandler(s,"click",this.onMapPinClick.bind(this)),s}addMapPins(e){if(window.Microsoft&&window.Microsoft.Maps.ClusterLayer){var t=[];a()(e,e=>{e.dealerEl&&(e.dealerEl.dealerMapPin=this.createMapPin(e.dealerEl),t.push(e.dealerEl.dealerMapPin))});var i=new window.Microsoft.Maps.ClusterLayer(t,{gridSize:100,clusteredPinCallback:e=>{var t=e.containedPushpins.length;e.setOptions({icon:this.createMapPinIcon(t),text:""})}});this.mapObject.layers.clear(),this.mapObject.layers.insert(i)}}prepareIconImages(){var e,t=this;return(e=function*(){t.imgIcon1=new Image,yield M.a.syncLoad(t.imgIcon1,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAjVBMVEUAAACfgGCddk6kgFuZd1WfgGCqeVWneFijeFWlfFqheVeifFefelWlelWlfVqle1qieViifVije1mje1eie1ije1ikeVekelalelike1ekelmieVale1ijfFijfFike1ekfFmie1eie1eke1eke1ike1ijfFikelike1ike1ije1ikelike1mkeleke1hVScZ6AAAALnRSTlMACA0ODxAVICQlJikwMDM2NzdZW11mcHN3eHl8fICIiYqzuLi53+Hj5Ons7u/yQfr3mgAAARFJREFUSMel18tWAkEQA9BSREBU0DG+xbeDovn/z3PjwWmmu7qqJuvcfSKi5OZa5ORYglmRDwvgNKzJZwT9ihzg/3TQbzX5AmDh04/kAJ9ot9/RTt/TLp/RDp/VZl/Q5CuAZVibvKINXtVVX9EVX9WqfyIHeJMueqMueLPOeofOeJfueacm3wCchXXiA7rjQ3rrDz9j/OcKuNgTOVpH9Pc90ByIiMzWQ3TEd7Xfp9rrd7XP97XH57Td57XVl7TNl7XFa7rudV3zNa37uta8RZe9TZe8Vee9Xef8xqH7fnMHNCP7Lky9V6fer7s+ov99TIvMWpL8ugXO9yNvZNqSH5dRLTJt3yejJqpF5nOR8Vhr/AKoDTNNZXnRpgAAAABJRU5ErkJggg=="),t.imgIcon2=new Image,yield M.a.syncLoad(t.imgIcon2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAe1BMVEUAAAAAACsaGhoXFxcVFRUYGBgYGBgVFRUVFRUUFBsUFBoTExkZGRkSEhgTExcSEhYSEhYUFBcTExYWFhYVFRcUFBcUFBYVGBgVFxcWGBgXFxgWFhgWFhgWFxcWFhgWFhgWFxgWFxgWFhgWFxcWFxgXFxgXGBgWFxgWFxidzeDSAAAAKHRSTlMABgoLDBUgJCUmJykpKkNFRk1cXGNmZ3d4gIiJiqasrd/g4+Tp6+zw/wyQ+wAAAQNJREFUSMel18cSwkAMA1BTQw+m9178/19IAgyk7HptR2e9GV0FwGS1BIgiMGZDtO4j9syaaI9G/9Zm/9VG/9NEh8T3dXpLVMHntNoXtNKXtMo7tMI7tdh7NNFR4r1a5Bkt8KwO+oAO+KBm/Y6oghdprxdqjxdrp1doh1fpklfqjx+adc4bdMab9M+3bjb+nCKOawDdq0U/FohxI13fuVbRFp/Vep/XWl/UOl/WGu/Scu/WUu/TMu/XEs/psOd1yIc078Oa8xLt9zLt81Lt9nLt8neFLvv7XKOLXqvzXq+z3qL/3qYTf0n1bYY4qlveSJT488SqU39qN2KrBhgMAJpNrvECe/QJ7M9mezsAAAAASUVORK5CYII=")},function(){var t=this,i=arguments;return new Promise((function(s,a){var r=e.apply(t,i);function n(e){E(r,s,a,n,o,"next",e)}function o(e){E(r,s,a,n,o,"throw",e)}n(void 0)}))})()}createMapPinIcon(e,t){try{var i=document.createElement("canvas");i.width=62,i.height=57;var s=i.getContext("2d"),a=t?this.imgIcon1:this.imgIcon2;s.drawImage(a,0,0,62,57),s.font="normal normal normal 16px Optima",s.strokeStyle="#FFFFFF";var r=s.measureText(e).width;return s.strokeText(e,(62-r)/2-2,33),i.toDataURL("image/png")}catch(e){return t?'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.4" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#A47B58"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#A47B58"/></svg>':'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.3" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#161718"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#161718"/></svg>'}}onMapPinClick(e){var t=this.enquireDealerContent.querySelector(['[data-dealer-index="'.concat(e.target.metadata.dealerIndex,'"]')]);this.toggleDealer(t,!0),this.selectDealer(t);var i=70+100*e.target.metadata.dealerIndex;setTimeout(()=>{this.dealerList.scrollTop=i},301)}selectDealer(e){this.selectedDealerEl&&!this.selectedDealerEl.isEqualNode(e)&&(this.selectDealerOnMap(this.selectedDealerEl,!1),this.selectedDealerEl.classList.remove("selected")),this.selectedDealerEl&&e.isEqualNode(this.selectedDealerEl)||(this.selectDealerOnMap(e,!0),e.classList.add("selected"),setTimeout(()=>{var t=e.querySelector(".paper").clientHeight+1;e.style.height="".concat(t,"px")},100),this.selectedDealerEl=e)}selectDealerOnMap(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.dealerMapPin){var i=e.dealerData.letterIndex;e.dealerMapPin.setOptions({icon:this.createMapPinIcon(i,t)})}}getMapDirectionsUrl(e){return"https://www.bing.com/maps?rtp=~pos.".concat(e.lat,"_").concat(e.lon,"_").concat(encodeURIComponent(e.name))}getMapTheme(){return{elements:{area:{fillColor:"#F2F2F2"},point:{fillColor:"#F2F2F2"},political:{fillColor:"#F2F2F2"},structure:{fillColor:"#FFFFFF"},transportation:{fillColor:"#FFF2B0",strokeColor:"#FFF2B0"},vegetation:{fillColor:"#D8EFD5"},water:{fillColor:"#A3BBC4"}},version:"1.0"}}showMapImage(e,t,i){var s=t||0,a=i||0;this.getKeyFromApiScript();var r="".concat("https://dev.virtualearth.net/REST/V1/Imagery/Map/Road/").concat(s,"%2C").concat(a,"/14?mapSize=1920,1080&format=png&key=").concat(C,"&st=").concat("water|fc:c9c9c9;lbc:9e9e9e_transportation|fc:ffffff;sc:ffffff;lbc:9e9e9e;loc:60ffffff_railway|fc:e5e5e5;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_trail|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_road|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_building|fc:d5d5d5_point|v:false_political|bv:false_area|fc:e5e5e5;lbc:616161;loc:e5e5e5_park|fc:c4c4c4_g|landColor:e5e5e5","&dpi=Large");e.src=r}getKeyFromApiScript(){if(!C){var e=Array.from(document.scripts).filter(e=>e.src.indexOf("https://www.bing.com/api/")>=0&&e);e.length&&(C=e[0].src.split("key=")[1])}}};function D(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}var T=[{featureType:"land",elementType:"geometry",stylers:{visibility:"on",color:"#f2f2f2"}},{featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:"#a3bbc4"}},{featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:"#d8efd5"}},{featureType:"building",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"education",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"medical",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"scenicspots",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"on",weight:1}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#fff2b0"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#6995dc"}},{featureType:"highway",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"local",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"d0d0d0"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"town",elementType:"labels",stylers:{visibility:"on"}},{featureType:"road",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#d0d0d0"}},{featureType:"districtlabel ",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"labels",stylers:{visibility:"on"}},{featureType:"entertainment",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"shopping",elementType:"geometry",stylers:{visibility:"off"}}],k=null;var B=class extends L{initUserJourney(){this.defaultDealer?(this.stepButtons[0].classList.add("hidden"),4===this.enquireType?(this.stepButtons[1].classList.remove("hidden"),this.stepButtons[1].querySelector(".step-label").innerHTML="1.",this.stepButtons[2].querySelector(".step-label").innerHTML="2.",this.stepButtons[3].querySelector(".step-label").innerHTML="3."):(this.stepButtons[1].classList.add("hidden"),this.stepButtons[2].querySelector(".step-label").innerHTML="1.",this.stepButtons[3].querySelector(".step-label").innerHTML="2.")):(this.stepButtons[0].classList.remove("hidden"),4===this.enquireType?(this.stepButtons[1].classList.remove("hidden"),this.stepButtons[1].querySelector(".step-label").innerHTML="2.",this.stepButtons[2].querySelector(".step-label").innerHTML="3.",this.stepButtons[3].querySelector(".step-label").innerHTML="4."):(this.stepButtons[1].classList.add("hidden"),this.stepButtons[1].querySelector(".step-label").innerHTML="1.",this.stepButtons[2].querySelector(".step-label").innerHTML="2.",this.stepButtons[3].querySelector(".step-label").innerHTML="3."))}showStep(e){4!==this.enquireType&&"2"===e&&(e="3"),a()(this.stepButtons,t=>{if(t.getAttribute("data-trigger-step")===e){t.classList.add("active");var i=t.querySelector(".name").innerHTML;this.stepSubtitle.innerHTML=i}else t.classList.remove("active");parseInt(t.getAttribute("data-trigger-step"),10)>e&&(t.disabled=!0,t.classList.remove("step-valid")),parseInt(t.getAttribute("data-trigger-step"),10)<=e&&(t.classList.add("step-valid"),t.disabled=!1)}),a()(this.stepContents,t=>{t.getAttribute("data-enquire-step")===e?t.classList.add("active"):t.classList.remove("active")}),"1"===e?this.selectedDealer.name&&this.enquire.classList.add("dealer-active"):this.enquire.classList.remove("dealer-active"),"4"===e&&this.steps[4].init(),this.overlayContent.scrollTop=0}clearMap(){this.mapObject&&this.mapObject.clearOverlays()}initAutosuggest(){if(window.BMap&&this.mapObject){var e=new window.BMap.Autocomplete({input:"location-input",location:this.mapObject,onSearchComplete:()=>{e.show()},types:["city"]});e.addEventListener("onconfirm",e=>{var{item:{value:t}}=e,i=t.province+t.city+t.district+t.street+t.business;(new window.BMap.Geocoder).getPoint(i,e=>{if(e){var{lng:t,lat:i}=e;this.lat=i,this.lng=t,this.centerMapTo(this.lng,this.lat,this.defaultZoom),this.updateDealers()}},"Beijing")})}}loadMap(){if(window.BMap&&window.BMap.Map){if(this.mapObject=new window.BMap.Map("dealer-map"),this.mapObject.addEventListener("tilesloaded",()=>{this.initAutosuggest()}),this.lat){var e=new window.BMap.Point(this.lng,this.lat);this.mapObject.centerAndZoom(e,this.defaultZoom)}if(this.mapObject.enableScrollWheelZoom(),this.mapObject.setMapStyle(this.getMapTheme()),!this.isMobile){var t=new window.BMap.NavigationControl({type:BMAP_NAVIGATION_CONTROL_ZOOM,anchor:BMAP_ANCHOR_TOP_RIGHT});this.mapObject.addControl(t)}this.addMapPins(this.dealers)}}centerMapTo(e,t,i){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(window.BMap&&window.BMap.Map){var a=this.mapObject,r=new window.BMap.Point(e,t);s?a.centerAndZoom(r,i):a.setCenter(r)}}createMapPin(e){if(!window.BMap||!window.BMap.Map)return null;var t=new window.BMap.Point(e.dealerData.lon,e.dealerData.lat),i=this.createMapPinIcon(e.dealerData.letterIndex,0===e.dealerIndex),s=new window.BMap.Icon(i,new window.BMap.Size(64,64),{anchor:new window.BMap.Size(32,32)}),a=new window.BMap.Marker(t,{icon:s});return a.addEventListener("click",t=>{this.centerMapTo(e.dealerData.lon,e.dealerData.lat,this.defaultZoom),this.onMapPinClick.call(this,t)}),a.dealerIndex=e.dealerIndex,a}addMapPins(e){window.BMap&&window.BMap.Map&&(this.mapObject.clearOverlays(),e.forEach(e=>{e.dealerEl&&(e.dealerEl.dealerMapPin=this.createMapPin(e.dealerEl),this.mapObject.addOverlay(e.dealerEl.dealerMapPin))}))}prepareIconImages(){var e,t=this;return(e=function*(){t.imgIcon1=new Image,yield M.a.syncLoad(t.imgIcon1,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAjVBMVEUAAACfgGCddk6kgFuZd1WfgGCqeVWneFijeFWlfFqheVeifFefelWlelWlfVqle1qieViifVije1mje1eie1ije1ikeVekelalelike1ekelmieVale1ijfFijfFike1ekfFmie1eie1eke1eke1ike1ijfFikelike1ike1ije1ikelike1mkeleke1hVScZ6AAAALnRSTlMACA0ODxAVICQlJikwMDM2NzdZW11mcHN3eHl8fICIiYqzuLi53+Hj5Ons7u/yQfr3mgAAARFJREFUSMel18tWAkEQA9BSREBU0DG+xbeDovn/z3PjwWmmu7qqJuvcfSKi5OZa5ORYglmRDwvgNKzJZwT9ihzg/3TQbzX5AmDh04/kAJ9ot9/RTt/TLp/RDp/VZl/Q5CuAZVibvKINXtVVX9EVX9WqfyIHeJMueqMueLPOeofOeJfueacm3wCchXXiA7rjQ3rrDz9j/OcKuNgTOVpH9Pc90ByIiMzWQ3TEd7Xfp9rrd7XP97XH57Td57XVl7TNl7XFa7rudV3zNa37uta8RZe9TZe8Vee9Xef8xqH7fnMHNCP7Lky9V6fer7s+ov99TIvMWpL8ugXO9yNvZNqSH5dRLTJt3yejJqpF5nOR8Vhr/AKoDTNNZXnRpgAAAABJRU5ErkJggg=="),t.imgIcon2=new Image,yield M.a.syncLoad(t.imgIcon2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAe1BMVEUAAAAAACsaGhoXFxcVFRUYGBgYGBgVFRUVFRUUFBsUFBoTExkZGRkSEhgTExcSEhYSEhYUFBcTExYWFhYVFRcUFBcUFBYVGBgVFxcWGBgXFxgWFhgWFhgWFxcWFhgWFhgWFxgWFxgWFhgWFxcWFxgXFxgXGBgWFxgWFxidzeDSAAAAKHRSTlMABgoLDBUgJCUmJykpKkNFRk1cXGNmZ3d4gIiJiqasrd/g4+Tp6+zw/wyQ+wAAAQNJREFUSMel18cSwkAMA1BTQw+m9178/19IAgyk7HptR2e9GV0FwGS1BIgiMGZDtO4j9syaaI9G/9Zm/9VG/9NEh8T3dXpLVMHntNoXtNKXtMo7tMI7tdh7NNFR4r1a5Bkt8KwO+oAO+KBm/Y6oghdprxdqjxdrp1doh1fpklfqjx+adc4bdMab9M+3bjb+nCKOawDdq0U/FohxI13fuVbRFp/Vep/XWl/UOl/WGu/Scu/WUu/TMu/XEs/psOd1yIc078Oa8xLt9zLt81Lt9nLt8neFLvv7XKOLXqvzXq+z3qL/3qYTf0n1bYY4qlveSJT488SqU39qN2KrBhgMAJpNrvECe/QJ7M9mezsAAAAASUVORK5CYII=")},function(){var t=this,i=arguments;return new Promise((function(s,a){var r=e.apply(t,i);function n(e){D(r,s,a,n,o,"next",e)}function o(e){D(r,s,a,n,o,"throw",e)}n(void 0)}))})()}createMapPinIcon(e,t){try{var i=document.createElement("canvas");i.width=62,i.height=57;var s=i.getContext("2d"),a=t?this.imgIcon1:this.imgIcon2;s.drawImage(a,0,0,62,57),s.font="normal normal normal 16px Optima",s.strokeStyle="#FFFFFF";var r=s.measureText(e).width;return s.strokeText(e,(62-r)/2-2,33),i.toDataURL("image/png")}catch(e){return t?'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.4" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#A47B58"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#A47B58"/></svg>':'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.3" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#161718"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#161718"/></svg>'}}onMapPinClick(e){var t=e.target.dealerIndex,i=this.enquireDealerContent.querySelector(['[data-dealer-index="'.concat(t,'"]')]);this.toggleDealer(i,!0),this.selectDealer(i);var s=70+100*t;setTimeout(()=>{this.dealerList.scrollTop=s},301)}selectDealer(e){this.selectedDealerEl&&!this.selectedDealerEl.isEqualNode(e)&&(this.selectDealerOnMap(this.selectedDealerEl,!1),this.selectedDealerEl.classList.remove("selected")),this.selectedDealerEl&&e.isEqualNode(this.selectedDealerEl)||(this.selectDealerOnMap(e,!0),e.classList.add("selected"),this.selectedDealerEl=e,this.centerMapTo(e.dealerData.lon,e.dealerData.lat,this.defaultZoom))}selectDealerOnMap(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.dealerMapPin){var i=this.createMapPinIcon(e.dealerData.letterIndex,t),s=new window.BMap.Icon(i,new window.BMap.Size(64,64),{anchor:new window.BMap.Size(32,32)});e.dealerMapPin.setIcon(s)}}getMapDirectionsUrl(e){var t=e.name.replace(/\W/g,"");return"https://api.map.baidu.com/marker?location=".concat(e.lat,",").concat(e.lon,"&title=").concat(encodeURIComponent(t),"&output=html&src=").concat("webapp.AstonMartin.AMWebsite")}getMapTheme(){return{styleJson:T}}showMapImage(e,t,i){this.getKeyFromApiScript();var s=t||0,a=i||0,r="".concat("http://api.map.baidu.com/staticimage/").concat("v2","?ak=").concat(k,"&center=").concat(a,",").concat(s,"&width=").concat("500","&height=").concat("300","&zoom=").concat(this.defaultZoom);e.src=r}getKeyFromApiScript(){k="BqRhDMItraRLu6cNT70YVcSvipa3uCUl"}};var x=class{constructor(e){this.enquire=e,this.enquireType=1,this.lat=null,this.lng=null,this.defaultZoom=12,this.defaultUnit="km",this.formData={},this.dealers=[],this.skipDealers=0,this.mapObject=null,this.isInited=!1,this.isMobile=window.innerWidth<=768,this.screenHeight=window.innerHeight,this.defaultRowHeight=98,this.selectedDealer={},this.isMyLocationSearched=!1;try{var t=JSON.parse(this.enquire.getAttribute("data-findadealer-config"));this.setConfig(t)}catch(e){console.warn("Unable to read enquire button config")}this.init()}setConfig(e){try{e&&e.defaultLocation&&(this.lat=parseFloat(e.defaultLocation.latitude)||null,this.lng=parseFloat(e.defaultLocation.longitude)||null,this.defaultZoom=parseInt(e.defaultLocation.zoom,10)||this.defaultZoom,this.defaultUnit=e.defaultLocation.distanceUnit||this.defaultUnit,this.defaultUnitLabel=e.defaultLocation.distanceUnitLabel,this.culture=e.defaultLocation.culture||null)}catch(e){console.warn("Inconvenience with parsing findadealer config",e)}}init(){this.isInited||(this.isInited=!0,this.initDOMElements(),this.initBindings(),g.a.polyfill(),this.prepareIconImages()),this.setOverlayTitle(),this.selectedDealer={},this.showStep("1"),this.dealerList.classList.remove("all-loaded"),a()(this.dealerList.querySelectorAll(".row-result"),e=>{e.parentNode.removeChild(e)}),this.dealerList.classList.add("empty"),this.mapEl.classList.remove("dealer-active"),this.dealerList.classList.remove("dealer-active"),this.enquire.classList.remove("dealer-active"),setTimeout(()=>{this.getMyLocation()},2e3)}initDOMElements(){this.enquire.classList.add("top-scrolled"),this.stepButtons=this.enquire.querySelectorAll("[data-trigger-step]"),this.stepContents=this.enquire.querySelectorAll("[data-enquire-step]"),this.revealButtons=this.enquire.querySelectorAll('[data-action="open"]'),this.loadMoreButton=this.enquire.querySelector('[data-action="loadmore"]'),this.dealerList=this.enquire.querySelector(".dealer-list"),this.enquireDealerContent=this.enquire.querySelector("[data-enquire-dealer-list]"),this.enquireLocation=this.enquire.querySelector("#location-input"),this.labelSearchLocation=this.enquireLocation.getAttribute("placeholder"),this.labelMyLocation=this.enquireLocation.getAttribute("data-label-my-location"),this.clearInputButton=this.enquire.querySelector('[data-action="clear-input"]'),this.enquireForm=this.enquire.querySelector(".form.enquire__location"),this.stepSubtitle=this.enquire.querySelector(".subtitle h2"),this.mapEl=this.enquire.querySelector(".dealer-map")}initBindings(){a()(this.stepButtons,e=>{e.addEventListener("click",e=>{this.onStepButtonClick(e)})}),a()(this.stepButtons,e=>{e.addEventListener("click",e=>{this.onStepButtonClick(e)})}),this.loadMoreButton.addEventListener("click",()=>{this.loadMoreDealers()}),this.enquireForm.addEventListener("submit",e=>{e.preventDefault()}),this.enquireLocation.addEventListener("focus",()=>{this.enquireLocation.setAttribute("placeholder",this.labelSearchLocation)}),this.enquireLocation.addEventListener("blur",()=>{this.setEnquireLocationPlaceholder()}),this.clearInputButton.addEventListener("click",()=>{this.enquireLocation.value="",this.enquireLocation.focus()}),window.addEventListener("resize",y()(()=>{this.screenHeight=window.innerHeight,this.isMobile=window.innerWidth<=768},250)),window.addEventListener("orientationchange",()=>{this.screenHeight=window.innerHeight,this.isMobile=window.innerWidth<=768},!1)}onStepButtonClick(e){var t=e.currentTarget.getAttribute("data-trigger-step");"1"===t&&this.showStep("1"),"2"===t&&this.isStepValid()&&this.showStep("2"),"3"===t&&this.isStepValid()&&this.steps[2].isStepValid()&&this.showStep("3"),"4"===t&&this.steps[3].isStepValid()&&this.showStep("4")}showStep(e){a()(this.stepButtons,t=>{if(t.getAttribute("data-trigger-step")===e){t.classList.add("active");var i=t.querySelector(".name").innerHTML;this.stepSubtitle.innerHTML=i}else t.classList.remove("active");parseInt(t.getAttribute("data-trigger-step"),10)>e&&(t.disabled=!0,t.classList.remove("step-valid")),parseInt(t.getAttribute("data-trigger-step"),10)<=e&&(t.classList.add("step-valid"),t.disabled=!1)}),a()(this.stepContents,t=>{t.getAttribute("data-enquire-step")===e?t.classList.add("active"):t.classList.remove("active")}),"1"===e?this.selectedDealer.name&&this.enquire.classList.add("dealer-active"):this.enquire.classList.remove("dealer-active"),"4"===e&&this.steps[4].init()}toggleDealer(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.enquire.querySelectorAll(".row-result");a()(i,i=>{if(i.isEqualNode(e))if(!i.classList.contains("active")||t){var s=i.querySelector(".paper").clientHeight+1;i.style.height="".concat(s,"px"),i.classList.add("active"),this.mapEl.classList.add("dealer-active"),this.dealerList.classList.add("dealer-active"),this.enquire.classList.add("dealer-active"),d.accessibilityHelper.enableFocus(i.querySelector(".content-more"))}else i.style.height="".concat(this.defaultRowHeight,"px"),i.classList.remove("active"),this.mapEl.classList.remove("dealer-active"),this.dealerList.classList.remove("dealer-active"),this.enquire.classList.remove("dealer-active"),this.mapEl.style.top="auto",d.accessibilityHelper.disableFocus(i.querySelector(".content-more"));else i.style.height="",i.classList.remove("active"),d.accessibilityHelper.disableFocus(i.querySelector(".content-more"))})}toggleOpeningHours(e){if(e.classList.contains("active"))e.classList.remove("active"),e.style.height="";else{e.classList.add("active");var t=e.querySelector(".paper").clientHeight+1;e.style.height="".concat(t,"px");var i=e.closest(".row-result");i&&(i.style.height="auto")}}getMyLocation(){navigator.geolocation.getCurrentPosition(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude,this.isMyLocationSearched=!0,this.setEnquireLocationPlaceholder(),this.updateDealers()})}setEnquireLocationPlaceholder(){this.isMyLocationSearched?this.enquireLocation.setAttribute("placeholder",this.labelMyLocation):this.enquireLocation.setAttribute("placeholder",this.labelSearchLocation)}updateDealers(){this.lat&&this.lng&&r.a.findDealers2(this.lat,this.lng).then(e=>{this.enquireDealerContent.innerHTML="",this.dealers=e,this.skipDealers=0,this.dealerList.classList.remove("all-loaded"),a()(this.dealerList.querySelectorAll(".row-result"),e=>{e.parentNode.removeChild(e)}),window.innerWidth>768?this.getDealers(10):this.getDealers(5),this.dealers.length?this.dealerList.classList.remove("empty"):this.dealerList.classList.add("empty")}).catch(()=>{})}getDealers(e){this.showItems=this.skipDealers+e;var t=this.skipDealers;if(null!==this.enquireDealerContent){for(;t<this.showItems;t++)if(this.dealers[t]){var i=document.createElement("div");this.dealers[t].letterIndex=this.toLetterIndex(t),this.dealers[t].mapDirectionsUrl=this.getMapDirectionsUrl(this.dealers[t]),this.dealers[t].unit=this.defaultUnitLabel,this.dealers[t].distance="km"===this.defaultUnit?this.dealers[t].DistanceMetres:this.dealers[t].DistanceMiles,this.dealers[t].OpeningHoursToday=this.getOpeningHoursToday(this.dealers[t].OpeningHours),this.dealers[t].showOpeningHours=this.dealers[t].OpeningHours.length>0,i.className="row-result",i.setAttribute("data-dealer-index",t),i.dealerIndex=t,i.dealerData=this.dealers[t],i.dealerMapPin=this.createMapPin(i),i.innerHTML=n.a.render("findADealerListRow",this.dealers[t]),this.enquireDealerContent.appendChild(i),this.dealers[t].dealerEl=i,"zh-CHS"===this.culture&&(i.querySelector(".unit").style.display="none",i.querySelector(".dist").style.display="none"),i.querySelector('[data-action="open"]').addEventListener("click",e=>{e.preventDefault();var t=this.findAncestor(e.currentTarget,".row-result");this.toggleDealer(t),this.selectedDealerEl&&this.selectedDealerEl.isEqualNode(t)||(this.centerMapTo(t.dealerData.lat,t.dealerData.lon),this.selectDealer(t))}),this.dealers[t].showOpeningHours&&i.querySelector(".opening-hours").addEventListener("click",e=>{e.preventDefault(),this.toggleOpeningHours(e.currentTarget)}),d.accessibilityHelper.disableFocus(i.querySelector(".content-more")),d.accessibilityHelper.removeClickFocus(this.enquireDealerContent),0===t&&(i.classList.add("selected"),this.centerMapTo(i.dealerData.lat,i.dealerData.lon),this.selectDealer(i)),0!==t||this.isMobile||this.toggleDealer(i,!0)}this.addMapPins(this.dealers.slice(0,this.showItems))}this.skipDealers+=e}loadMoreDealers(){window.innerWidth,this.getDealers(1e3),this.dealerList.classList.add("all-loaded")}toLetterIndex(e){return String.fromCharCode(65+e)}findAncestor(e,t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}setEnquireSubmitted(){}clearData(){this.enquireLocation.value="",this.steps[2].clearForm(),this.steps[3].clearForm(),this.steps[4].clearForm()}isStepValid(){return void 0!==this.selectedDealer.name}getOpeningHoursToday(e){var t=((new Date).getDay()-1)%7;return e.length>=t&&e[t]||""}setOverlayTitle(){}setDistanceVisibility(e){var t=document.querySelector(".dealer-list");console.log("________________DIST",t,e)}onMapApiReady(){this.isInited&&(/comp|inter|loaded/.test(document.readyState)?setTimeout(()=>{this.initAutosuggest(),this.loadMap()},1e3):document.addEventListener("DOMContentLoaded",()=>{this.initAutosuggest(),this.loadMap()},!1))}};function O(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}var P=null;var F=class extends x{clearMap(){this.mapObject&&this.mapObject.layers.clear()}initAutosuggest(){window.Microsoft&&window.Microsoft.Maps.loadModule&&window.Microsoft.Maps.loadModule("Microsoft.Maps.AutoSuggest",{callback:()=>{new window.Microsoft.Maps.AutosuggestManager({maxResults:4}).attachAutosuggest("#location-input",".form.enquire__location",e=>{(e||{}).location&&(this.lat=e.location.latitude,this.lng=e.location.longitude,this.isMyLocationSearched=!1,this.updateDealers(),this.centerMapTo(this.lat,this.lng))})}})}loadMap(){var e=document.getElementById("findadealer-map");this.mapObject=new window.Microsoft.Maps.Map(e,{center:this.lat?new window.Microsoft.Maps.Location(this.lat,this.lng):null,zoom:this.defaultZoom,showBreadcrumb:!1,showMapTypeSelector:!1,showZoomButtons:!this.isMobile,navigationBarMode:window.Microsoft.Maps.NavigationBarMode.compact,customMapStyle:this.getMapTheme()}),window.Microsoft.Maps.loadModule("Microsoft.Maps.Clustering",()=>{this.updateDealers()})}centerMapTo(e,t){this.mapObject.setView({center:new window.Microsoft.Maps.Location(e,t),zoom:this.defaultZoom})}createMapPin(e){var t=new window.Microsoft.Maps.Location(e.dealerData.lat,e.dealerData.lon),i=new window.Microsoft.Maps.Pushpin(t,{icon:this.createMapPinIcon(e.dealerData.letterIndex,0===e.dealerIndex),anchor:new window.Microsoft.Maps.Point(31,26)});return i.metadata={dealerIndex:e.dealerIndex},window.Microsoft.Maps.Events.addHandler(i,"click",this.onMapPinClick.bind(this)),i}addMapPins(e){var t=[];e.forEach(e=>{e.dealerEl.dealerMapPin&&t.push(e.dealerEl.dealerMapPin)});var i=new window.Microsoft.Maps.ClusterLayer(t,{gridSize:100,clusteredPinCallback:e=>{var t=e.containedPushpins.length;e.setOptions({icon:this.createMapPinIcon(t),text:""})}});this.mapObject.layers.clear(),this.mapObject.layers.insert(i)}prepareIconImages(){var e,t=this;return(e=function*(){t.imgIcon1=new Image,yield M.a.syncLoad(t.imgIcon1,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAjVBMVEUAAACfgGCddk6kgFuZd1WfgGCqeVWneFijeFWlfFqheVeifFefelWlelWlfVqle1qieViifVije1mje1eie1ije1ikeVekelalelike1ekelmieVale1ijfFijfFike1ekfFmie1eie1eke1eke1ike1ijfFikelike1ike1ije1ikelike1mkeleke1hVScZ6AAAALnRSTlMACA0ODxAVICQlJikwMDM2NzdZW11mcHN3eHl8fICIiYqzuLi53+Hj5Ons7u/yQfr3mgAAARFJREFUSMel18tWAkEQA9BSREBU0DG+xbeDovn/z3PjwWmmu7qqJuvcfSKi5OZa5ORYglmRDwvgNKzJZwT9ihzg/3TQbzX5AmDh04/kAJ9ot9/RTt/TLp/RDp/VZl/Q5CuAZVibvKINXtVVX9EVX9WqfyIHeJMueqMueLPOeofOeJfueacm3wCchXXiA7rjQ3rrDz9j/OcKuNgTOVpH9Pc90ByIiMzWQ3TEd7Xfp9rrd7XP97XH57Td57XVl7TNl7XFa7rudV3zNa37uta8RZe9TZe8Vee9Xef8xqH7fnMHNCP7Lky9V6fer7s+ov99TIvMWpL8ugXO9yNvZNqSH5dRLTJt3yejJqpF5nOR8Vhr/AKoDTNNZXnRpgAAAABJRU5ErkJggg=="),t.imgIcon2=new Image,yield M.a.syncLoad(t.imgIcon2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAe1BMVEUAAAAAACsaGhoXFxcVFRUYGBgYGBgVFRUVFRUUFBsUFBoTExkZGRkSEhgTExcSEhYSEhYUFBcTExYWFhYVFRcUFBcUFBYVGBgVFxcWGBgXFxgWFhgWFhgWFxcWFhgWFhgWFxgWFxgWFhgWFxcWFxgXFxgXGBgWFxgWFxidzeDSAAAAKHRSTlMABgoLDBUgJCUmJykpKkNFRk1cXGNmZ3d4gIiJiqasrd/g4+Tp6+zw/wyQ+wAAAQNJREFUSMel18cSwkAMA1BTQw+m9178/19IAgyk7HptR2e9GV0FwGS1BIgiMGZDtO4j9syaaI9G/9Zm/9VG/9NEh8T3dXpLVMHntNoXtNKXtMo7tMI7tdh7NNFR4r1a5Bkt8KwO+oAO+KBm/Y6oghdprxdqjxdrp1doh1fpklfqjx+adc4bdMab9M+3bjb+nCKOawDdq0U/FohxI13fuVbRFp/Vep/XWl/UOl/WGu/Scu/WUu/TMu/XEs/psOd1yIc078Oa8xLt9zLt81Lt9nLt8neFLvv7XKOLXqvzXq+z3qL/3qYTf0n1bYY4qlveSJT488SqU39qN2KrBhgMAJpNrvECe/QJ7M9mezsAAAAASUVORK5CYII=")},function(){var t=this,i=arguments;return new Promise((function(s,a){var r=e.apply(t,i);function n(e){O(r,s,a,n,o,"next",e)}function o(e){O(r,s,a,n,o,"throw",e)}n(void 0)}))})()}createMapPinIcon(e,t){try{var i=document.createElement("canvas");i.width=62,i.height=57;var s=i.getContext("2d"),a=t?this.imgIcon1:this.imgIcon2;s.drawImage(a,0,0,62,57),s.font="normal normal normal 16px Optima",s.strokeStyle="#FFFFFF";var r=s.measureText(e).width;return s.strokeText(e,(62-r)/2-2,33),i.toDataURL("image/png")}catch(e){return t?'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.4" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#A47B58"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#A47B58"/></svg>':'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.3" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#161718"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#161718"/></svg>'}}onMapPinClick(e){var t=this.enquireDealerContent.querySelector(['[data-dealer-index="'.concat(e.target.metadata.dealerIndex,'"]')]);this.toggleDealer(t,!0),this.selectDealer(t);var i=70+100*e.target.metadata.dealerIndex;setTimeout(()=>{this.dealerList.scrollTop=i},301)}selectDealer(e){if(this.selectedDealerEl&&!this.selectedDealerEl.isEqualNode(e)){var t=this.selectedDealerEl.dealerData.letterIndex;this.selectedDealerEl.dealerMapPin.setOptions({icon:this.createMapPinIcon(t)}),this.selectedDealerEl.classList.remove("selected")}if(!this.selectedDealerEl||!e.isEqualNode(this.selectedDealerEl)){var i=e.dealerData.letterIndex;e.dealerMapPin.setOptions({icon:this.createMapPinIcon(i,!0)}),e.classList.add("selected"),this.selectedDealerEl=e}}getMapDirectionsUrl(e){return"https://www.bing.com/maps?rtp=~pos.".concat(e.lat,"_").concat(e.lon,"_").concat(encodeURIComponent(e.name))}getMapTheme(){return{elements:{area:{fillColor:"#F2F2F2"},point:{fillColor:"#F2F2F2"},political:{fillColor:"#F2F2F2"},structure:{fillColor:"#FFFFFF"},transportation:{fillColor:"#FFF2B0",strokeColor:"#FFF2B0"},vegetation:{fillColor:"#D8EFD5"},water:{fillColor:"#A3BBC4"}},version:"1.0"}}showMap(e,t,i){this.getKeyFromApiScript();var s="".concat("https://dev.virtualearth.net/REST/V1/Imagery/Map/Road/").concat(t,"%2C").concat(i,"/15?mapSize=430,270&format=png&pushpin=").concat(t,",").concat(i,";").concat("37","&key=").concat(P,"&st=").concat("water|fc:c9c9c9;lbc:9e9e9e_transportation|fc:ffffff;sc:ffffff;lbc:9e9e9e;loc:60ffffff_railway|fc:e5e5e5;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_trail|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_road|fc:ffffff;sc:d0d0d0;lbc:9e9e9e;loc:60ffffff_building|fc:d5d5d5_point|v:false_political|bv:false_area|fc:e5e5e5;lbc:616161;loc:e5e5e5_park|fc:c4c4c4_g|landColor:e5e5e5");e.src=s}getKeyFromApiScript(){if(!P){var e=Array.from(document.scripts).filter(e=>e.src.indexOf("https://www.bing.com/api/")>=0&&e);e.length&&(P=e[0].src.split("key=")[1])}}};function V(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}var N=[{featureType:"land",elementType:"geometry",stylers:{visibility:"on",color:"#f2f2f2"}},{featureType:"water",elementType:"geometry",stylers:{visibility:"on",color:"#a3bbc4"}},{featureType:"green",elementType:"geometry",stylers:{visibility:"on",color:"#d8efd5"}},{featureType:"building",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"subwaystation",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"subway",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"education",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"medical",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"scenicspots",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"highway",elementType:"geometry",stylers:{visibility:"on",weight:1}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#fff2b0"}},{featureType:"highway",elementType:"labels",stylers:{visibility:"on"}},{featureType:"highway",elementType:"labels.text.fill",stylers:{color:"#6995dc"}},{featureType:"highway",elementType:"labels.icon",stylers:{visibility:"on"}},{featureType:"arterial",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"local",elementType:"geometry",stylers:{visibility:"off",weight:1}},{featureType:"railway",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"railway",elementType:"geometry.stroke",stylers:{color:"d0d0d0"}},{featureType:"city",elementType:"labels",stylers:{visibility:"on"}},{featureType:"town",elementType:"labels",stylers:{visibility:"on"}},{featureType:"road",elementType:"geometry",stylers:{visibility:"on"}},{featureType:"road",elementType:"geometry.fill",stylers:{color:"#fff2b0"}},{featureType:"road",elementType:"geometry.stroke",stylers:{color:"#d0d0d0"}},{featureType:"districtlabel ",elementType:"labels",stylers:{visibility:"off"}},{featureType:"road",elementType:"labels",stylers:{visibility:"on"}},{featureType:"entertainment",elementType:"geometry",stylers:{visibility:"off"}},{featureType:"shopping",elementType:"geometry",stylers:{visibility:"off"}}];var H=class extends x{clearMap(){this.mapObject&&this.mapObject.clearOverlays()}initAutosuggest(){var e=new window.BMap.Autocomplete({input:"location-input",location:this.mapObject,onSearchComplete:()=>{e.show()},types:["city"]});e.addEventListener("onconfirm",e=>{var{item:{value:t}}=e,i=t.province+t.city+t.district+t.street+t.business;(new window.BMap.Geocoder).getPoint(i,e=>{if(e){var{lng:t,lat:i}=e;this.lat=i,this.lng=t,this.centerMapTo(this.lng,this.lat,this.defaultZoom),this.updateDealers()}},"Beijing")})}loadMap(){if(this.mapObject=new window.BMap.Map("findadealer-map"),this.lat){var e=new window.BMap.Point(this.lng,this.lat);this.mapObject.centerAndZoom(e,this.defaultZoom)}if(this.mapObject.enableScrollWheelZoom(),this.mapObject.setMapStyle(this.getMapTheme()),!this.isMobile){var t=new window.BMap.NavigationControl({type:BMAP_NAVIGATION_CONTROL_ZOOM,anchor:BMAP_ANCHOR_TOP_RIGHT});this.mapObject.addControl(t)}this.updateDealers()}centerMapTo(e,t,i){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=this.mapObject,r=new window.BMap.Point(e,t);s?a.centerAndZoom(r,i):a.setCenter(r)}createMapPin(e){var t=new window.BMap.Point(e.dealerData.lon,e.dealerData.lat),i=this.createMapPinIcon(e.dealerData.letterIndex,0===e.dealerIndex),s=new window.BMap.Icon(i,new window.BMap.Size(64,64),{anchor:new window.BMap.Size(32,32)}),a=new window.BMap.Marker(t,{icon:s});return a.addEventListener("click",t=>{this.centerMapTo(e.dealerData.lon,e.dealerData.lat,this.defaultZoom),this.onMapPinClick.call(this,t)}),a.dealerIndex=e.dealerIndex,a}addMapPins(e){this.mapObject.clearOverlays(),e.forEach(e=>{e.dealerEl.dealerMapPin&&this.mapObject.addOverlay(e.dealerEl.dealerMapPin)})}prepareIconImages(){var e,t=this;return(e=function*(){t.imgIcon1=new Image,yield M.a.syncLoad(t.imgIcon1,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAjVBMVEUAAACfgGCddk6kgFuZd1WfgGCqeVWneFijeFWlfFqheVeifFefelWlelWlfVqle1qieViifVije1mje1eie1ije1ikeVekelalelike1ekelmieVale1ijfFijfFike1ekfFmie1eie1eke1eke1ike1ijfFikelike1ike1ije1ikelike1mkeleke1hVScZ6AAAALnRSTlMACA0ODxAVICQlJikwMDM2NzdZW11mcHN3eHl8fICIiYqzuLi53+Hj5Ons7u/yQfr3mgAAARFJREFUSMel18tWAkEQA9BSREBU0DG+xbeDovn/z3PjwWmmu7qqJuvcfSKi5OZa5ORYglmRDwvgNKzJZwT9ihzg/3TQbzX5AmDh04/kAJ9ot9/RTt/TLp/RDp/VZl/Q5CuAZVibvKINXtVVX9EVX9WqfyIHeJMueqMueLPOeofOeJfueacm3wCchXXiA7rjQ3rrDz9j/OcKuNgTOVpH9Pc90ByIiMzWQ3TEd7Xfp9rrd7XP97XH57Td57XVl7TNl7XFa7rudV3zNa37uta8RZe9TZe8Vee9Xef8xqH7fnMHNCP7Lky9V6fer7s+ov99TIvMWpL8ugXO9yNvZNqSH5dRLTJt3yejJqpF5nOR8Vhr/AKoDTNNZXnRpgAAAABJRU5ErkJggg=="),t.imgIcon2=new Image,yield M.a.syncLoad(t.imgIcon2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA5CAMAAABZGmjOAAAAe1BMVEUAAAAAACsaGhoXFxcVFRUYGBgYGBgVFRUVFRUUFBsUFBoTExkZGRkSEhgTExcSEhYSEhYUFBcTExYWFhYVFRcUFBcUFBYVGBgVFxcWGBgXFxgWFhgWFhgWFxcWFhgWFhgWFxgWFxgWFhgWFxcWFxgXFxgXGBgWFxgWFxidzeDSAAAAKHRSTlMABgoLDBUgJCUmJykpKkNFRk1cXGNmZ3d4gIiJiqasrd/g4+Tp6+zw/wyQ+wAAAQNJREFUSMel18cSwkAMA1BTQw+m9178/19IAgyk7HptR2e9GV0FwGS1BIgiMGZDtO4j9syaaI9G/9Zm/9VG/9NEh8T3dXpLVMHntNoXtNKXtMo7tMI7tdh7NNFR4r1a5Bkt8KwO+oAO+KBm/Y6oghdprxdqjxdrp1doh1fpklfqjx+adc4bdMab9M+3bjb+nCKOawDdq0U/FohxI13fuVbRFp/Vep/XWl/UOl/WGu/Scu/WUu/TMu/XEs/psOd1yIc078Oa8xLt9zLt81Lt9nLt8neFLvv7XKOLXqvzXq+z3qL/3qYTf0n1bYY4qlveSJT488SqU39qN2KrBhgMAJpNrvECe/QJ7M9mezsAAAAASUVORK5CYII=")},function(){var t=this,i=arguments;return new Promise((function(s,a){var r=e.apply(t,i);function n(e){V(r,s,a,n,o,"next",e)}function o(e){V(r,s,a,n,o,"throw",e)}n(void 0)}))})()}createMapPinIcon(e,t){try{var i=document.createElement("canvas");i.width=62,i.height=57;var s=i.getContext("2d"),a=t?this.imgIcon1:this.imgIcon2;s.drawImage(a,0,0,62,57),s.font="normal normal normal 16px Optima",s.strokeStyle="#FFFFFF";var r=s.measureText(e).width;return s.strokeText(e,(62-r)/2-2,33),i.toDataURL("image/png")}catch(e){return t?'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.4" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#A47B58"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#A47B58"/></svg>':'<svg width="62" height="57" viewBox="0 0 62 57" fill="none" xmlns="http://www.w3.org/2000/svg"><rect opacity="0.3" width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 33 0)" fill="#161718"/><rect width="40" height="40" transform="matrix(0.707106 0.707108 -0.707106 0.707108 29 0)" fill="#161718"/></svg>'}}onMapPinClick(e){var t=e.target.dealerIndex,i=this.enquireDealerContent.querySelector(['[data-dealer-index="'.concat(t,'"]')]);this.toggleDealer(i,!0),this.selectDealer(i);var s=70+100*t;setTimeout(()=>{this.dealerList.scrollTop=s},301)}selectDealer(e){if(this.selectedDealerEl&&!this.selectedDealerEl.isEqualNode(e)){var t=this.createMapPinIcon(this.selectedDealerEl.dealerData.letterIndex,!1),i=new window.BMap.Icon(t,new window.BMap.Size(64,64),{anchor:new window.BMap.Size(32,32)});this.selectedDealerEl.dealerMapPin.setIcon(i),this.selectedDealerEl.classList.remove("selected")}if(!this.selectedDealerEl||!e.isEqualNode(this.selectedDealerEl)){var s=this.createMapPinIcon(e.dealerData.letterIndex,!0),a=new window.BMap.Icon(s,new window.BMap.Size(64,64),{anchor:new window.BMap.Size(32,32)});e.dealerMapPin.setIcon(a),e.classList.add("selected"),this.selectedDealerEl=e,this.centerMapTo(e.dealerData.lon,e.dealerData.lat,this.defaultZoom)}}getMapDirectionsUrl(e){var t=e.name.replace(/\W/g,"");return"https://api.map.baidu.com/marker?location=".concat(e.lat,",").concat(e.lon,"&title=").concat(encodeURIComponent(t),"&output=html&src=").concat("webapp.AstonMartin.AMWebsite")}getMapTheme(){return{styleJson:N}}},W=document.getElementById("bing-map-control"),R=document.getElementById("baidu-map-control");var _=new class{init(){this.isInited||(this.isInited=!0,this.enquires=[],this.enquiresV2=[],this.checkMapApi(),this.initEnquiresV2(),this.initFindADealer())}initEnquires(){a()(document.querySelectorAll("[data-enquire]"),e=>{this.enquires.push(new m(e))})}initEnquiresV2(){a()(document.querySelectorAll("[data-enquireV2]"),e=>{"bing"===this.mapApiProviderName?this.enquiresV2.push(new I(e)):"baidu"===this.mapApiProviderName&&this.enquiresV2.push(new B(e))}),this.addOverlayObserver()}initFindADealer(){var e=document.querySelector("[data-findadealer-config]");e&&(this.loadMapApi(),"bing"===this.mapApiProviderName?this.findADealer=new F(e):"baidu"===this.mapApiProviderName&&(this.findADealer=new H(e)))}getEnquireById(e){return this.enquires.filter(t=>t.id===e)[0]}asyncInitCallback(){W&&W.setAttribute("lazyloaded",1),R&&R.setAttribute("lazyloaded",1),this.enquiresV2&&a()(this.enquiresV2,e=>{e.onMapApiReady()}),this.findADealer&&this.findADealer.onMapApiReady()}addOverlayObserver(){var e=new MutationObserver(()=>{e.disconnect(),this.loadMapApi()});[...document.querySelectorAll("[data-enquireV2]")].forEach(t=>{e.observe(t,{attributes:!0,attributeFilter:["data-overlay-active"]})})}checkMapApi(){W&&(this.mapApiProviderName="bing"),R&&(this.mapApiProviderName="baidu")}loadMapApi(){if(W&&(window.BingMapCallback=()=>{window.MapReady=!0,window.AstonMartinEnquireControllerCallback&&window.AstonMartinEnquireControllerCallback.call()},W.src=W.getAttribute("data-src"),this.mapApiProviderName="bing"),R&&(window.BaiduMapCallback=()=>{window.MapReady=!0,window.AstonMartinEnquireControllerCallback&&window.AstonMartinEnquireControllerCallback.call()},R.src=R.getAttribute("data-src"),this.mapApiProviderName="baidu"),document.querySelector("[data-enquire]")){var e=document.getElementById("google-map-control");e.src=e.getAttribute("data-src")}}};window.MapReady?_.asyncInitCallback.bind(_).call():window.AstonMartinEnquireControllerCallback=_.asyncInitCallback.bind(_);var j=_},125:function(e,t,i){"use strict";i.r(t),i.d(t,"homepageController",(function(){return w}));var s=i(6),a=i.n(s),r=i(17),n=i.n(r),o=i(49),l=i.n(o),c=i(9),d=i.n(c),h=i(48),u=i.n(h),m=i(67),p=i(60),g=i(19),v=i(59),y=i(88),f=[37,38,74],b=[32,39,40,75];var w=new class{isEditorMode(){return document.body.classList.contains("pagemode-edit")}init(){this.isEditorMode()?console.warning("Pagemode Edit. Skipping HomepageController."):(this.scrollDisabled=!1,this.activeBlock=0,this.activeBlockBeforeFooter=!1,this.lastKnownScrollPosition=0,this.lastDirection="down",this.animationInProgress=!1,this.players=y.videoController.getAllPlayers(),this.userInteractionLastTime=Date.now(),this.lastScrollEvent=Date.now(),this.scrollByMouse=!1,this.screenWidth=window.innerWidth,this.pagerOnMobileInited=!1,this.throttledMove=n()(this.onMouseMove.bind(this),100),this.debouncedResize=l()(this.onResize.bind(this),250),this.debouncedScroll=l()(this.onScrollEvent.bind(this),250),this.onMouseWheelBind=this.onMouseWheel.bind(this),this.onMouseDownBind=this.onMouseDown.bind(this),this.onKeyDownBind=this.onKeyDown.bind(this),this.onPagerClickBind=this.onPagerClick.bind(this),this.footerHeight=204,this.initDOMElements(),this.initInView(),this.initBindings(),this.initPlayerCallbacks())}destroy(){this.main&&this.main.removeAttribute("style"),this.removeBindings()}initDOMElements(){this.main=document.body.querySelector("main"),this.pager=document.body.querySelector("main [data-pager]"),this.footer=document.body.querySelector("[data-footer]"),this.emissionBlock=this.footer.querySelector("[data-emission-block]"),this.collectionsList=document.body.querySelector("[data-collection-list]"),this.blocks=Array.prototype.slice.call(document.body.querySelectorAll("main [data-homepage-block]")),this.blocks.push(this.footer),null!==this.emissionBlock&&(this.footerHeight=this.footer.offsetHeight,"mouseOnly"===d.a.deviceType&&(this.main.style.marginBottom="".concat(this.footerHeight,"px")))}initBindings(){"mouseOnly"===d.a.deviceType?(this.screenWidth<769&&!1===this.pagerOnMobileInited&&this.initPagerOnMobile(),this.pager&&a()(this.pager.querySelectorAll("li"),e=>{e.addEventListener("click",this.onPagerClickBind,!!d.a.passiveEvents&&{capture:!1,passive:!0})}),window.addEventListener("mousemove",this.throttledMove,!!d.a.passiveEvents&&{capture:!1,passive:!0}),window.addEventListener("wheel",this.onMouseWheelBind,!!d.a.passiveEvents&&{capture:!1,passive:!1}),window.addEventListener("resize",this.debouncedResize,!!d.a.passiveEvents&&{capture:!1,passive:!0}),window.addEventListener("mousedown",this.onMouseDownBind,!!d.a.passiveEvents&&{capture:!1,passive:!1}),window.addEventListener("scroll",this.debouncedScroll,!!d.a.passiveEvents&&{capture:!1,passive:!1}),window.addEventListener("keydown",this.onKeyDownBind,!!d.a.passiveEvents&&{capture:!1,passive:!1})):!1===this.pagerOnMobileInited&&this.initPagerOnMobile()}removeBindings(){this.pager&&a()(this.pager.querySelectorAll("li"),e=>{e.removeEventListener("click",this.onPagerClickBind)}),window.removeEventListener("mousemove",this.throttledMove),window.removeEventListener("wheel",this.onMouseWheelBind),window.removeEventListener("resize",this.debouncedResize),window.removeEventListener("mousedown",this.onMouseDownBind),window.removeEventListener("scroll",this.debouncedScroll),window.removeEventListener("keydown",this.onKeyDownBind)}onPagerClick(e){this.activeBlock=parseInt(e.target.getAttribute("data-target")-1,10),this.scrollToBlock()}onMouseMove(){this.userInteractionLastTime=Date.now()}onMouseWheel(e){Object(p.a)()||(!1===this.scrollDisabled&&this.screenWidth>768&&(e.preventDefault(),e.stopPropagation()),this.screenWidth>768&&this.onScroll(e))}onResize(){this.screenWidth=window.innerWidth,this.footerHeight=this.footer.offsetHeight,this.screenWidth<769&&!1===this.pagerOnMobileInited&&this.initPagerOnMobile(),"mouseOnly"===d.a.deviceType&&(this.main.style.marginBottom="".concat(this.footerHeight,"px")),this.screenWidth>768&&this.scrollToBlock()}onMouseDown(e){window.innerWidth-e.pageX<=g.a.scrollbarWidth&&(this.scrollByMouse=!0)}onScrollEvent(){if(!Object(p.a)()){var e=this.lastKnownScrollPosition>window.scrollY?"up":"down";this.lastKnownScrollPosition=window.scrollY,this.lastDirection=e,!1===this.animationInProgress&&!0===this.scrollByMouse&&this.screenWidth>768&&((this.activeBlockBeforeFooter&&"down"===e||this.activeBlock===this.blocks.length-1)&&this.setActiveBlock(e),this.scrollToBlock(),this.scrollByMouse=!1)}return!0}onKeyDown(e){if(!Object(p.a)()){var t=parseInt(e.keyCode,10),i=!1;-1!==f.indexOf(t)?i="up":-1!==b.indexOf(t)&&(i="down");var s=document.body.classList.contains("left_nav")||document.body.classList.contains("right_nav");i&&!s&&(e.preventDefault(),e.stopPropagation(),!1===this.animationInProgress&&(this.setActiveBlock(i),this.scrollToBlock()))}}initInView(){u.a.threshold(.5),u()("main [data-homepage-block]").on("enter",this.onBlockEnters.bind(this)),u()("main [data-homepage-block]").on("exit",this.onBlockExits.bind(this)),this.blocks.forEach(e=>{u.a.is(e)&&e.getAttribute("data-homepage-block")&&this.onBlockEnters(e)})}initPagerOnMobile(){var e=0;this.collectionsList&&(e=this.collectionsList.offsetTop+window.innerHeight/2),this.pager&&window.addEventListener("scroll",l()(()=>{var t=document.body.scrollTop+window.innerHeight;e<t&&this.collectionsList?this.pager.classList.add("pager--hidden"):this.pager.classList.remove("pager--hidden")},200),!!d.a.passiveEvents&&{capture:!1,passive:!0}),this.pagerOnMobileInited=!0}initPlayerCallbacks(){this.players.forEach(e=>{e.player.setEndCallback(()=>{this.activeBlock<this.blocks.length-2&&Date.now()-this.userInteractionLastTime>5e3&&this.screenWidth>768&&(this.setActiveBlock("down"),this.scrollToBlock())}),e.player.setLoadedCallback(()=>{var t=e.player.video.parentNode.parentNode;t.classList.add("hero--loaded"),t.querySelector(".subtitle").addEventListener("transitionend",()=>{t.classList.add("hero--intro-animation-done")})})})}onBlockEnters(e){this.activeBlock=e&&parseInt(e.getAttribute("data-homepage-block")-1,10),e.querySelector(".hero").classList.add("hero--onscreen"),e.querySelector(".hero").classList.remove("hero--offscreen-up"),e.querySelector(".hero").classList.remove("hero--offscreen-down"),e.querySelector(".hero").classList.remove("hero--offscreen"),this.setPager()}onBlockExits(e){e.querySelector(".hero").classList.remove("hero--onscreen"),e.querySelector(".hero").classList.add("hero--offscreen-".concat(this.lastDirection)),e.querySelector(".hero").classList.add("hero--offscreen")}onScroll(e){var t=Date.now(),i=Math.abs(this.lastScrollEvent-t),s=e.deltaY<0?"up":"down";return this.lastScrollEvent=t,this.userInteractionLastTime=t,!(i<50||this.scrollDisabled)&&(this.setActiveBlock(s),this.scrollToBlock(),!0)}setActiveBlock(e){this.lastDirection=e,"up"===e?this.activeBlock--:this.activeBlock++,this.activeBlock<0&&(this.activeBlock=0),this.activeBlock>this.blocks.length-1&&(this.activeBlock=this.blocks.length-1)}scrollToBlock(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeBlock,t=!1,i=e;!1===this.animationInProgress&&(i===this.blocks.length-1&&(i=this.blocks.length-2,t=!0),this.pager&&(t&&null!==this.emissionBlock?this.pager.classList.add("pager--hidden"):this.pager.classList.remove("pager--hidden")),this.animationInProgress=!0,Object(m.a)(this.blocks[i],{duration:800,easing:v.h,offset:t?this.footerHeight:0,callback:()=>{this.activeBlock=t?i+1:i,this.activeBlockBeforeFooter=i===this.blocks.length-2,this.animationInProgress=!1}}))}getPlayerIndex(e){var t=e.parentNode;return parseInt(Array.prototype.indexOf.call(t.children,e)-1,10)}setPager(){a()(this.pager.querySelectorAll("li"),e=>{e.classList.remove("pager__button--active"),parseInt(e.getAttribute("data-target"),10)===this.activeBlock+1&&e.classList.add("pager__button--active")})}disableScroll(){this.scrollDisabled=!0}enabledScroll(){this.scrollDisabled=!1}setFooterHeight(e){this.footerHeight=e}}},129:function(e,t,i){"use strict";i.r(t),i.d(t,"formController",(function(){return c}));var s=i(6),a=i.n(s),r=i(57),n=i(106),o=i(82);var l=class{constructor(e){this.form=e,this.id=this.form.getAttribute("data-enquire-form"),this.api=this.form.getAttribute("data-form-api"),this.enquireModule="module"===this.id?n.enquireController.getEnquireById("enquire"):null,this.dealerData=[],this.countries=[],this.formData={},this.modelData=[],this.currentModel={},this.currentBodyStyle={},this.currentCountry="",null!==this.form&&(this.initDOMElements(),this.initBindings(),this.initScrollIntoView(),this.loadData())}initDOMElements(){this.formElement=this.form.querySelector("form"),this.formElements=this.form.querySelectorAll(".form-element"),this.formGroups=this.form.querySelectorAll(".form-element-group"),this.inputs=this.form.querySelectorAll("[data-sc-field-name]"),this.submitButton=this.form.querySelector('input[type="submit"]'),this.countrySelect=this.form.querySelector('[data-sc-field-name="Country"]'),this.dealerSelect=this.form.querySelector('[data-sc-field-name="PreferredDealer"]'),this.titleSelect=this.form.querySelector('[data-sc-field-name="Title"]'),this.personTitleSelect=this.form.querySelector('[data-sc-field-name="PersonTitle"]'),this.enquireOverlay=document.body.querySelector('[data-overlay="enquire"]'),this.enquireSimple=document.body.querySelector('[data-enquire-form="simple"]'),this.customCountries=null,this.customTitle=null,this.modelSelect=this.form.querySelector('[data-sc-field-name="CarModel"]'),this.bodyStyleSelect=this.form.querySelector('[data-sc-field-name="BodyStyle"]'),this.vehicleEngineSelect=this.form.querySelector('[data-sc-field-name="VehicleEngine"]'),null!==this.enquireOverlay?(this.enquireOverlayBody=this.enquireOverlay.querySelector('[data-overlay="enquire"] .overlay__body'),this.successLayer=this.enquireOverlay.querySelector("[data-enquire-success]")):null!==this.enquireSimple&&(this.successLayer=this.enquireSimple.parentElement.querySelector("[data-enquire-success]")),"custom"===this.id&&(this.successLayer=this.form.parentElement.querySelector("[data-enquire-success]")),"campaign"===this.id&&(this.dealerSelect=this.form.querySelector('[data-sc-field-name="PreferredDealer"]'),this.countrySelect=this.form.querySelector('[data-sc-field-name="DealerCountry"]'),this.contactCountrySelect=this.form.querySelector('[data-sc-field-name="Country"]'),this.customContactCountries=null,this.successLayer=this.form.nextElementSibling,this.additionalInfo=this.form.querySelector('[name="AdditionalInfo"]'),this.getUrlDataAfterHash()),this.dealerSelect&&(this.customDealer=new o.a(this.dealerSelect),this.customDealer.disableSelect()),this.titleSelect?this.customTitle=new o.a(this.titleSelect):this.personTitleSelect&&(this.customTitle=new o.a(this.personTitleSelect)),this.modelSelect&&(this.customModel=new o.a(this.modelSelect)),this.bodyStyleSelect&&(this.customBodyStyle=new o.a(this.bodyStyleSelect),this.customBodyStyle.disableSelect()),this.vehicleEngineSelect&&(this.customVehicleEngine=new o.a(this.vehicleEngineSelect),this.customVehicleEngine.disableSelect())}initBindings(){if(window.$){var e=window.$(this.formElement).data("validator").settings;e.highlight=function(e,t,i){"radio"===e.type?window.$('[name="'.concat(e.name,'"]')).addClass(t).removeClass(i):window.$(e).addClass(t).removeClass(i);var s=window.$(e).closest("div.form-element-group");s.length&&s.addClass("has-validation-error")},e.unhighlight=function(e,t,i){"radio"===e.type?window.$('[name="'.concat(e.name,'"]')).removeClass(t).addClass(i):window.$(e).removeClass(t).addClass(i);var s=window.$(e).closest("div.form-element-group");s.length&&(s[0].querySelectorAll("input.input-validation-error").length||s.removeClass("has-validation-error"))}}null!==this.countrySelect&&null!==this.dealerSelect&&this.countrySelect.addEventListener("change",e=>{this.loadDealers(e)}),null!==this.modelSelect&&this.customVehicleEngine&&this.modelSelect.addEventListener("change",e=>{this.customVehicleEngine.resetOptions(),this.updateModelBodyStyles(e),this.updateModelEngines()}),null!==this.bodyStyleSelect&&this.bodyStyleSelect.addEventListener("change",e=>{this.updateModelEngines(e)})}initScrollIntoView(){new MutationObserver(()=>{this.form.scrollIntoView()}).observe(this.formElement,{childList:!0})}loadData(){r.a.getDealer().then(e=>{(this.dealerData=e,a()(e,e=>{this.countries.push({countryCode:e.Country,countryName:e.CountryName})}),null!==this.countrySelect)&&(1===this.countrySelect.querySelectorAll("option").length&&this.loadCountries(this.countrySelect),null===this.customCountries&&(this.customCountries=new o.a(this.countrySelect)));this.contactCountrySelect&&(1===this.contactCountrySelect.querySelectorAll("option").length&&this.loadCountries(this.contactCountrySelect),null===this.customContactCountries&&(this.customContactCountries=new o.a(this.contactCountrySelect)))}),this.modelSelect&&r.a.getModels().then(e=>{this.modelData=e,this.modelSelect.querySelectorAll("option").length<=1&&(this.customModel.loadSelectOptions(this.modelData.Models,"SalesforceValue"),"model-page"===document.body.getAttribute("data-page").toLowerCase()&&"module"===this.id&&this.populateModelSelect())},e=>{throw e})}populateModelSelect(){var e=document.querySelector("main").getAttribute("data-model-name");document.querySelector("main").hasAttribute("data-model-name")&&""!==document.querySelector("main").getAttribute("data-model-name")&&(this.customModel.setSelectedByValue(e),this.customModel.hideSelect(),this.customModel.selectWrapper.parentNode.parentNode&&this.customModel.selectWrapper.parentNode.parentNode.classList.contains("form__row")&&this.customModel.selectWrapper.parentNode.parentNode.classList.add("hide")),this.updateModelBodyStyles(e),this.customBodyStyle.mimic.classList.remove("select__mimic--inactive")}updateModelBodyStyles(e){var t=null;"object"==typeof e?t=e&&e.target&&e.target.value:"string"==typeof e&&(t=e),this.customBodyStyle.toggleDisabled(t),this.customBodyStyle.resetDefault(),this.customBodyStyle.resetOptions(),e&&(a()(this.modelData.Models,e=>{e.SalesforceValue===t&&(this.currentModel=e,this.checkBodyAndEngine(e))}),this.customBodyStyle.loadSelectOptions(this.currentModel.BodyStyles,"SalesforceValue"),this.customBodyStyle.setFirstOption(t,this.currentModel.BodyStyles),this.currentModel.BodyStyles&&1===this.currentModel.BodyStyles.length&&this.updateModelEngines(this.currentModel.BodyStyles[0].Name,!0))}checkBodyAndEngine(e,t){var i=!0,s=!0;e.BodyStyles.length>1&&(s=!1),t&&t.VehicleEngines.length>1?i=!1:t||a()(e.BodyStyles,e=>{e.VehicleEngines.length>1&&(i=!1)}),s?this.customBodyStyle.hideSelect():this.customBodyStyle.showSelect(),i?this.customVehicleEngine.hideSelect():this.customVehicleEngine.showSelect(),this.customVehicleEngine.selectWrapper.parentNode&&(i?(this.customVehicleEngine.selectWrapper.parentNode.classList.add("hide"),this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.add("block","block--full-width"),this.customBodyStyle.selectWrapper.parentNode.classList.remove("col","col--6-12")):(this.customVehicleEngine.selectWrapper.parentNode.classList.remove("hide"),this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.remove("block","block--full-width"),this.customBodyStyle.selectWrapper.parentNode.classList.add("col","col--6-12")),s?(this.customBodyStyle.selectWrapper.parentNode.classList.add("hide"),this.customVehicleEngine.selectWrapper.parentNode.parentNode.classList.add("block","block--full-width"),this.customVehicleEngine.selectWrapper.parentNode.classList.remove("col","col--6-12")):(this.customBodyStyle.selectWrapper.parentNode.classList.remove("hide"),this.customVehicleEngine.selectWrapper.parentNode.parentNode.classList.remove("block","block--full-width"),this.customVehicleEngine.selectWrapper.parentNode.classList.add("col","col--6-12"))),this.customBodyStyle.selectWrapper.parentNode.parentNode&&this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.contains("form__row")&&(i&&s?this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.add("hide"):this.customBodyStyle.selectWrapper.parentNode.parentNode.classList.remove("hide"))}updateModelEngines(e,t){var i=e&&!t?e.target.value:null;if(t&&(i=e),e){i&&this.customVehicleEngine.toggleDisabled(i),this.customVehicleEngine.resetDefault(),this.customVehicleEngine.resetOptions();var s=!1;a()(this.currentModel.BodyStyles,e=>{s||e.SalesforceValue!==i||(this.currentBodyStyle=e,this.checkBodyAndEngine(this.currentModel,e),s=!0)}),this.customVehicleEngine.loadSelectOptions(this.currentBodyStyle.VehicleEngines,"SalesforceValue"),this.customVehicleEngine.setFirstOption(i,this.currentBodyStyle.VehicleEngines)}}loadCountries(e){a()(this.countries,t=>{var i=document.createElement("option");i.value=t.countryCode,i.innerHTML=t.countryName,null!==e&&e.appendChild(i)})}loadDealers(e){this.customDealer.toggleDisabled(e.target.value),this.customDealer.resetDefault(),this.customDealer.resetOptions(),a()(this.dealerData,t=>{t.Country===e.target.value&&(this.currentCountry=t)}),this.customDealer.loadSelectOptions(this.currentCountry.Dealerships,"DealerCode"),this.customDealer.setFirstOption(e.target.value,this.currentCountry.Dealerships)}getformData(){var e=document.querySelector("main"),t=e.getAttribute("data-model-name");if(this.formData.Campaign=e.hasAttribute("data-enquire-campaign")?e.getAttribute("data-enquire-campaign"):"",a()(this.inputs,e=>{"checkbox"===e.type?this.formData[e.name]=e.checked:this.formData[e.name]=e.value}),this.formData.EnquireType="Car Sale","module"===this.id){var i=this.enquireModule.getStore();this.formData.DealerCode=i.DealerCode,t&&!this.formData.Model?this.formData.Model=t:this.formData.Model||(this.formData.EnquireType=i.EnquireType)}else"campaign"===this.id?(this.formData.EnquireType="Campaign",this.formData.ReferralUrl=document.URL):"custom"===this.id&&(this.formData.EnquireType="");a()(this.dealerData,e=>{a()(e.Dealerships,t=>{t.DealerCode===this.formData.DealerCode&&(this.formData.Country=e.Country)})}),this.formData.Culture=document.documentElement.lang}getUrlDataAfterHash(){var e=window.location.hash.substr(1,100);this.additionalInfo&&(this.additionalInfo.value=e)}};var c=new class{init(){this.isInited||(this.isInited=!0,this.forms=[],this.overlayEnquire=document.querySelector('[data-enquire-form="overlay"]'),this.initOverlayForm(),this.initForms())}initOverlayForm(){this.overlayEnquire&&null===this.overlayEnquire.getAttribute("data-form-inited")&&(this.overlayForm=new l(this.overlayEnquire),this.overlayEnquire.setAttribute("data-form-inited",!0))}initForms(){a()(document.querySelectorAll("[data-enquire-form]"),e=>{null===e.getAttribute("data-form-inited")&&"overlay"!==e.getAttribute("data-enquire-form")&&(this.forms.push(new l(e)),e.setAttribute("data-form-inited",!0))}),this.forms.push(this.overlayForm)}getFormById(e){return this.forms.filter(t=>t.id===e)[0]}}},19:function(e,t,i){"use strict";var s,a,r,n,o,l,c,d,h,u=i(17),m=i.n(u),p=i(9),g=i.n(p),v=!1;n=window,o=document,l=o.documentElement,c=o.getElementsByTagName("body")[0],d=n.innerWidth||l.clientWidth||c.clientWidth,h=n.innerHeight||l.clientHeight||c.clientHeight,!1===v&&(v=!0,window.addEventListener("resize",m()(()=>{(()=>{var e=window,t=document,i=t.documentElement,a=t.getElementsByTagName("body")[0],r=e.innerWidth||i.clientWidth||a.clientWidth,n=e.innerHeight||i.clientHeight||a.clientHeight;s.window.width=r,s.window.height=n})()},50),!!g.a.passiveEvents&&{capture:!1,passive:!0})),s={connection:navigator.connection?navigator.connection:"unknown",pixelRatio:window.devicePixelRatio,scrollbarWidth:(r=document.createElement("div"),r.classList.add("scrollbar-measure"),document.body.appendChild(r),a=r.offsetWidth-r.clientWidth,document.body.removeChild(r),a),window:{width:d,height:h}},t.a=s},22:function(e,t,i){"use strict";i.r(t),i.d(t,"accessibilityHelper",(function(){return h}));var s=i(6),a=i.n(s),r=i(71),n=i.n(r),o=i(60),l=[13,32],c=[27],d=[9];var h=new class{constructor(){this.rootElement=document.activeElement}subscribe(e,t,i){e.addEventListener("keydown",s=>{"true"===e.getAttribute("data-focus-root")&&(this.rootElement=e);var a=parseInt(s.keyCode,10),r=[];switch(t){case"open":r=l;break;case"close":r=c;break;default:r=l}Object(o.a)()||-1===r.indexOf(a)||(s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation(),i(s))})}restoreRootElementFocus(){this.rootElement&&this.rootElement.focus()}setFocusedElement(e){var t=n.a.query.firstTabbable({context:e,defaultToContext:!0,strategy:"quick"});t&&t.focus()}hide(e){e&&e.hasAttribute("aria-hidden")&&e.setAttribute("aria-hidden","true")}show(e){e&&e.hasAttribute("aria-hidden")&&e.setAttribute("aria-hidden","false")}disableFocus(e){var t=n.a.query.focusable({context:e,includeContext:!0,strategy:"all"});t.length>0&&a()(t,e=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true")})}enableFocus(e){var t=n.a.query.focusable({context:e,includeContext:!0,strategy:"all"});t.length>0&&a()(t,e=>{e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","false")})}removeClickFocus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=n.a.query.focusable({context:e,includeContext:!0,strategy:"all"});a()(t,e=>{e.classList&&(e.addEventListener("mousedown",t=>{e===t.currentTarget?e.classList.add("no-outline"):e.classList.remove("no-outline")}),e.addEventListener("keyup",t=>{-1!==d.indexOf(t.keyCode)&&e.classList.remove("no-outline")}))})}}},295:function(e,t,i){"use strict";i.r(t),i.d(t,"overlayController",(function(){return M}));var s=i(9),a=i.n(s),r=i(6),n=i.n(r),o=i(125),l=i(17),c=i.n(l),d=i(19),h=i(59),u=i(57),m=i(62),p=.84*window.innerWidth,g=.72*window.innerHeight,v=500,y=500,f=500;var b,w=new class{constructor(){this.inited=!1,this.maskObjects=[],this.currentItem=null,this.currentMarkerId=null,this.pageTransitionActive=!1,this.collectionOverlayObj=null,this.pageLoadTid=null,this.previousUrl=null,this.backgroundImageParams={currentSrc:null,nextSrc:null,currentImage:null,nextImage:null,startTime:null,elapsedTime:null,currentAlpha:0},this.maskParams={startHeight:g,startWidth:p,currentWidth:p,currentHeight:g,targetHeight:window.innerHeight,targetWidth:window.innerWidth,startTime:null,elapsedTime:null,zoomTriggered:!1,zoom:.95},this.canvasWidth=0,this.canvasHeight=0,this.backgroundAnimationActive=!1,this.backgroundImageAnimationActive=!1,this.maskAnimationActive=!1,this.zoomAnimationActive=!1,this.pageTarget=null,this.navigationType="normal";try{this.initDOMElements()}catch(e){console.warn(e)}}init(){this.inited||("mouseOnly"===a.a.deviceType&&(this.canvasWrapper&&(v=parseInt(this.canvasWrapper.getAttribute("data-background-transition-duration"),10),y=parseInt(this.canvasWrapper.getAttribute("data-mask-transition-duration"),10),f=parseInt(this.canvasWrapper.getAttribute("data-image-transition-duration"),10)),this.setCanvasProperties(),this.setBufferCanvasProperties(),this.initMaskObjects(),this.preloadImages()),this.collectionOverlayObj=void 0,this.inited=!0)}setCanvasProperties(){this.canvas.width=d.a.window.width,this.canvas.height=d.a.window.height,this.canvasWidth=d.a.window.width,this.canvasHeight=d.a.window.height,this.canvas.style.width="".concat(d.a.window.width,"px"),this.canvas.style.height="".concat(d.a.window.height,"px")}setBufferCanvasProperties(){this.bufferCanvas.width=this.canvas.width,this.bufferCanvas.height=this.canvas.height,this.bufferCanvas.style.width=this.canvas.style.width,this.bufferCanvas.style.height=this.canvas.style.height,this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.canvas.style.transitionDuration="".concat(v,"ms"),this.maskParams.startWidth=.84*window.innerWidth,this.maskParams.startHeight=.72*window.innerHeight,this.maskParams.currentWidth=.84*window.innerWidth,this.maskParams.currentHeight=.72*window.innerHeight}initDOMElements(){this.collectionOverlay=document.body.querySelector('[data-overlay="collection-menu"]'),this.collectionOverlay&&(this.canvasWrapper=this.collectionOverlay.querySelector("[data-canvas-wrapper]"),this.canvas=this.collectionOverlay.querySelector("canvas"),this.ctx=this.canvas.getContext("2d")),this.bufferCanvas=document.createElement("canvas"),this.bufferCtx=this.bufferCanvas.getContext("2d"),this.heroAModuleImg=document.body.querySelector(".hero.hero--a .cover-image"),this.heroAModuleImg&&(this.heroAModuleImg.style.width="calc(100% + ".concat(d.a.scrollbarWidth,"px)"))}initBindings(){window.addEventListener("resize",c()(()=>{this.setCanvasProperties(),this.setBufferCanvasProperties()},100)),n()(this.collectionOverlay.querySelectorAll("li:not([disabled])"),e=>{e.addEventListener("mouseover",e=>{!1===this.pageTransitionActive&&(this.setItem(e.currentTarget),this.setBackgroundColor(),this.setBackgroundImage())},!!a.a.passiveEvents&&{capture:!1,passive:!0}),e.addEventListener("mouseleave",()=>{!1===this.pageTransitionActive&&(this.resetBackgroundColor(),this.resetBackgroundImage())},!!a.a.passiveEvents&&{capture:!1,passive:!0})}),n()(this.collectionOverlay.querySelectorAll("li"),e=>{e.querySelector("a").addEventListener("click",e=>{this.pageTransition(e.currentTarget,e)},!1)}),window.addEventListener("popstate",()=>{null!==this.previousUrl&&""===window.location.hash&&(window.location=this.previousUrl)})}initMaskObjects(){var e,t,i,s,{containerWidth:a}=m.imageHandler.getContainerSize({el:this.canvasWrapper}),r=parseInt(a*d.a.pixelRatio,10);n()(this.collectionOverlay.querySelectorAll("[data-collection-mask-src]"),a=>{e=a.getAttribute("data-collection-mask-src"),t=e.split("&"),[i]=t,s=i,s=null!==i.match(/\?/gi)?"".concat(i,"&width=").concat(r,"&format=").concat("webp","&quality=50"):"".concat(i,"?width=").concat(r,"&format=").concat("webp","&quality=50"),this.maskObjects.push({id:a.getAttribute("data-collection-mask"),src:s,color:a.getAttribute("data-collection-color"),img:new Image,item:a})})}preloadImages(){Promise.all([...this.loadMaskImages()]).then(()=>{this.maskingEnabled=!0,this.initBindings(),this.animate()}).catch(e=>{console.log("%c %s %s %s ","color: yellow; background-color: black;","--",e,"--")})}loadMaskImages(){var e=[];return n()(this.maskObjects,t=>{e.push(new Promise(e=>{var i=new Image;t.src?(i.onload=()=>{t.img=i,t.width=i.width,t.height=i.height,e(i)},i.onerror=()=>{t.item.setAttribute("disabled",!0),console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Could not load image for the model ".concat(t.id&&t.id.toUpperCase(),"!"),"--"),e()},i.src=t.src):(console.log("%c %s %s %s ","color: yellow; background-color: black;","--","No image set for the ".concat(t.id&&t.id.toUpperCase()," model! Please set it in the CMS!"),"--"),t.item.setAttribute("disabled",!0),e())}))}),e}getMaskItemById(e){return this.maskObjects.filter(t=>t.id===e)[0]}setItem(e){this.currentItem=this.getMaskItemById(e.getAttribute("data-collection-mask"))}setBackgroundColor(){this.canvas.style.background=this.currentItem.color}setBackgroundImage(){this.backgroundImageParams.nextImage=this.currentItem.img,this.backgroundImageParams.startTime=Date.now(),this.backgroundImageAnimationActive=!0}setMask(){this.maskParams.startTime=Date.now(),this.maskAnimationActive=!0}setZoom(){this.maskParams.zoomStartTime=Date.now(),this.maskParams.zoom=.95,this.zoomAnimationActive=!0}resetBackgroundColor(){this.canvas.style.background="transparent"}resetBackgroundImage(){this.backgroundImageParams.currentImage=this.backgroundImageParams.nextImage,this.backgroundImageParams.nextImage=null,this.backgroundImageParams.startTime=Date.now(),this.backgroundImageAnimationActive=!0}resetMask(){this.maskParams.startTime=Date.now(),this.maskParams.zoom=.95,this.maskAnimationActive=!1}resetZoom(){this.maskParams.zoomStartTime=Date.now(),this.maskParams.zoom=.95,this.zoomAnimationActive=!1}animate(){(this.backgroundImageAnimationActive||this.maskAnimationActive||this.zoomAnimationActive)&&(this.clearCanvas(),this.maskAnimationActive&&this.animateMask(),this.zoomAnimationActive&&this.animateZoom(),this.animateBackgroundImage(),this.ctx.drawImage(this.bufferCanvas,0,0)),this.requestID=requestAnimationFrame(this.animate.bind(this))}animateMask(){var e=Date.now()-this.maskParams.startTime,t=y,i=window.innerWidth-this.maskParams.startWidth,s=window.innerHeight-this.maskParams.startHeight,a=e>t;this.maskParams.currentWidth=Math.floor(Object(h.g)(e,this.maskParams.startWidth,i,t)),this.maskParams.currentHeight=Math.floor(Object(h.g)(e,this.maskParams.startHeight,s,t)),e>75&&!1===this.maskParams.zoomTriggered&&(this.maskParams.zoomTriggered=!0,this.setZoom()),a&&(this.maskAnimationActive=!1,this.maskParams.zoomTriggered=!1,this.maskParams.currentWidth=window.innerWidth,this.maskParams.currentHeight=window.innerHeight)}animateZoom(){var e=Date.now()-this.maskParams.zoomStartTime,t=e>400;this.maskParams.zoom=Math.ceil(Object(h.h)(e,950,50,400))/1e3,t&&(this.zoomAnimationActive=!1,this.maskParams.zoom=1)}animateBackgroundImage(){var e,t,i=Date.now()-this.backgroundImageParams.startTime,s=f,a=null!==this.backgroundImageParams.currentImage&&null===this.backgroundImageParams.nextImage,r=i>s,n=(this.canvasWidth-this.canvasWidth*this.maskParams.zoom)/2,o=(this.canvasHeight-this.canvasHeight*this.maskParams.zoom)/2,l=this.canvasWidth*this.maskParams.zoom,c=this.canvasHeight*this.maskParams.zoom;this.backgroundImageParams.currentImage===this.backgroundImageParams.nextImage?t=1-(e=this.backgroundImageParams.currentAlpha):(e=0,t=1),a&&(e=1,t=-1);var d=Object(h.h)(i,e,t,s);r&&(this.backgroundImageParams.currentImage=this.backgroundImageParams.nextImage,this.backgroundImageAnimationActive=!1,d=1),this.backgroundImageParams.currentAlpha=d,this.bufferCtx.save(),null===this.backgroundImageParams.currentImage||a||this.backgroundImageParams.currentImage===this.backgroundImageParams.nextImage||this.drawCoverImage(this.bufferCtx,this.backgroundImageParams.currentImage,n,o,l,c),null===this.backgroundImageParams.nextImage||a||(this.bufferCtx.save(),this.bufferCtx.globalAlpha=d,this.drawCoverImage(this.bufferCtx,this.backgroundImageParams.nextImage,n,o,l,c),this.bufferCtx.restore()),a&&null!==this.backgroundImageParams.currentImage&&(this.bufferCtx.save(),this.bufferCtx.globalAlpha=d,this.drawCoverImage(this.bufferCtx,this.backgroundImageParams.currentImage,n,o,l,c),this.bufferCtx.restore());var u=(this.canvasWidth-this.maskParams.currentWidth)/2,m=(this.canvasHeight-this.maskParams.currentHeight)/2;this.bufferCtx.globalCompositeOperation="destination-in",this.bufferCtx.fillStyle="green",this.bufferCtx.fillRect(u,m,this.maskParams.currentWidth,this.maskParams.currentHeight),this.bufferCtx.restore()}drawCoverImage(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.canvasWidth,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.canvasHeight,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.5,l=t.width,c=t.height,d=this.calculateCover(l,c,i,s,a,r,n,o);e.drawImage(t,d.cx,d.cy,d.cw,d.ch,d.x,d.y,d.w,d.h),e.fillStyle="rgba(0, 0, 0, .3)",e.fillRect(0,0,this.canvasWidth,this.canvasHeight)}calculateCover(e,t,i,s,a,r){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.5,l=Math.min(a/e,r/t),c=e*l,d=t*l,h=1,u=1,m=1,p=1,g=1;return c<a&&(g=a/c),Math.abs(g-1)<1e-14&&d<r&&(g=r/d),(h=(e-(m=e/((c*=g)/a)))*n)<0&&(h=0),(u=(t-(p=t/((d*=g)/r)))*o)<0&&(u=0),m>e&&(m=e),p>t&&(p=t),{cx:h,cy:u,cw:m,ch:p,x:i,y:s,w:a,h:r,ar:g,nw:c,nh:d}}clearCanvas(){this.bufferCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}pageNavigation(){window.location.href=this.pageTarget}pageTransition(e,t){this.pageTarget=e&&e.getAttribute("href")||!1,this.navigationType=null!==e.getAttribute("data-xhr")?"xhr":"normal",this.pageTarget&&"xhr"===this.navigationType&&!(window.navigator.userAgent.indexOf("MSIE")>0||window.navigator.userAgent.match(/Trident\/7\./))&&(t.preventDefault(),this.setMask(),this.pageTransitionActive=!0,this.collectionOverlay.classList.add("overlay--pageload"),this.collectionOverlay.classList.add("overlay--pageload-progress"),Promise.all([u.a.getModelPage(this.pageTarget)]).then(e=>{this.collectionOverlay.classList.remove("overlay--pageload-progress"),window.clearTimeout(this.pageLoadTid),this.pageLoadTid=window.setTimeout(()=>{this.renderModelPage(e&&e[0]&&e[0].data)},500)}).catch(e=>{console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Page transition error: ".concat(e),"--")}))}renderModelPage(e){var t,i,s,a,r,n,o,l,c=document.createElement("div"),h=document.body.querySelector("main"),u=document.createElement("a");if(e){u.href=this.pageTarget,c.innerHTML=e,i=c.querySelector("main"),r=c.querySelector("title").innerHTML,a=i&&i.getAttribute("data-page-color")||"#000",n=i&&i.getAttribute("data-model-name")||"",o=i&&i.getAttribute("data-enquire-campaign")||"",l=i&&i.getAttribute("data-datalayer")||null,this.previousUrl=window.location.href;var m="/"!==u.pathname[0]?"/".concat(u.pathname):u.pathname;history.pushState({originalUrl:window.location.href},r,m),document.body.setAttribute("data-page","model-page"),i&&(h.innerHTML=i.innerHTML,h.setAttribute("data-page-color",a),h.setAttribute("data-model-name",n),h.setAttribute("data-enquire-campaign",o),h.style.backgroundColor=a,document.title=r,window.dataLayer&&l&&window.dataLayer.push(JSON.parse(l)),this.heroAModuleImg=h.querySelector(".hero.hero--a .cover-image"),this.heroAModuleImg&&(this.heroAModuleImg.style.width="calc(100% + ".concat(d.a.scrollbarWidth,"px)")),h.querySelector(".hero.hero--a .cover-image img")?(window.scrollTo(0,0),h.style.backgroundColor=a,(t=new Image).onload=()=>{this.pageLoadDone()},t.onerror=()=>{console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Hero A image couldn't be loaded!","--"),this.pageLoadDone()},s=h.querySelector(".hero.hero--a .cover-image img").getAttribute("src"),t.src=s):this.pageLoadDone())}}pageLoadDone(){if("function"==typeof window.csInit)try{window.csInit()}catch(e){console.error(e)}this.collectionOverlay.classList.remove("overlay--pageload"),this.pageTransitionActive=!1,this.maskParams={startHeight:g,startWidth:p,currentWidth:p,currentHeight:g,targetHeight:window.innerHeight,targetWidth:window.innerWidth,startTime:null,elapsedTime:null,zoomTriggered:!1,zoom:.95},this.resetBackgroundImage(),this.resetBackgroundImage(),this.resetMask(),this.resetZoom(),this.clearCanvas()}},S=i(104),A=i(129),q=i(56),L=i(22);var M=new class{constructor(){this.inited=!1,this.activeOverlays=[],this.overlays=[]}init(){this.isInited||(this.isInited=!0,this.overlayDelays=[],this.fixedElements=q.helper.getFixedElements(),this.targetHref="",this.overlayDelay=.3,this.itemDelay=.15,this.transitionDelay=.9,this.footerDelay=.9,this.styleSheets=this.createStyleSheet(),this.initOverlays(),this.initBindings(),this.inited=!0)}initOverlays(){var e,t;n()(document.body.querySelectorAll("[data-overlay]"),i=>{e=i.getAttribute("data-overlay"),t="true"===i.getAttribute("data-overlay-active"),this.overlays.push({id:e,overlay:i}),"collection-menu"!==e&&"main-menu"!==e&&"subnavigation-menu"!==e&&"subnav-dealers-menu-mobile"!==e||this.setGeneralDelays(i,e),t&&this.activeOverlays.push({id:e,overlay:i})})}setGeneralDelays(e,t){var i=e.querySelectorAll("[data-overlay-items-source] li").length,s=parseFloat(2*this.itemDelay+this.overlayDelay+i*this.itemDelay/2).toFixed(3),a=".overlay.overlay--menu-opening[data-overlay='".concat(t,"'] ul::before"),r=this.overlayDelay+i*this.itemDelay+this.itemDelay,n="".concat(a," { transition-delay: ").concat(r,"s; }"),o=".overlay.overlay--menu-closing[data-overlay='".concat(t,"'] ul::after"),l=i*this.itemDelay/2+this.itemDelay,c="".concat(o," { transition-delay: ").concat(l,"s; }");this.overlayDelays.push({id:t,delay:s}),e.style.transitionDelay="".concat(s,"s"),this.styleSheets.insertRule(n,0),this.styleSheets.insertRule(c,0)}setOpeningDelays(e){var t=e.querySelectorAll("[data-overlay-items-source] li"),i=t?t.length:0,s=this.restrictItemNumbers(i,t);n()(e.querySelectorAll("li"),(e,t)=>{var i=this.overlayDelay+(s*this.itemDelay-t*this.itemDelay);e.style.transitionDelay="".concat(i,"s")})}setClosingDelays(e,t){var i=e.querySelectorAll("[data-overlay-items-source] li").length;"main-menu"===t&&(e.querySelector(".overlay__footer").style.transitionDelay="".concat(this.overlayDelay+i*this.itemDelay,"s"));n()(e.querySelectorAll("li"),(e,t)=>{var i=this.itemDelay+t*this.itemDelay/2;e.style.transitionDelay="".concat(i,"s")})}removeItemDelays(e){n()(e.querySelectorAll("li"),e=>{e.removeAttribute("style")})}restrictItemNumbers(e,t){var i=document.querySelector("[data-subnavigation-wrapper]"),s=null;return i&&t.length>0&&(s=Math.floor((window.innerHeight-i.clientHeight)/t[0].clientHeight)),s&&e>s?s:e}initBindings(){var e;n()(document.body.querySelectorAll("[data-overlay]"),e=>{e.addEventListener("transitionend",e=>{e.stopPropagation(),this.onTransitionEnd(e.target),0===this.getOverlays().length&&L.accessibilityHelper.restoreRootElementFocus()})}),n()(document.body.querySelectorAll("[data-overlay] nav ul"),e=>{var t=e.querySelectorAll("li").length,i=q.helper.getParentNode(e,"[data-overlay]")[0];e.addEventListener("transitionend",e=>{e.stopPropagation();var s=[...e.target.parentNode.children].indexOf(e.target),a="true"===i.getAttribute("data-overlay-active");(!1===a&&s===t-1||!0===a&&0===s)&&i&&"transform"===e.propertyName.toLowerCase()&&(a?i.classList.add("overlay--menu-opened"):i.classList.remove("overlay--menu-opened"),i.classList.remove("overlay--menu-opening"),i.classList.remove("overlay--menu-closing"))})}),n()(document.body.querySelectorAll("[data-toggle-overlay]"),t=>{(e=t.getAttribute("data-toggle-overlay").toLowerCase())&&(t.addEventListener("click",this.toggleOverlay.bind(this)),L.accessibilityHelper.subscribe(t,"open",this.toggleOverlay.bind(this)))}),n()(document.body.querySelectorAll("[data-open-overlay]"),t=>{(e=t.getAttribute("data-open-overlay").toLowerCase())&&(t.addEventListener("click",this.openOverlay.bind(this)),L.accessibilityHelper.subscribe(t,"open",this.openOverlay.bind(this)))}),n()(document.body.querySelectorAll("[data-close-overlay]"),t=>{t.addEventListener("click",()=>{this.closeOverlayHandler(t,e)}),L.accessibilityHelper.subscribe(t,"open",()=>{this.closeOverlayHandler(t,e)})}),n()(document.body.querySelectorAll("[data-disable-events]"),e=>{e.addEventListener("click",e=>{e.stopPropagation()})}),n()(document.body.querySelectorAll('[data-overlay="subnavigation-menu"] a'),e=>{e.addEventListener("click",e=>{this.freezeViewport(e),this.closeOverlay("subnavigation-menu"),this.targetHref=e.currentTarget.getAttribute("href")})}),n()(document.body.querySelectorAll('[data-overlay="subnav-dealers-menu-mobile"] a'),e=>{e.addEventListener("click",e=>{this.freezeViewport(e),this.closeOverlay("subnav-dealers-menu-mobile"),this.targetHref=e.currentTarget.getAttribute("href")})}),"mouseOnly"===a.a.deviceType&&window.addEventListener("keyup",e=>{27===parseInt(e.keyCode,10)&&this.activeOverlays.length>0&&this.closeOverlay(this.activeOverlays[this.activeOverlays.length-1].id)})}closeOverlayHandler(e,t){var i=e.getAttribute("data-close-overlay").split("|");n()(i,e=>{""===(t=e)&&(t=this.activeOverlays[this.activeOverlays.length-1].id);var i=this.overlays.map(e=>e.id);i&&i.some(e=>e===t)&&this.closeOverlay(t)})}onTransitionEnd(e){var t;null!==e.getAttribute("data-overlay")&&(t=e.getAttribute("data-overlay"),e.classList.contains("overlay--closing")&&(e.setAttribute("data-overlay-visible",!1),e.setAttribute("aria-hidden","true"),e.classList.remove("overlay--menu-opening"),e.classList.remove("overlay--menu-opened"),e.classList.remove("overlay--menu-closing"),"collection-menu"!==t&&"main-menu"!==t||(this.removeItemDelays(e),"main-menu"===t&&e.querySelector(".overlay__footer").removeAttribute("style"))),e.classList.remove("overlay--opening"),e.classList.remove("overlay--closing"),e.classList.remove("overlay--no-transition"),"false"===e.getAttribute("data-overlay-active")&&0===this.activeOverlays.length&&("mouseOnly"!==a.a.deviceType&&"hybrid"!==a.a.deviceType||(q.helper.setScrollbarCorrection(!1),document.body.classList.remove("overlay-active"))),"subnavigation-menu"===t&&(location.hash=this.targetHref),"subnav-dealers-menu-mobile"===t&&(location.hash=this.targetHref))}openOverlay(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;t=e&&!1===s?e.currentTarget.getAttribute(i?"data-toggle-overlay":"data-open-overlay").toLowerCase()||!1:!1!==s?s.getAttribute(i?"data-toggle-overlay":"data-open-overlay").toLowerCase():r;var l,c=this.getOverlayById(t);if(c){if(c.querySelector(".overlay__outer-wrapper").scrollTop=0,c.setAttribute("data-overlay-visible",!0),c.setAttribute("aria-hidden","false"),"search"===r&&c.setAttribute("data-overlay-quicksearch",!0),"enquire"===t)A.formController.getFormById("overlay").showOverlayForm();"subnavigation-menu"===t&&(S.subNavigation.disableLogo(),S.subNavigation.showHeaderItems(!0)),"collection-menu"!==t||w.inited||w.init(),b&&(l=b,window.cancelAnimationFrame?window.cancelAnimationFrame(l.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(l.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(l.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(l.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(l.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(l.value):clearTimeout(l)),b=((e,t)=>{if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var i=(new Date).getTime(),s={};return s.value=window.requestAnimationFrame((function a(){(new Date).getTime()-i>=t?e.call():s.value=window.requestAnimationFrame(a)})),s})(()=>{"collection-menu"!==t&&"main-menu"!==t&&"subnavigation-menu"!==t&&"subnav-dealers-menu-mobile"!==t||this.setOpeningDelays(c),"search"!==t&&"enquire"!==t&&"account"!==t||this.getOverlayById("main-menu").setAttribute("data-overlay-active",!1),c.setAttribute("data-overlay-active",!0),c.classList.add("overlay--opening"),c.classList.add("overlay--menu-opening"),c.classList.remove("overlay--closing"),null!==c.getAttribute("data-overlay-hide-header")&&document.body.querySelector("header.header").classList.add("header--hide"),n()(document.body.querySelectorAll('[data-toggle-overlay="'.concat(t,'"]')),e=>{e.setAttribute("data-toggle-state","visible")}),this.activeOverlays.push({id:t,overlay:c}),o.homepageController.disableScroll(),"mouseOnly"===a.a.deviceType||"hybrid"===a.a.deviceType?(document.body.classList.add("overlay-active"),q.helper.setScrollbarCorrection(!0)):this.stopBodyScrolling(!0)},16)}}closeOverlay(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getOverlayById(e);i&&"true"===i.getAttribute("data-overlay-active")&&("collection-menu"!==e&&"main-menu"!==e&&"subnavigation-menu"!==e&&"subnav-dealers-menu-mobile"!==e||this.setClosingDelays(i,e),"search"!==e&&"enquire"!==e&&"account"!==e||this.getOverlayById("main-menu").setAttribute("data-overlay-active",!0),i.setAttribute("data-overlay-active",!1),i.setAttribute("data-overlay-quicksearch",!1),t&&i.classList.add("overlay--no-transition"),i.classList.add("overlay--closing"),i.classList.add("overlay--menu-closing"),i.classList.remove("overlay--menu-opened"),i.classList.remove("overlay--opening"),null!==i.getAttribute("data-overlay-hide-header")&&document.body.querySelector("header.header").classList.remove("header--hide"),n()(document.body.querySelectorAll('[data-toggle-overlay="'.concat(e,'"]')),e=>{e.setAttribute("data-toggle-state","hidden")}),this.activeOverlays=this.activeOverlays.filter(t=>t.id!==e),0===this.activeOverlays.length&&(o.homepageController.enabledScroll(),this.stopBodyScrolling(!1)),t&&this.onTransitionEnd(i))}toggleOverlay(e){var t=e.currentTarget,i=t.getAttribute("data-toggle-overlay").toLowerCase(),s=null!==t.getAttribute("data-toggle-overlay-only-mobile"),a=t.getAttribute("data-toggle-state").toLowerCase(),r=!!t.getAttribute("data-close-overlay")&&t.getAttribute("data-close-overlay").split("|"),n=0;return!(s&&window.innerWidth>768)&&(r&&this.activeOverlays.length>0&&r.indexOf(this.activeOverlays[this.activeOverlays.length-1].id)>=0&&(n=parseFloat(1e3*(this.overlayDelay+parseFloat(this.getDelayById(i))))),e.stopPropagation(),window.setTimeout(()=>{"visible"===a?(t.setAttribute("data-toggle-state","hidden"),this.closeOverlay(i)):(t.setAttribute("data-toggle-state","visible"),this.openOverlay(e,!0,t))},n),!0)}closeAllOverlay(){n()(document.body.querySelectorAll("[data-overlay]"),e=>{this.closeOverlay(e.getAttribute("data-overlay").toLowerCase())})}getOverlayById(e){var t=this.overlays.filter(t=>t.id===e)[0];return t&&t.overlay||null}getDelayById(e){var t=this.overlayDelays.filter(t=>t.id===e)[0];return t&&t.delay||0}stopBodyScrolling(e){if(!0===e)document.body.querySelector("main").addEventListener("touchmove",this.freezeViewport,!!a.a.passiveEvents&&{capture:!1,passive:!0}),document.body.setAttribute("memScrollY",window.scrollY),document.body.classList.add("noscroll");else{document.body.querySelector("main").removeEventListener("touchmove",this.freezeViewport),document.body.classList.remove("noscroll");var t=document.body.getAttribute("memScrollY");t&&window.scrollTo(0,t)}}freezeViewport(e){e.preventDefault()}setOverlayColor(e){var t=document.querySelector("main").getAttribute("data-page-color"),i=this.getOverlayById(e);i&&i.setAttribute("data-overlay-color",t)}getOverlays(){return this.activeOverlays}createStyleSheet(){var e=document.createElement("style");return e.id="overlay-styles",e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}}},48:function(e,t,i){
/*!
 * in-view 0.6.1 - Get notified when a DOM element enters or exits the viewport.
 * Copyright (c) 2017 Cam Wiegert <cam@camwiegert.com> - https://camwiegert.github.io/in-view
 * License: MIT
 */
e.exports=function(e){function t(s){if(i[s])return i[s].exports;var a=i[s]={exports:{},id:s,loaded:!1};return e[s].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var s=function(e){return e&&e.__esModule?e:{default:e}}(i(2));e.exports=s.default},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(i(9)),r=s(i(3)),n=i(4);t.default=function(){if("undefined"!=typeof window){var e={history:[]},t={offset:{},threshold:0,test:n.inViewport},i=(0,a.default)((function(){e.history.forEach((function(t){e[t].check()}))}),100);["scroll","resize","load"].forEach((function(e){return addEventListener(e,i)})),window.MutationObserver&&addEventListener("DOMContentLoaded",(function(){new MutationObserver(i).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}));var s=function(i){if("string"==typeof i){var s=[].slice.call(document.querySelectorAll(i));return e.history.indexOf(i)>-1?e[i].elements=s:(e[i]=(0,r.default)(s,t),e.history.push(i)),e[i]}};return s.offset=function(e){if(void 0===e)return t.offset;var i=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(i(e)?function(i){return t.offset[i]=e}:function(s){return i(e[s])?t.offset[s]=e[s]:null}),t.offset},s.threshold=function(e){return"number"==typeof e&&e>=0&&e<=1?t.threshold=e:t.threshold},s.test=function(e){return"function"==typeof e?t.test=e:t.test},s.is=function(e){return t.test(e,t)},s.offset(0),s}}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),s=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=i,this.elements=t,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return i(e,[{key:"check",value:function(){var e=this;return this.elements.forEach((function(t){var i=e.options.test(t,e.options),s=e.current.indexOf(t),a=s>-1,r=!i&&a;i&&!a&&(e.current.push(t),e.emit("enter",t)),r&&(e.current.splice(s,1),e.emit("exit",t))})),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"off",value:function(e){for(var t=this.handlers[e].length;t>0;t--)this.handlers[e].pop();return this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var i=this.handlers[e].length;--i>-1;)this.handlers[e][i](t);return this}}]),e}();t.default=function(e,t){return new s(e,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=function(e,t){var i=e.getBoundingClientRect(),s=i.top,a=i.right,r=i.bottom,n=i.left,o=i.width,l=i.height,c=r,d=window.innerWidth-n,h=window.innerHeight-s,u=a,m=t.threshold*o,p=t.threshold*l;return c>t.offset.top+p&&d>t.offset.right+m&&h>t.offset.bottom+p&&u>t.offset.left+m}},function(e,t){(function(t){var i="object"==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(t,function(){return this}())},function(e,t,i){var s=i(5),a="object"==typeof self&&self&&self.Object===Object&&self,r=s||a||Function("return this")();e.exports=r},function(e,t,i){var s=i(1),a=i(8),r=i(10),n="Expected a function",o=Math.max,l=Math.min;e.exports=function(e,t,i){function c(t){var i=g,s=v;return g=v=void 0,S=t,f=e.apply(s,i)}function d(e){return S=e,b=setTimeout(u,t),A?c(e):f}function h(e){var i=e-w;return void 0===w||i>=t||i<0||q&&e-S>=y}function u(){var e=a();return h(e)?m(e):void(b=setTimeout(u,function(e){var i=t-(e-w);return q?l(i,y-(e-S)):i}(e)))}function m(e){return b=void 0,L&&g?c(e):(g=v=void 0,f)}function p(){var e=a(),i=h(e);if(g=arguments,v=this,w=e,i){if(void 0===b)return d(w);if(q)return b=setTimeout(u,t),c(w)}return void 0===b&&(b=setTimeout(u,t)),f}var g,v,y,f,b,w,S=0,A=!1,q=!1,L=!0;if("function"!=typeof e)throw new TypeError(n);return t=r(t)||0,s(i)&&(A=!!i.leading,y=(q="maxWait"in i)?o(r(i.maxWait)||0,t):y,L="trailing"in i?!!i.trailing:L),p.cancel=function(){void 0!==b&&clearTimeout(b),S=0,g=w=v=b=void 0},p.flush=function(){return void 0===b?f:m(a())},p}},function(e,t,i){var s=i(6);e.exports=function(){return s.Date.now()}},function(e,t,i){var s=i(7),a=i(1),r="Expected a function";e.exports=function(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return a(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),s(e,t,{leading:n,maxWait:t,trailing:o})}},function(e,t){e.exports=function(e){return e}}])},50:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(s.hover=window.matchMedia("(hover: hover)").matches,s.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,s.anyHover=window.matchMedia("(any-hover: hover)").matches,s.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};s.update(),t.default=s},51:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(s.fine=window.matchMedia("(pointer: fine)").matches,s.coarse=window.matchMedia("(pointer: coarse)").matches,s.none=window.matchMedia("(pointer: none)").matches,s.anyFine=window.matchMedia("(any-pointer: fine)").matches,s.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,s.anyNone=window.matchMedia("(any-pointer: none)").matches)}};s.update(),t.default=s},52:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={update:function(){"undefined"!=typeof window&&(s.hasSupport="ontouchstart"in window,s.browserSupportsApi=Boolean(window.TouchEvent))}};s.update(),t.default=s},53:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),i=function(){};window.addEventListener("testPassiveEventSupport",i,t),window.removeEventListener("testPassiveEventSupport",i,t),s.hasSupport=e}}};s.update(),t.default=s},55:function(e,t,i){"use strict";i.r(t),i.d(t,"objectFit",(function(){return r}));var s=i(6),a=i.n(s);var r=new class{init(){var e=this;this.media=document.body.querySelectorAll("[data-object-fit]");for(var t=function(t){var i=e.media[t].nodeName.toLowerCase();"img"===i?(e.media[t].addEventListener("load",()=>{e.objectFit(e.media[t])}),e.media[t].complete?e.objectFit(e.media[t]):!0!==e.media[t].set&&(e.media[t].src=e.media[t].src,e.media[t].set=!0)):"video"===i&&(e.media[t].readyState>0?e.objectFit(e.media[t]):e.media[t].addEventListener("loadedmetadata",()=>{e.objectFit(e.media[t])}))},i=0;i<this.media.length;i++)t(i)}update(){if(this.media)for(var e=0;e<this.media.length;e++)this.objectFit(this.media[e])}checkParentContainer(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue("position"),s=t.getPropertyValue("overflow"),a=t.getPropertyValue("display");i&&"static"!==i||(e.style.position="relative"),"hidden"!==s&&(e.style.overflow="hidden"),a&&"inline"!==a||(e.style.display="block"),0===e.clientHeight&&(e.style.height="100%"),-1===e.className.indexOf("object-fit-polyfill")&&(e.className="".concat(e.className," object-fit-polyfill"))}checkMediaProperties(e){var t=window.getComputedStyle(e,null),i={"max-width":"none","max-height":"none","min-width":"0px","min-height":"0px",top:"auto",right:"auto",bottom:"auto",left:"auto","margin-top":"0px","margin-right":"0px","margin-bottom":"0px","margin-left":"0px"};a()(i,s=>{t.getPropertyValue(s)!==i[s]&&(e.style[s]=i[s])})}setPosition(e,t,i){var s,a,r,n;if((i=i.split(" ")).length<2&&(i[1]=i[0]),"x"===e)s=i[0],a=i[1],r="left",n="right",t.clientWidth;else{if("y"!==e)return;s=i[1],a=i[0],r="top",n="bottom",t.clientHeight}s!==r&&a!==r?s!==n&&a!==n?("center"===s&&(s="50%"),s.indexOf("%")>=0?(s=parseInt(s,10),t.style[r]="".concat(s,"%"),t.style.transition="all 0s",t.style.transform="translate".concat(e.toUpperCase(),"(-").concat(s,"%)")):t.style[r]=s):t.style[n]="0":t.style[r]="0"}objectFit(e){var t=e.dataset?e.dataset.objectFit:e.getAttribute("data-object-fit"),i=e.dataset?e.dataset.objectPosition:e.getAttribute("data-object-position");t=t||"cover",i=i||"50% 50%",e.style.width="auto",e.style.height="auto";var s=e.parentNode,a=s.clientWidth/s.clientHeight,r=e.clientWidth/e.clientHeight;this.checkParentContainer(s),this.checkMediaProperties(e),e.style.position="absolute",e.style.height="100%",e.style.width="auto","scale-down"===t&&(e.style.height="auto",e.clientWidth<s.clientWidth&&e.clientHeight<s.clientHeight?(this.setPosition("x",e,i),this.setPosition("y",e,i)):(t="contain",e.style.height="100%")),"none"===t?(e.style.width="auto",e.style.height="auto",this.setPosition("x",e,i),this.setPosition("y",e,i)):"cover"===t&&r>a||"contain"===t&&r<a?(e.style.top="0",e.style.marginTop="0",this.setPosition("x",e,i)):"scale-down"!==t&&(e.style.width="100%",e.style.height="auto",e.style.left="0",e.style.marginLeft="0",this.setPosition("y",e,i))}}},56:function(e,t,i){"use strict";i.r(t),i.d(t,"helper",(function(){return v}));var s=i(9),a=i.n(s),r=i(17),n=i.n(r),o=i(6),l=i.n(o),c=i(48),d=i.n(c),h=i(19),u=i(55);var m,p=new class{init(){!0===a.a.passiveEvents?document.body.addEventListener("keyup",this.toggleDebug,{capture:!1,passive:!0}):document.body.addEventListener("keyup",this.toggleDebug,!1)}toggleDebug(e){71===e.which&&document.body.classList.toggle("debug")}},g=/localhost/gi;var v=new class{constructor(){this.inited=!1}init(){this.fixedElements=[];var e=window.navigator.userAgent.match(/Edge\/(\d{2})\./),t=!!e&&parseInt(e[1],10)>=16;"objectFit"in document.documentElement.style!=!1&&!t||(u.objectFit.init(),this.inited||window.addEventListener("resize",n()(()=>{u.objectFit.update()},100))),this.onScrollBind=this.onScroll.bind(this),"mouseOnly"===a.a.deviceType&&this.initScrollPerformance(),this.collectFixedElements(),"mouseOnly"!==a.a.deviceType&&(document.documentElement.classList.remove("no-touch"),document.documentElement.classList.add("touch")),window.location&&window.location.host&&null!==window.location.host.match(g)&&!1===this.inited&&p.init(),this.inited=!0}destroy(){this.fixedElements.forEach(e=>{e&&e.elem&&e.elem.removeAttribute("style")}),this.fixedElements=[],window.removeEventListener("scroll",this.onScrollBind),d()("[data-animate]").off("enter")}initScrollPerformance(){window.addEventListener("scroll",this.onScrollBind,!!a.a.passiveEvents&&{capture:!1,passive:!0})}onScroll(){window.clearTimeout(m),!1===document.body.querySelector("main").classList.contains("no-hover")&&this.disableHover(),m=setTimeout(()=>{this.enableHover()},500)}disableHover(){document.body.querySelector("main").classList.add("no-hover")}enableHover(){document.body.querySelector("main").classList.remove("no-hover")}getParentNode(e,t){for(var i=[],s=void 0!==t,a=e;null!==(a=a.parentElement);)a.nodeType===Node.ELEMENT_NODE&&(s&&!this.selectorMatches(a,t)||i.push(a));return i}selectorMatches(e,t){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||(e=>-1!==[].indexOf.call(document.querySelectorAll(e),this))).call(e,t)}collectFixedElements(){var e,t,i,s,a;l()(document.body.querySelectorAll("*"),r=>{e=window.getComputedStyle(r),t="fixed"===e.getPropertyValue("position").toString(),i=null===r.getAttribute("data-disable-scrollfix"),s=null!==r.getAttribute("data-force-scrollfix"),a=r.hasAttribute("data-hibrid-scrollfix"),(t&&i||!0===s)&&this.fixedElements.push({elem:r,initialPaddingRight:parseInt(e.getPropertyValue("padding-right"),10),initialRight:parseInt(e.getPropertyValue("right"),10),isHibrid:a})})}getFixedElements(){return this.fixedElements}setScrollbarCorrection(e){var t=e?h.a.scrollbarWidth:0;this.setBodyPadding(e,t),this.fixedElements&&this.fixedElements.forEach(e=>{e.isHibrid&&"fixed"!==window.getComputedStyle(e.elem).getPropertyValue("position").toString()||(0===e.initialRight?e.elem.style.right="".concat(e.initialRight+t,"px"):e.elem.style.paddingRight="".concat(e.initialPaddingRight+t,"px"))})}setBodyPadding(e,t){document.body.style.paddingRight=e?"".concat(t,"px"):"0px"}setActualPagerButton(e,t){var i=e.querySelector('[data-target="'.concat(t+1,'"]'));if(i){var s=e.querySelectorAll("[data-pager-button]");l()(s,e=>{e.classList.remove("pager__button--active")}),i.classList.add("pager__button--active")}}getPageColor(){return window.getComputedStyle(document.body.querySelector("main[data-page-color]")||document.body).backgroundColor}lightenDarkenColor(e,t){var i=!1;"#"===e[0]&&(e=e.slice(1),i=!0);var s=parseInt(e,16),a=(s>>16)+t;a>255?a=255:a<0&&(a=0);var r=(s>>8&255)+t;r>255?r=255:r<0&&(r=0);var n=(255&s)+t;return n>255?n=255:n<0&&(n=0),(i?"#":"")+(n|r<<8|a<<16).toString(16)}isLightColor(e){"#"===e[0]&&(e=e.slice(1));var t=parseInt(e,16);return t>>16>200&&(t>>8&255)>200&&(255&t)>200}colorToHex(e){if("#"===e.substr(0,1)||"transparent"===e)return e;var t=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(e);t||(t=/(.*?)rgba\((\d+), (\d+), (\d+), (\d+)\)/.exec(e));var i=parseInt(t[2],10),s=parseInt(t[3],10),a=parseInt(t[4],10)|s<<8|i<<16;return"".concat(t[1],"#").concat(a.toString(16))}}},57:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(64),a=i(63),r=document.body.getAttribute("data-lang")?document.body.getAttribute("data-lang"):"en-US",n=["en-us","en-gb","gb","us","lr"];var o=new class{constructor(){this.baseUrl=""}getModelPage(e){return s.a.request("".concat(this.baseUrl).concat(e,"?xhr=1"),"get",{},!1,!1).then(e=>e).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}specs(e){return s.a.request("".concat(this.baseUrl,"/Sitefinity/Public/Services/Car/CarService.svc/").concat(r,"/Car/").concat(e)).then(e=>((e||{}).data,e.data)).catch(e=>{console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Specs service error: ".concat(e),"--")})}getModels(){return s.a.request("".concat(this.baseUrl,"/api/v1/cars?scope={1FA6BDF3-332D-4D65-8D12-175CDB51DF75}")).then(e=>((e||{}).data,e.data)).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}enquireForm(e){var t={};return s.a.request("".concat(this.baseUrl,"/api/enquire/add"),"post",e).then(e=>{if((e||{}).data,400===e.status&&e.data.ModelState){var i=e.data.ModelState;Object.keys(i).forEach(e=>t[e.split(".")[1]]=i[e])}else t=e.data;return t}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}enquireFormV2(e){var t={};return s.a.request("".concat(this.baseUrl,"/api/v2/enquire/add"),"post",e).then(e=>{if((e||{}).data,400===e.status&&e.data.ModelState){var i=e.data.ModelState;Object.keys(i).forEach(e=>t[e.split(".")[1]]=i[e])}else t=e.data;return t}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}enquireCampaignForm(e){var t={};return s.a.request("".concat(this.baseUrl,"/api/campaignenquire/add"),"post",e).then(e=>{if((e||{}).data,400===e.status&&e.data.ModelState){var i=e.data.ModelState;Object.keys(i).forEach(e=>t[e.split(".")[1]]=i[e])}else t=e.data;return t}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}customEnquireForm(e,t){var i=t||"/api/enquire/add",r={};return s.a.request("".concat(i),"post",e).then(e=>{if((e||{}).data,400===e.status&&e.data.ModelState){var t=e.data.ModelState;Object.keys(t).forEach(e=>r[e.split(".")[1]]=t[e])}else r=e.data;return r}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}addToCart(e){return s.a.request("".concat("/api/basket/addtocart/"),"post",e).then(e=>e).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}getCart(){return s.a.request("".concat("/api/basket/getcart")).then(e=>e).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}getDealer(){return s.a.request("".concat(this.baseUrl,"/api/v1/dealers/bycountry?cultureName=").concat(r)).then(e=>((e||{}).data,e.data)).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}search(e,t){var i={};return s.a.request("".concat(this.baseUrl,"/Sitefinity/Public/Services/CustomSearch/CustomSearch.svc/").concat(t,"/").concat(r,"/SearchResults/?term=").concat(e,"&takeInGroup=3")).then(e=>((e||{}).data&&(i=e.data),(i||{}).Categories&&0===i.Categories.length&&(i={Categories:[{Name:"No result found",Results:[],TotalCount:0}]}),i)).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}getCarCarouselData(e){var t={};return s.a.request("".concat(this.baseUrl,"/Sitefinity/Public/Services/Car/CarService.svc/").concat(r,"/CarPresets/").concat(e)).then(e=>((e||{}).data&&(t=e.data),t)).catch(e=>{console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Car service error: ".concat(e),"--")})}findDealers(e,t){var i={};return s.a.request("".concat(this.baseUrl,"/api/enquire/findDealers?latitude=").concat(e,"&longitude=").concat(t,"&cultureName=").concat(r,"&take=150")).then(e=>{if((e||{}).data){var t=e.data,s="DistanceMetres";~n.indexOf(r.toLowerCase())&&(s="DistanceMiles"),i=t.map(e=>({distance:(e||{})[s].toFixed(1)||"-",name:(e||{}).Name||"-",address:"".concat(((e||{}).Address||{}).Street,", ").concat(((e||{}).Address||{}).City,", ").concat(((e||{}).Address||{}).Zip)||"-",lat:((e||{}).Address||{}).Latitude||"-",lon:((e||{}).Address||{}).Longitude||"-",phone:(e||{}).PhoneNumber||"-",website:(e||{}).WebsiteURL||"-",dealer:(e||{}).DealerCode}))}return i}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}findDealers2(e,t){var i={};return s.a.request("".concat(this.baseUrl,"/api/v1/dealers?latitude=").concat(e,"&longitude=").concat(t,"&cultureName=").concat(r,"&take=26")).then(e=>{if((e||{}).data){var t=e.data;i=t.map(e=>this.transformDealerData(e))}return i}).catch(e=>{(e||{}).message&&a.generalError.showError(e.message)})}transformDealerData(e){var t=(e||{}).OpeningHours||[];return t.length&&t.push(t.shift()),{DistanceMetres:((e||{}).DistanceMetres||0).toFixed(1)||"",DistanceMiles:((e||{}).DistanceMiles||0).toFixed(1)||"",name:(e||{}).Name||"",address:"".concat(((e||{}).Address||{}).Street||"",", ").concat(((e||{}).Address||{}).City||"",", ").concat(((e||{}).Address||{}).Zip||"")||"",lat:((e||{}).Address||{}).Latitude||"",lon:((e||{}).Address||{}).Longitude||"",phone:(e||{}).PhoneNumber||"",website:(e||{}).WebsiteUrl||null,dealerPageUrl:(e||{}).DealerPageUrl||null,dealer:(e||{}).DealerCode,typeName:((e||{}).DealerType||{}).Name,OpeningHours:t,campaignId:((e||{}).CampaignId||{}).CampaignId,countryCode:((e||{}).Address||{}).CountryCode}}transformDealerDataFromConfig(e){var t=(e||{}).openingHours||[];return t.length&&t.push(t.shift()),{DistanceMetres:((e||{}).distanceMetres||0).toFixed(1)||"",DistanceMiles:((e||{}).distanceMiles||0).toFixed(1)||"",name:(e||{}).name||"",address:"".concat(((e||{}).address||{}).street||"",", ").concat(((e||{}).address||{}).city||"",", ").concat(((e||{}).address||{}).zip||"")||"",lat:((e||{}).address||{}).latitude||"",lon:((e||{}).address||{}).longitude||"",phone:(e||{}).phoneNumber||"",website:(e||{}).websiteUrl||null,dealerPageUrl:(e||{}).dealerPageUrl||null,dealer:(e||{}).dealerCode,typeName:((e||{}).dealerType||{}).Name,OpeningHours:t,campaignId:(e||{}).campaignId,countryCode:((e||{}).address||{}).countryCode}}}},58:function(e,t,i){"use strict";t.a=e=>{for(var t=0,i=e;i;)t+=i.offsetTop,i=i.offsetParent;return t}},59:function(e,t,i){"use strict";function s(e,t,i,s){return i*Math.sin(e/s*(2*Math.PI)-Math.PI/2)+i+t}function a(e,t,i,s){return i*((e=e/s-1)*e*e+1)+t}function r(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}function n(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t}function o(e,t,i,s){return i*Math.sin(e/s*(Math.PI/2))+t}function l(e,t,i,s){return e==s?t+i:i*(1-Math.pow(2,-10*e/s))+t}function c(e,t,i,s){return 0==e?t:e==s?t+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t}i.d(t,"a",(function(){return s})),i.d(t,"f",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"e",(function(){return n})),i.d(t,"h",(function(){return o})),i.d(t,"g",(function(){return l})),i.d(t,"d",(function(){return c}))},60:function(e,t,i){"use strict";t.a=()=>null!==document.querySelector(".sfPageEditor")},61:function(e,t,i){var s,a,r;a=[],void 0===(r="function"==typeof(s=function(){var e=void 0!==window.innerHeight,t=function t(i,s){var a,r,n,o,l,c,d,h,u,m=!1,p={},g={},v=[0,0];if("undefined"!=typeof jQuery&&i instanceof jQuery&&(i=i.get(0)),"object"!=typeof i||1!==i.nodeType)throw new Error("First argument must be an element");for(i.getAttribute("data-withinviewport-settings")&&window.JSON&&(p=JSON.parse(i.getAttribute("data-withinviewport-settings"))),a="string"==typeof s?{sides:s}:s||{},g.container=a.container||p.container||t.defaults.container||window,g.sides=a.sides||p.sides||t.defaults.sides||"all",g.top=a.top||p.top||t.defaults.top||0,g.right=a.right||p.right||t.defaults.right||0,g.bottom=a.bottom||p.bottom||t.defaults.bottom||0,g.left=a.left||p.left||t.defaults.left||0,"undefined"!=typeof jQuery&&g.container instanceof jQuery&&(g.container=g.container.get(0)),g.container!==document.body&&1!==!g.container.nodeType||(g.container=window),n=g.container===window,r={top:function(){return n?o.top>=g.top:o.top>=containerScrollTop-(containerScrollTop-l.top)+g.top},right:function(){return n?o.right<=l.right+containerScrollLeft-g.right:o.right<=l.right-v[0]-g.right},bottom:function(){var t;return t=n?e?g.container.innerHeight:document.documentElement.clientHeight:l.bottom,o.bottom<=t-v[1]-g.bottom},left:function(){return n?o.left>=g.left:o.left>=containerScrollLeft-(containerScrollLeft-l.left)+g.left},all:function(){return r.top()&&r.bottom()&&r.left()&&r.right()}},o=i.getBoundingClientRect(),n?(l=document.documentElement.getBoundingClientRect(),containerScrollTop=document.body.scrollTop,containerScrollLeft=document.body.scrollLeft):(l=g.container.getBoundingClientRect(),containerScrollTop=g.container.scrollTop,containerScrollLeft=g.container.scrollLeft),containerScrollLeft&&(v[0]=18),containerScrollTop&&(v[1]=16),c=/^top$|^right$|^bottom$|^left$|^all$/,u=(d=g.sides.split(" ")).length;u--;)if(h=d[u].toLowerCase(),c.test(h)){if(!r[h]()){m=!1;break}m=!0}return m};return t.prototype.defaults={container:document.body,sides:"all",top:0,right:0,bottom:0,left:0},t.defaults=t.prototype.defaults,t.prototype.top=function(e){return t(e,"top")},t.prototype.right=function(e){return t(e,"right")},t.prototype.bottom=function(e){return t(e,"bottom")},t.prototype.left=function(e){return t(e,"left")},t})?s.apply(t,a):s)||(e.exports=r)},62:function(e,t,i){"use strict";i.r(t),i.d(t,"imageHandler",(function(){return v}));var s=i(61),a=i.n(s),r=i(6),n=i.n(r),o=i(17),l=i.n(o),c=i(49),d=i.n(c),h=i(9),u=i.n(h),m=i(19),p=i(0),g=[320,480,568,640,720,768,800,960,1080,1200,1366,1440,1536,1600,1720,1920,2048,2160,2560,2880,3e3,3200,3600,3840,4e3,5120];var v=new class{constructor(){this.images=[],this.bindingsInited=!1,this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.isCMS=document.querySelectorAll(".sfPageEditor").length>0,this.prepareImage.bind(this)}init(){p.a.detectBrowserSupport(this.initContent.bind(this)),!1===this.bindingsInited&&(this.initBindings(),this.bindingsInited=!0)}initContent(){var e=document.body.querySelectorAll("section.hero img[data-img-src]"),t=document.body.querySelectorAll("main img[data-img-src]"),i=document.body.querySelectorAll(".overlay img[data-img-src]");n()(e,e=>{var t=this.prepareImage(e);this.images.push(t)}),n()(t,e=>{var t=this.prepareImage(e);this.images.push(t)}),n()(i,e=>{var t=this.prepareImage(e);this.images.push(t)}),this.checkAndLoad()}initNavigation(){var e=document.body.querySelectorAll("div.sub-navigation img[data-img-src]");n()(e,e=>{var t=this.prepareImage(e);t.instantLoad=!0,this.images.push(t)}),this.checkAndLoad()}prepareImage(e){return{el:e,loaded:e.getAttribute("data-img-loaded")||!1,ungrey:!1,error:!1,src:e.getAttribute("data-img-src"),loadedWidth:0,loadedHeight:0,checkVisibility:null!==e.getAttribute("data-img-checkVisibility"),keepWidth:null!==e.getAttribute("data-img-keepWidth"),keepHeight:null!==e.getAttribute("data-img-keepHeight"),fullSize:null!==e.getAttribute("data-img-fullSize"),instantLoad:null!==e.getAttribute("data-img-instantLoad")||this.isCMS,instantLoadOnTrigger:null!==e.getAttribute("data-img-instantLoadOnTrigger")||this.isCMS,quality:null!==e.getAttribute("data-img-quality")?parseInt(e.getAttribute("data-img-quality"),10):50,format:e.getAttribute("data-img-format")||""}}initBindings(){window.addEventListener("resize",d()(()=>{this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.checkAndLoad(!0)},250)),window.addEventListener("scroll",l()(()=>{this.checkAndLoad(!0)},50),!!u.a.passiveEvents&&{capture:!1,passive:!1})}checkAndLoad(e){n()(this.images,t=>{null!==t.src&&!1===t.error&&(null===t.el.offsetParent?t.visible=!1:t.visible=a()(t.el,{sides:"top bottom",top:this.screenHeight/-1,bottom:this.screenHeight/-1}),!t.loaded&&(e&&t.instantLoadOnTrigger||t.instantLoad||t.visible)&&this.loadImage(t),!1===t.ungrey&&t.visible&&t.instantLoadOnTrigger&&(t.ungrey=!0,t.el.setAttribute("data-img-ungrey",!0)))})}getClosestSize(e){var t;return n()(g,i=>{e<i&&!t&&(t=i)}),t}getContainerSize(e){var t,i,s=e.el;return"img"===s.nodeName.toLowerCase()&&!1===e.fullSize?(t=s.offsetWidth,i=s.offsetHeight):(t=this.screenWidth,i=this.screenHeight),{containerWidth:t,containerHeight:i}}loadImage(e){var t=e.el,i=e.quality,s=p.a.isSupported?"webp":e.format,{containerWidth:a,containerHeight:r}=this.getContainerSize(e),n=parseInt(r*m.a.pixelRatio,10),o=parseInt(a*m.a.pixelRatio,10),l=e.src;o=this.getClosestSize(o);var c=l.split("&");c.length>0&&(l=c[0]);var d=l;d=null!==l.match(/\?/gi)?"".concat(l,"&width=").concat(o):"".concat(l,"?width=").concat(o),e.keepHeight&&(d="".concat(d,"&h=").concat(n)),s&&(d="".concat(d,"&format=").concat(s)),d="".concat(d,"&quality=").concat(i),t.onload=()=>{e.loaded=!0,e.loadedWidth=a,e.loadedHeight=r,t.setAttribute("data-img-loaded",!0)},t.onerror=()=>{e.error=!0,t.setAttribute("data-img-error",!0)},0===o&&0===n||t.setAttribute("src",d)}}},63:function(e,t,i){"use strict";i.r(t),i.d(t,"generalError",(function(){return s}));var s=new class{init(){this.AUTO_CLOSE=!0,this.CLOSE_TIMEOUT=5e3,this.onClickBind=this.onClick.bind(this),this.initDOMElements(),this.initBindings()}destroy(){this.errorCloseButton&&this.errorCloseButton.removeEventListener("click",this.onClickBind)}initDOMElements(){this.errorContainer=document.querySelector("[data-general-error]"),this.errorMessage=document.querySelector("[data-general-error-message]"),this.errorCloseButton=document.querySelector("[data-general-error-close]")}initBindings(){this.errorCloseButton&&this.errorCloseButton.addEventListener("click",this.onClickBind)}onClick(e){e.preventDefault(),this.closeError()}showError(e){this.errorContainer&&this.errorMessage&&(this.errorMessage.innerHTML=e,this.errorContainer.classList.add("general-error--open"),this.AUTO_CLOSE&&setTimeout(()=>this.closeError(),this.CLOSE_TIMEOUT))}closeError(){this.errorContainer.classList.remove("general-error--open")}}},64:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(77),a=i.n(s),r=/localhost/gi;var n=new class{constructor(){this.timeOutToken=null,this.isLocalhost=window.location&&window.location.host&&null!==window.location.host.match(r)}request(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n={},o="application/x-www-form-urlencoded";return s||(window.clearTimeout(this.timeOutToken),this.timeOutToken=window.setTimeout(()=>{document.body.setAttribute("data-xhr-loading","true")},500)),a.a.interceptors.response.use(e=>(this.beforeResponseHandler(),e),e=>{this.beforeResponseHandler(),console.log("%c %s %s %s ","color: yellow; background-color: black;","--","API error: ".concat(e),"--")}),"post"===t&&(o="application/json"),n["Content-Type"]=o,n["X-Requested-With"]="XMLHttpRequest",r&&!1===this.isLocalhost&&(n["Cache-Control"]="no-cache, no-store, max-age=0"),a()({headers:n,method:t,url:e,data:i,validateStatus:e=>e>=200&&e<=304||400===e})}beforeResponseHandler(){window.clearTimeout(this.timeOutToken),document.body.removeAttribute("data-xhr-loading")}}},65:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return n}));var s=e=>{e&&e.classList.contains("button--disabled")&&e.classList.remove("button--disabled")},a=e=>{e&&!e.classList.contains("button--disabled")&&e.classList.add("button--disabled")},r=e=>{e&&e.classList.contains("button--loading")&&e.classList.remove("button--loading")},n=e=>{e&&!e.classList.contains("button--loading")&&e.classList.add("button--loading")}},66:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(6),a=i.n(s),r=i(89),n=i.n(r);var o=new class{constructor(){var e=document.body.querySelectorAll("[data-hbs-template]");this.templates={},this.addHelpers(),a()(e,e=>{var t=e.getAttribute("data-hbs-template");this.templates[t]=n.a.compile(e.innerHTML)})}addHelpers(){n.a.registerHelper("ifCond",(function(e,t,i){return e===t?i.fn(this):i.inverse(this)}))}render(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.templates[e]?this.templates[e](t):""}}},67:function(e,t,i){"use strict";var s=i(59),a=(()=>{var e,t,i,a,r,n,o,l,c,d,h,u;function m(){return window.scrollY||window.pageYOffset}function p(e){return e.getBoundingClientRect().top+t}function g(i){c||(c=i),h=r(d=i-c,t,o,l),window.scrollTo(0,h),d<l?window.requestAnimationFrame(g):(window.scrollTo(0,t+o),e&&n&&(e.setAttribute("tabindex","-1"),e.focus()),"function"==typeof u&&u(),c=!1)}return function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(l=d.duration||1e3,a=d.offset||0,u=d.callback,r=d.easing||s.default,n=d.a11y||!1,t=m(),typeof c){case"number":e=void 0,n=!1,i=t+c;break;case"object":i=p(e=c);break;case"string":e=document.querySelector(c),i=p(e)}switch(o=i-t+a,typeof d.duration){case"number":l=d.duration;break;case"function":l=d.duration(o)}window.requestAnimationFrame(g)}})();t.a=a},70:function(e,t,i){"use strict";function s(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}t.a=new class{syncLoad(e,t){return(i=function*(){return new Promise((i,s)=>{e.onload=()=>i(e.height),e.onerror=s,e.src=t})},function(){var e=this,t=arguments;return new Promise((function(a,r){var n=i.apply(e,t);function o(e){s(n,a,r,o,l,"next",e)}function l(e){s(n,a,r,o,l,"throw",e)}o(void 0)}))})();var i}}},72:function(e,t,i){"use strict";i.r(t),i.d(t,"sliderController",(function(){return g}));var s=i(6),a=i.n(s),r=i(49),n=i.n(r),o=i(85),l=i.n(o),c=i(87),d=i(22),h=i(62),u=39,m=37;var p=class{constructor(e){this.slider=e,this.id=e.getAttribute("data-slider"),this.hammer=null,this.itemCount=0,this.currentItem=0,this.currentPosition=0,this.sliderWidth=0,this.screenWidth=0,this.imagesID="",this.inited=!1,this.enabled=!0,this.isEnquire=this.slider.hasAttribute("data-enquire-slider"),this.isDynamic=this.slider.hasAttribute("data-slider-dynamic"),this.withImageSync=this.slider.hasAttribute("data-sync-imagelist"),this.isDynamic||!1!==this.inited||this.init()}init(){this.inited||(this.screenWidth=window.innerWidth,this.initDOMElements(),this.initBindings(),void 0!==this.sliderButtons&&this.disableButtons(),this.isSliderEnabled()&&this.initHammer(),this.inited=!0)}initDOMElements(){this.items=this.slider.querySelectorAll("[data-slider-item]"),this.row=this.slider.querySelector("[data-slider-row]"),this.itemCount=this.items.length,this.sliderWidth=this.row.offsetWidth?this.row.offsetWidth:200,this.screenWidth=window.innerWidth,this.sliderButtons=this.slider.querySelectorAll("[data-slider-button]"),this.withImageSync&&(this.imagesID=this.slider.getAttribute("data-sync-imagelist"),this.relatedImageList=document.querySelector('[data-slider-imagelist="'.concat(this.imagesID,'"]')),this.relatedImages=this.relatedImageList.querySelectorAll("[data-slider-image]"))}initBindings(){window.addEventListener("resize",n()(()=>{this.screenWidth!==window.innerWidth&&(this.sliderWidth=this.row.offsetWidth,this.screenWidth=window.innerWidth,this.enabled&&(this.isSliderEnabled()?this.initHammer():(this.currentPosition=0,this.currentItem=0,this.slider.hasAttribute("data-sync-imagelist")&&this.syncImages(),this.row.removeAttribute("style"),null!==this.hammer&&(this.hammer.destroy(),this.hammer=null,this.slider.removeAttribute("style")))))},250)),void 0!==this.sliderButtons&&a()(this.sliderButtons,e=>{e.addEventListener("click",e=>{this.onSliderButton(e)}),d.accessibilityHelper.subscribe(e,"open",e=>{this.onSliderButton(e)})}),this.row.addEventListener("keydown",e=>{var t=parseInt(e.keyCode,10);[u,m].indexOf(t)>=0&&this.onKeyDown(t)})}initHammer(){this.hammer=new l.a.Manager(this.slider),this.hammer.add(new l.a.Pan({direction:l.a.DIRECTION_HORIZONTAL,threshold:0})),this.hammer.on("pan",e=>{this.enabled&&this.onPan(e)})}isSliderEnabled(){return this.itemCount>1&&null===this.hammer&&this.screenWidth<=768}onPan(e){var t=Math.min(Math.max(-1*(this.sliderWidth*(this.itemCount-1)+80),this.currentPosition+e.deltaX),80);if(!1===this.row.classList.contains("no-transition")&&this.row.classList.add("no-transition"),this.row.style.transform="translate3d(".concat(t,"px, 0, 0)"),e.eventType===l.a.INPUT_END&&(this.currentPosition=t,Math.abs(e.velocityX)>.5?this.currentItem+=e.velocityX<0?1:-1:this.currentItem=Math.round(Math.abs(t)/this.sliderWidth),this.currentItem>this.itemCount-1&&(this.currentItem=this.itemCount-1),this.currentItem<0&&(this.currentItem=0),this.row.classList.remove("no-transition"),this.slideTo(),this.activateStyle(),this.syncImages(),"gallery"===this.id)){var i=c.galleryController.getGalleryById(this.slider.getAttribute("data-gallery"));i.onPan(this.currentItem),i.setPager()}this.getEnquireSlides()}onKeyDown(e){var t=this.isEnquire?Math.ceil(this.itemCount/3):this.itemCount;e===m?this.currentItem=0===this.currentItem?this.currentItem:this.currentItem-=1:e===u&&(this.currentItem=this.currentItem===t-1?this.currentItem:this.currentItem+=1,this.getEnquireSlides()),this.slideTo(),this.syncImages(),this.disableButtons()}onSliderButton(e){var t=e.currentTarget.hasAttribute("data-slider-next")?1:-1,i=e.currentTarget.classList.contains("button")?"button--disabled":"disabled";e.currentTarget.classList.contains(i)||(this.currentItem=t>0?this.currentItem===this.itemCount-1?this.currentItem:this.currentItem+=1:0===this.currentItem?this.currentItem:this.currentItem-=1,this.slideTo(),this.syncImages(),this.disableButtons())}disableButtons(){var e=this.isEnquire?Math.ceil(this.itemCount/3):this.itemCount;a()(this.sliderButtons,t=>{var i=t.classList.contains("button")?"button--disabled":"disabled";t.hasAttribute("data-slider-prev")&&0===this.currentItem||t.hasAttribute("data-slider-next")&&this.currentItem===e-1?t.classList.add(i):t.classList.remove(i)})}slideTo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentItem,t=this.isEnquire?parseInt(window.getComputedStyle(this.slider.querySelector("[data-slider-item]")).marginRight,10):0,i="".concat((this.row.clientWidth+t)*e*-1,"px");this.row.style.transform="translate3d(".concat(i,", 0, 0)"),this.currentPosition=this.currentItem*this.sliderWidth*-1,h.imageHandler.checkAndLoad(),this.handleFocus(this.currentItem)}handleFocus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentItem,t=this.isEnquire?[3*e,3*e+1,3*e+2]:[e];a()(this.items,(e,i)=>{t.indexOf(i)>=0?d.accessibilityHelper.enableFocus(e):d.accessibilityHelper.disableFocus(e)})}getEnquireSlides(){this.isEnquire}activateStyle(){this.screenWidth<=768&&("stats"===this.id||"specs"===this.id)&&a()(this.items,(e,t)=>{this.currentItem=Math.abs(this.currentPosition/this.sliderWidth),t===this.currentItem?e.classList.add("active"):e.classList.remove("active")})}syncImages(){this.withImageSync&&a()(this.relatedImages,(e,t)=>{t===this.currentItem?e.classList.remove("hidden"):e.classList.add("hidden")})}enableSlider(){this.enabled=!0}disableSlider(){this.enabled=!1}};var g=new class{constructor(){this.sliders=[],this.initSliders()}init(){}initSliders(){a()(document.querySelectorAll("[data-slider]"),e=>{null===e.getAttribute("data-slider-inited")&&(this.sliders.push(new p(e)),e.setAttribute("data-slider-inited",!0))})}getSliderById(e){return this.sliders.filter(t=>t.id===e)[0]}}},75:function(e,t,i){"use strict";t.a=()=>{if("function"!=typeof window.CustomEvent){var e=(e,t)=>{var i=t||{bubbles:!1,cancelable:!1,detail:void 0},s=document.createEvent("CustomEvent");return s.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),s};e.prototype=window.Event.prototype,window.CustomEvent=e}}},82:function(e,t,i){"use strict";var s=i(6),a=i.n(s),r=i(9),n=i.n(r),o=i(56);t.a=class{constructor(e){this.select=e,null!==this.select&&(this.initDOMElements(),this.initBindings())}initDOMElements(){this.selectWrapper=o.helper.getParentNode(this.select,"[data-form-element]")[0],this.selectWrapper||(this.selectWrapper=this.select.parentNode),this.mimic=this.select.parentNode.querySelector("[data-select-mimic]"),this.icon=this.select.parentNode.querySelector(".icon"),this.options=this.select.querySelectorAll("option")}initBindings(){this.options&&this.options.length>0?this.select.addEventListener("change",()=>{this.showSelected()}):this.showSelected()}setAlternative(){this.isAlternative=!0}showSelected(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.select.value,t=this.select.querySelector('[value="'.concat(e,'"]'));t&&(t.setAttribute("selected",!0),"touchOnly"===n.a.deviceType&&(this.isAlternative?this.mimic.innerHTML=this.select.options[this.select.selectedIndex].text:this.mimic.innerHTML=t.innerHTML),""!==t.value&&this.mimic.classList.remove("select__mimic--inactive"))}loadSelectOptions(e,t){a()(e,e=>{var i=document.createElement("option");i.value=e[t],i.innerHTML=e.Name,this.select.appendChild(i)})}setFirstOption(e,t){e&&t&&1===t.length?(this.select.querySelectorAll("option")[1].setAttribute("selected",!0),this.icon.classList.add("hidden"),this.mimic.innerHTML=t[0].Name,this.select.classList.add("disabled")):(this.select.querySelectorAll("option")[0].setAttribute("selected",!0),this.icon.classList.remove("hidden"),this.select.classList.remove("disabled"),this.resetDefault()),e||this.select.setAttribute("disabled",!0)}setSelectedByValue(e){this.showSelected(e),this.icon.classList.add("hidden"),this.select.setAttribute("disabled",!0)}toggleDisabled(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activateSelect(),e||this.disableSelect()}activateSelect(){this.select.removeAttribute("disabled"),this.selectWrapper.classList.remove("disabled"),this.mimic.classList.remove("select__mimic--inactive")}disableSelect(){this.resetDefault(),this.mimic.classList.add("select__mimic--inactive"),this.selectWrapper.classList.add("disabled"),this.select.setAttribute("disabled",!0)}hideSelect(){this.selectWrapper.classList.add("hide")}showSelect(){this.selectWrapper.classList.remove("hide")}resetDefault(){this.mimic&&(this.mimic.innerHTML=this.options[0].innerHTML)}resetOptions(){for(a()(this.select.querySelectorAll("option"),e=>{e.removeAttribute("selected")});1!==this.select.children.length;)this.select.removeChild(this.select.lastChild)}resetSelected(){a()(this.select.querySelectorAll("option"),e=>{e.removeAttribute("selected")})}getSelectedText(){return 0===this.select.selectedIndex?null:this.select.options[this.select.selectedIndex].text}}},85:function(e,t,i){var s;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(a,r,n,o){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],d=r.createElement("div"),h=Math.round,u=Math.abs,m=Date.now;function p(e,t,i){return setTimeout(S(e,i),t)}function g(e,t,i){return!!Array.isArray(e)&&(v(e,i[t],i),!0)}function v(e,t,i){var s;if(e)if(e.forEach)e.forEach(t,i);else if(void 0!==e.length)for(s=0;s<e.length;)t.call(i,e[s],s,e),s++;else for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)}function y(e,t,i){var s="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=new Error("get-stack-trace"),i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=a.console&&(a.console.warn||a.console.log);return r&&r.call(a.console,s,i),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])}return t}:Object.assign;var f=y((function(e,t,i){for(var s=Object.keys(t),a=0;a<s.length;)(!i||i&&void 0===e[s[a]])&&(e[s[a]]=t[s[a]]),a++;return e}),"extend","Use `assign`."),b=y((function(e,t){return f(e,t,!0)}),"merge","Use `assign`.");function w(e,t,i){var s,a=t.prototype;(s=e.prototype=Object.create(a)).constructor=e,s._super=a,i&&l(s,i)}function S(e,t){return function(){return e.apply(t,arguments)}}function A(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function q(e,t){return void 0===e?t:e}function L(e,t,i){v(I(t),(function(t){e.addEventListener(t,i,!1)}))}function M(e,t,i){v(I(t),(function(t){e.removeEventListener(t,i,!1)}))}function E(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function I(e){return e.trim().split(/\s+/g)}function D(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var s=0;s<e.length;){if(i&&e[s][i]==t||!i&&e[s]===t)return s;s++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function k(e,t,i){for(var s=[],a=[],r=0;r<e.length;){var n=t?e[r][t]:e[r];D(a,n)<0&&s.push(e[r]),a[r]=n,r++}return i&&(s=t?s.sort((function(e,i){return e[t]>i[t]})):s.sort()),s}function B(e,t){for(var i,s,a=t[0].toUpperCase()+t.slice(1),r=0;r<c.length;){if((s=(i=c[r])?i+a:t)in e)return s;r++}}var x=1;function O(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var P="ontouchstart"in a,F=void 0!==B(a,"PointerEvent"),V=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),N=["x","y"],H=["clientX","clientY"];function W(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){A(e.options.enable,[e])&&i.handler(t)},this.init()}function R(e,t,i){var s=i.pointers.length,a=i.changedPointers.length,r=1&t&&s-a==0,n=12&t&&s-a==0;i.isFirst=!!r,i.isFinal=!!n,r&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,s=t.pointers,a=s.length;i.firstInput||(i.firstInput=_(t));a>1&&!i.firstMultiple?i.firstMultiple=_(t):1===a&&(i.firstMultiple=!1);var r=i.firstInput,n=i.firstMultiple,o=n?n.center:r.center,l=t.center=j(s);t.timeStamp=m(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=Y(o,l),t.distance=X(o,l),function(e,t){var i=t.center,s=e.offsetDelta||{},a=e.prevDelta||{},r=e.prevInput||{};1!==t.eventType&&4!==r.eventType||(a=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},s=e.offsetDelta={x:i.x,y:i.y});t.deltaX=a.x+(i.x-s.x),t.deltaY=a.y+(i.y-s.y)}(i,t),t.offsetDirection=z(t.deltaX,t.deltaY);var c=U(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=u(c.x)>u(c.y)?c.x:c.y,t.scale=n?(d=n.pointers,h=s,X(h[0],h[1],H)/X(d[0],d[1],H)):1,t.rotation=n?function(e,t){return Y(t[1],t[0],H)+Y(e[1],e[0],H)}(n.pointers,s):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,s,a,r,n=e.lastInterval||t,o=t.timeStamp-n.timeStamp;if(8!=t.eventType&&(o>25||void 0===n.velocity)){var l=t.deltaX-n.deltaX,c=t.deltaY-n.deltaY,d=U(o,l,c);s=d.x,a=d.y,i=u(d.x)>u(d.y)?d.x:d.y,r=z(l,c),e.lastInterval=t}else i=n.velocity,s=n.velocityX,a=n.velocityY,r=n.direction;t.velocity=i,t.velocityX=s,t.velocityY=a,t.direction=r}(i,t);var d,h;var p=e.element;E(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function _(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:h(e.pointers[i].clientX),clientY:h(e.pointers[i].clientY)},i++;return{timeStamp:m(),pointers:t,center:j(t),deltaX:e.deltaX,deltaY:e.deltaY}}function j(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var i=0,s=0,a=0;a<t;)i+=e[a].clientX,s+=e[a].clientY,a++;return{x:h(i/t),y:h(s/t)}}function U(e,t,i){return{x:t/e||0,y:i/e||0}}function z(e,t){return e===t?1:u(e)>=u(t)?e<0?2:4:t<0?8:16}function X(e,t,i){i||(i=N);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return Math.sqrt(s*s+a*a)}function Y(e,t,i){i||(i=N);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return 180*Math.atan2(a,s)/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(O(this.element),this.evWin,this.domHandler)}};var G={mousedown:1,mousemove:2,mouseup:4};function Z(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,W.apply(this,arguments)}w(Z,W,{handler:function(e){var t=G[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",$="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=$,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(Q="MSPointerDown",$="MSPointerMove MSPointerUp MSPointerCancel"),w(ee,W,{handler:function(e){var t=this.store,i=!1,s=e.type.toLowerCase().replace("ms",""),a=J[s],r=K[e.pointerType]||e.pointerType,n="touch"==r,o=D(t,e.pointerId,"pointerId");1&a&&(0===e.button||n)?o<0&&(t.push(e),o=t.length-1):12&a&&(i=!0),o<0||(t[o]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),i&&t.splice(o,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ie(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,W.apply(this,arguments)}function se(e,t){var i=T(e.touches),s=T(e.changedTouches);return 12&t&&(i=k(i.concat(s),"identifier",!0)),[i,s]}w(ie,W,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var i=se.call(this,e,t);12&t&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}}});var ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function re(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},W.apply(this,arguments)}function ne(e,t){var i=T(e.touches),s=this.targetIds;if(3&t&&1===i.length)return s[i[0].identifier]=!0,[i,i];var a,r,n=T(e.changedTouches),o=[],l=this.target;if(r=i.filter((function(e){return E(e.target,l)})),1===t)for(a=0;a<r.length;)s[r[a].identifier]=!0,a++;for(a=0;a<n.length;)s[n[a].identifier]&&o.push(n[a]),12&t&&delete s[n[a].identifier],a++;return o.length?[k(r.concat(o),"identifier",!0),o]:void 0}w(re,W,{handler:function(e){var t=ae[e.type],i=ne.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}});function oe(){W.apply(this,arguments);var e=S(this.handler,this);this.touch=new re(this.manager,e),this.mouse=new Z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function le(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ce.call(this,t)):12&e&&ce.call(this,t)}function ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var s=this.lastTouches;setTimeout((function(){var e=s.indexOf(i);e>-1&&s.splice(e,1)}),2500)}}function de(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var a=this.lastTouches[s],r=Math.abs(t-a.x),n=Math.abs(i-a.y);if(r<=25&&n<=25)return!0}return!1}w(oe,W,{handler:function(e,t,i){var s="touch"==i.pointerType,a="mouse"==i.pointerType;if(!(a&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(s)le.call(this,t,i);else if(a&&de.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var he=B(d.style,"touchAction"),ue=void 0!==he,me=function(){if(!ue)return!1;var e={},t=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){e[i]=!t||a.CSS.supports("touch-action",i)})),e}();function pe(e,t){this.manager=e,this.set(t)}pe.prototype={set:function(e){"compute"==e&&(e=this.compute()),ue&&this.manager.element.style&&me[e]&&(this.manager.element.style[he]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return v(this.manager.recognizers,(function(t){A(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,"none"))return"none";var t=C(e,"pan-x"),i=C(e,"pan-y");if(t&&i)return"none";if(t||i)return t?"pan-x":"pan-y";if(C(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var s=this.actions,a=C(s,"none")&&!me.none,r=C(s,"pan-y")&&!me["pan-y"],n=C(s,"pan-x")&&!me["pan-x"];if(a){var o=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(o&&l&&c)return}if(!n||!r)return a||r&&6&i||n&&24&i?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ge(e){this.options=l({},this.defaults,e||{}),this.id=x++,this.manager=null,this.options.enable=q(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ve(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ye(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function fe(e,t){var i=t.manager;return i?i.get(e):e}function be(){ge.apply(this,arguments)}function we(){be.apply(this,arguments),this.pX=null,this.pY=null}function Se(){be.apply(this,arguments)}function Ae(){ge.apply(this,arguments),this._timer=null,this._input=null}function qe(){be.apply(this,arguments)}function Le(){be.apply(this,arguments)}function Me(){ge.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ee(e,t){return(t=t||{}).recognizers=q(t.recognizers,Ee.defaults.preset),new Ce(e,t)}ge.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=fe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)||(e=fe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===D(t,e=fe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=fe(e,this);var t=D(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function s(i){t.manager.emit(i,e)}i<8&&s(t.options.event+ve(i)),s(t.options.event),e.additionalEvent&&s(e.additionalEvent),i>=8&&s(t.options.event+ve(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!A(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(be,ge,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,s=6&t,a=this.attrTest(e);return s&&(8&i||!a)?16|t:s||a?4&i?8|t:2&t?4|t:2:32}}),w(we,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,i=!0,s=e.distance,a=e.direction,r=e.deltaX,n=e.deltaY;return a&t.direction||(6&t.direction?(a=0===r?1:r<0?2:4,i=r!=this.pX,s=Math.abs(e.deltaX)):(a=0===n?1:n<0?8:16,i=n!=this.pY,s=Math.abs(e.deltaY))),e.direction=a,i&&s>t.threshold&&a&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ye(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Se,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(Ae,ge,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!s||!i||12&e.eventType&&!a)this.reset();else if(1&e.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),w(qe,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(Le,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return we.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return 30&i?t=e.overallVelocity:6&i?t=e.overallVelocityX:24&i&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&u(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ye(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Me,ge,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(s&&a&&i){if(4!=e.eventType)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,n=!this.pCenter||X(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,n&&r?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=p((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ee.VERSION="2.0.7",Ee.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[qe,{enable:!1}],[Se,{enable:!1},["rotate"]],[Le,{direction:6}],[we,{direction:6},["swipe"]],[Me],[Me,{event:"doubletap",taps:2},["tap"]],[Ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ce(e,t){var i;this.options=l({},Ee.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(F?ee:V?re:P?oe:Z))(i,R),this.touchAction=new pe(this,this.options.touchAction),Ie(this,!0),v(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ie(e,t){var i,s=e.element;s.style&&(v(e.options.cssProps,(function(a,r){i=B(s.style,r),t?(e.oldCssProps[i]=s.style[i],s.style[i]=a):s.style[i]=e.oldCssProps[i]||""})),t||(e.oldCssProps={}))}Ce.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var i;this.touchAction.preventDefaults(e);var s=this.recognizers,a=t.curRecognizer;(!a||a&&8&a.state)&&(a=t.curRecognizer=null);for(var r=0;r<s.length;)i=s[r],2===t.stopped||a&&i!=a&&!i.canRecognizeWith(a)?i.reset():i.recognize(e),!a&&14&i.state&&(a=t.curRecognizer=i),r++}},get:function(e){if(e instanceof ge)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=D(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var i=this.handlers;return v(I(e),(function(e){i[e]=i[e]||[],i[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var i=this.handlers;return v(I(e),(function(e){t?i[e]&&i[e].splice(D(i[e],t),1):delete i[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var i=r.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(i&&i.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var s=0;s<i.length;)i[s](t),s++}},destroy:function(){this.element&&Ie(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ee,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ce,Input:W,TouchAction:pe,TouchInput:re,MouseInput:Z,PointerEventInput:ee,TouchMouseInput:oe,SingleTouchInput:ie,Recognizer:ge,AttrRecognizer:be,Tap:Me,Pan:we,Swipe:Le,Pinch:Se,Rotate:qe,Press:Ae,on:L,off:M,each:v,merge:b,extend:f,assign:l,inherit:w,bindFn:S,prefixed:B}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=Ee,void 0===(s=function(){return Ee}.call(t,i,t,e))||(e.exports=s)}(window,document)},86:function(e,t,i){"use strict";i.r(t),i.d(t,"parallaxController",(function(){return g}));var s=i(6),a=i.n(s),r=i(61),n=i.n(r),o=i(17),l=i.n(o),c=i(49),d=i.n(c),h=i(9),u=i.n(h),m=i(58);var p=class{constructor(e){if(!e.nodeName)throw TypeError("Constructor parameter should be a valid DOM element!");this.page="generic-page",this.isParallaxActive=!1,this.isDisabled=!1,this.screenWidth=window.innerWidth,this.elem=e,window.setTimeout(()=>{this.setParameters(),this.checkVisibility(),this.params.visible&&this.screenWidth>768&&this.calculateParallax(),this.initBindings()},400)}initBindings(){window.addEventListener("resize",d()(()=>{this.refreshParallax()},250)),window.addEventListener("scroll",l()(()=>{this.screenWidth>768&&!1===this.isDisabled?(this.checkVisibility(),this.params.visible&&this.calculateParallax()):this.isParallaxActive&&(this.isParallaxActive=!1,this.resetParallax())},16),!!u.a.passiveEvents&&{capture:!1,passive:!1})}refreshParallax(){this.screenWidth=window.innerWidth,this.screenWidth>768&&!1===this.isDisabled?(this.setParameters(),!1===this.isParallaxActive&&(this.checkVisibility(),this.params.visible&&this.calculateParallax()),this.isParallaxActive=!0):this.screenWidth<=768&&this.resetParallax()}setParameters(){this.params={itemOffsetX:parseInt(this.elem.getAttribute("data-parallax-offset-x"),10)||0,itemOffsetY:parseInt(this.elem.getAttribute("data-parallax-offset-y"),10)||0,offsetY:Object(m.a)(this.elem),height:this.elem.offsetHeight,visible:!1,lock:null!==this.elem.getAttribute("data-parallax-lock"),ratio:parseFloat(this.elem.getAttribute("data-parallax"))||.2,name:this.elem.getAttribute("data-parallax-name")||""}}checkVisibility(){this.page="generic-page",this.params.visible=n()(this.elem,{top:-this.params.height,bottom:-this.params.height,sides:"top bottom"}),"header"!==this.params.name&&"primaryNav"!==this.params.name||"model-page"===this.page||(this.params.visible=!1)}calculateParallax(){window.requestAnimationFrame(()=>{var e=Object(m.a)(this.elem),t=this.elem.offsetHeight,i=window.pageYOffset,s=i+window.innerHeight/2-e-t/2,a=window.innerHeight-e-t,r=0;r=e<window.innerHeight?(i-e+(window.innerHeight-t-a))*this.params.ratio:s*this.params.ratio,this.params.lock&&r<0&&(r=0),r<-this.params.height&&(r=-this.params.height),this.elem.style.transform="translate3d(0, ".concat(r,"px, 0)"),this.elem.style.transition="none"})}resetParallax(){window.requestAnimationFrame(()=>{this.elem.removeAttribute("style")})}disableParallax(){!1===this.isDisabled&&(this.isDisabled=!0,this.resetParallax())}enableParallax(){!0===this.isDisabled&&(this.isDisabled=!1,this.screenWidth>768&&this.calculateParallax())}};var g=new class{constructor(){this.parallax=[]}init(){this.isCMS=document.querySelectorAll(".sfPageEditor").length>0,!1===this.isCMS&&this.initParallaxElements()}initParallaxElements(){var e;a()(document.body.querySelectorAll("[data-parallax]"),t=>{e=t.getAttribute("data-parallax-name")||"",null===t.getAttribute("data-parallax-inited")&&0!==t.clientWidth&&(this.parallax.push({element:new p(t),name:e}),t.setAttribute("data-parallax-inited",!0))})}getParallaxItemByName(e){var t=this.parallax.filter(t=>t.name===e)[0];return t&&t.element||null}updateAllParallaxItems(){a()(this.parallax,e=>{e.element.refreshParallax()})}}},87:function(e,t,i){"use strict";i.r(t),i.d(t,"galleryController",(function(){return y}));var s=i(6),a=i.n(s),r=i(17),n=i.n(r),o=i(9),l=i.n(o),c=i(58),d=i(19),h=i(56),u=i(55),m=i(22),p=i(62),g=i(72);var v=class{constructor(e){if(!e.nodeName)throw TypeError("Constructor parameter should be a valid DOM element!");this.gallery=e,this.id=e.getAttribute("data-gallery"),this.isCMS=document.querySelectorAll(".sfPageEditor").length>0,this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.isNextPageActive=!1,this.isOverlayActive=!1,this.isInSliderMode=null!==e.getAttribute("data-gallery-slider"),this.activePage=0,this.activeItem=0,this.itemCount=0,this.activeImageProps={},this.initDOMElements(),!1===this.isCMS&&(this.initBindings(),!1===this.isInSliderMode&&this.checkGalleryPosition()),this.setActiveItem(),this.handleFocus(),!0===this.isInSliderMode&&this.setSlides(),this.screenWidth>768?(!1===this.isInSliderMode&&this.checkGalleryPosition(),this.gallerySlider.disableSlider()):(this.gallerySlider.enableSlider(),this.gallerySlider.init())}initDOMElements(){this.galleryWrapper=this.gallery.querySelector(".gallery__wrapper"),this.galleryPager=this.gallery.querySelector(".pager"),this.pagerPrev=this.gallery.querySelector('[data-gallery-btn="prev"]'),this.pagerNext=this.gallery.querySelector('[data-gallery-btn="next"]'),this.items=this.gallery.querySelectorAll("[data-gallery-item]"),this.itemCount=this.items.length,this.gallerySlider=g.sliderController.getSliderById("gallery")}initBindings(){window.addEventListener("resize",n()(()=>{this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.screenWidth>768?(!1===this.isInSliderMode&&this.checkGalleryPosition(),this.gallerySlider.disableSlider()):(this.setPager(0),this.gallerySlider.enableSlider(),this.gallerySlider.init()),this.isInSliderMode&&(this.activeItem=0,this.setActiveItem(),this.setSlides()),this.slideTo()},50)),window.addEventListener("scroll",n()(()=>{this.screenWidth>768&&!1===this.isInSliderMode&&this.checkGalleryPosition()},50),!!l.a.passiveEvents&&{capture:!1,passive:!1}),this.gallery.querySelector('[data-gallery-btn="close"]').addEventListener("click",this.closeOverlay.bind(this)),m.accessibilityHelper.subscribe(this.gallery,"open",this.closeOverlay.bind(this)),this.gallery.addEventListener("mousemove",this.onMouseMove.bind(this)),this.gallery.addEventListener("click",this.onOverlayClick.bind(this),!!l.a.passiveEvents&&{capture:!1,passive:!1}),this.gallery.addEventListener("keydown",e=>{!1===this.isCMS&&this.onKeyDown(e)}),m.accessibilityHelper.subscribe(this.gallery,"close",()=>{this.isOverlayActive&&this.closeOverlay()}),this.pagerPrev.addEventListener("click",this.onPagerPrevClick.bind(this),!1),this.pagerNext.addEventListener("click",this.onPagerNextClick.bind(this),!1),a()(this.gallery.querySelectorAll("[data-gallery-item]"),e=>{e.addEventListener("click",this.onItemClick.bind(this),!!l.a.passiveEvents&&{capture:!1,passive:!1}),m.accessibilityHelper.subscribe(e,"open",this.onItemClick.bind(this))})}onItemClick(e){var t=e.currentTarget,i=parseInt(t.getAttribute("data-gallery-item"),10);e.stopPropagation(),!1===this.isOverlayActive&&!isNaN(i)&&this.screenWidth>768&&!1===this.isInSliderMode&&(this.showOverlay(i),this.gallery.focus())}onPagerPrevClick(){this.isInSliderMode&&(this.activeItem-=1,this.activeItem<0&&(this.activeItem=this.itemCount-1),this.slideTo(this.activeItem),this.setPager(),this.updatePagerIcons())}onPagerNextClick(){this.isInSliderMode&&(this.activeItem+=1,this.activeItem>this.itemCount-1&&(this.activeItem=0),this.slideTo(this.activeItem),this.setPager(),this.updatePagerIcons())}onMouseMove(e){!0===this.isOverlayActive&&this.screenWidth>768&&!1===this.isInSliderMode&&this.updateIcons(e)}onOverlayClick(e){!0===this.isOverlayActive&&this.screenWidth>768&&(e.clientX<this.galleryWrapper.offsetWidth/2?this.activeItem-=1:this.activeItem+=1,this.activeItem<0&&(this.activeItem=this.itemCount-1),this.activeItem>this.itemCount-1&&(this.activeItem=0),this.slideTo(this.activeItem),this.setPager(),this.updateIcons(e),this.updatePagerIcons())}onKeyDown(e){if((!0===this.isOverlayActive||!0===this.isInSliderMode)&&this.screenWidth>768){var t=parseInt(e.keyCode,10);37===t?this.activeItem-=1:39===t&&(this.activeItem+=1),this.activeItem<0&&(this.activeItem=this.itemCount-1),this.activeItem>this.itemCount-1&&(this.activeItem=0),this.slideTo(this.activeItem),this.setPager(),this.updateIcons(e),this.updatePagerIcons()}}onPan(e){this.activeItem=e}setSlides(){a()(this.gallery.querySelectorAll("[data-gallery-item]"),e=>{e.style.maxWidth="".concat(this.screenWidth-d.a.scrollbarWidth,"px")})}updateIcons(e){var t=e.clientX,i=t-22.5,s=e.clientY-22.5,a=this.galleryWrapper.offsetWidth/2;this.pagerPrev.classList.remove("gallery__icon--active"),this.pagerNext.classList.remove("gallery__icon--active"),this.pagerPrev.classList.add("gallery__icon--disabled"),this.pagerNext.classList.add("gallery__icon--disabled"),this.updatePagerIcons(),s>50&&(t<a?this.pagerPrev.classList.add("gallery__icon--active"):this.pagerNext.classList.add("gallery__icon--active"),this.pagerPrev.style.transform="translate3d(".concat(i,"px, ").concat(s,"px, 0)"),this.pagerNext.style.transform="translate3d(".concat(i,"px, ").concat(s,"px, 0)"))}updatePagerIcons(){this.pagerNext.classList.remove("gallery__icon--disabled"),this.pagerPrev.classList.remove("gallery__icon--disabled")}closeOverlay(){this.isOverlayActive=!1,this.slideTo(0),this.gallery.classList.remove("gallery--show-overlay"),document.body.classList.remove("fullscreen-active"),h.helper.setScrollbarCorrection(!1),this.updateImages("cover"),this.checkGalleryPager(),this.gallerySlider.enableSlider()}showOverlay(e){this.activePage=Math.floor(e/3),this.activeItem=e,this.isOverlayActive=!0,this.gallerySlider.disableSlider(),this.slideTo(e),this.galleryPager.classList.remove("hidden"),this.setPager(),this.gallery.classList.add("gallery--show-overlay"),document.body.classList.add("fullscreen-active"),this.updateImages("contain"),h.helper.setScrollbarCorrection(!0)}setPager(){var e=(0===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeItem)?0:this.screenWidth<769||this.isOverlayActive||this.isInSliderMode?this.activeItem:3*this.activePage)+1;a()(this.galleryPager.querySelectorAll("li"),t=>{t.classList.remove("pager__button--active"),parseInt(t.getAttribute("data-target"),10)===e&&t.classList.add("pager__button--active")})}resetActivePage(){this.activePage=0,this.activeItem=0,this.isNextPageActive=!1,this.setPager(),this.gallery.classList.remove("gallery--show-next")}checkGalleryPosition(){var e=Object(c.a)(this.gallery),t=(this.screenHeight-this.gallery.clientHeight)/2,i=e-window.pageYOffset-t<0,s=!0===this.isNextPageActive;this.checkGalleryPager(),this.screenWidth>768&&this.itemCount>3&&(i&&!1===this.isNextPageActive?(this.isNextPageActive=!0,this.activePage=1,this.activeItem=3):i||!0!==this.isNextPageActive||(this.isNextPageActive=!1,this.activePage=0,this.activeItem=0)),s!==this.isNextPageActive&&(this.gallery.classList.add("gallery--scroll-change"),window.setTimeout(()=>{this.gallery.classList.remove("gallery--scroll-change")},500),this.isNextPageActive?this.gallery.classList.add("gallery--show-next"):this.gallery.classList.remove("gallery--show-next")),this.handleFocus(this.activePage),this.setPager()}checkGalleryPager(){this.screenWidth>768&&(this.itemCount>3?this.galleryPager.classList.remove("hidden"):this.galleryPager.classList.add("hidden"))}setActiveItem(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeItem;a()(this.gallery.querySelectorAll("[data-gallery-item]"),(t,i)=>{t.classList.remove("gallery__item--active"),i===e&&t.classList.add("gallery__item--active")})}slideTo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeItem;0===e||this.screenWidth>768&&!1===this.isOverlayActive&&!1===this.isInSliderMode?this.galleryWrapper.removeAttribute("style"):this.galleryWrapper.style.transform="translate3d(".concat(-100*e,"%, 0, 0)"),p.imageHandler.checkAndLoad(),this.setActiveItem(),this.handleFocus()}handleFocus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeItem,t=this.isOverlayActive||this.isInSliderMode?[e]:[3*e,3*e+1,3*e+2];a()(this.items,(e,i)=>{t.indexOf(i)>=0?m.accessibilityHelper.enableFocus(e):m.accessibilityHelper.disableFocus(e)})}updateImages(e){a()(this.items,t=>{t.querySelector("img").setAttribute("data-object-fit",e)}),u.objectFit.update()}};var y=new class{init(){this.galleries=[],this.initGalleries()}initGalleries(){a()(document.querySelectorAll("[data-gallery]"),e=>{this.galleries.push(new v(e))})}getGalleryById(e){return this.galleries.filter(t=>t.id===e)[0]}}},88:function(e,t,i){"use strict";i.r(t),i.d(t,"videoController",(function(){return S}));var s=i(6),a=i.n(s),r=i(9),n=i.n(r),o=i(48),l=i.n(o),c=i(17),d=i.n(c),h=i(91),u=i.n(h),m=e=>e.replace(/(-[a-z])/g,e=>e.toUpperCase().replace("-","")),p=i(19),g=i(22),v=i(0),y="playing";var f=class{constructor(e,t){if(!e.nodeName)throw TypeError("Constructor parameter should be a valid DOM element!");if(this.firstPlay=!0,this.state=[],this.params={},this.video=e,this.id=t,this.connectedElements=[],this.player=e.querySelector("video"),this.loadedCallback=null,this.endCallback=null,this.endCallbackCalled=!1,this.isHighDefEnabled=!1,this.normalDefSource=null,this.highDefSource=null,this.videoSource=null,this.isMobileEnabled=!0,null===this.player)throw TypeError("Cannot find a valid video element!");"touchOnly"===n.a.deviceType&&this.video.setAttribute("data-video-mobile",!0),("touchOnly"!==n.a.deviceType||"touchOnly"===n.a.deviceType&&this.isMobileEnabled)&&(this.videoSource=this.player.querySelector("source"),this.normalDefSource=this.videoSource.getAttribute("data-video-normaldef")||null,this.highDefSource=this.videoSource.getAttribute("data-video-highdef")||null,this.isHighDefEnabled=null!==this.highDefSource&&"touchOnly"!==n.a.deviceType&&screen.width>1200,this.videoSource.setAttribute("src",this.isHighDefEnabled?this.highDefSource:this.normalDefSource)),this.initDOMElements(),this.initPlayerParams(),"touchOnly"!==n.a.deviceType||this.isMobileEnabled?(this.initEvents(),this.onPlayerReady(),this.player.readyState>1?this.onLoaded():this.checkPlayerState()):this.setState("loaded")}initDOMElements(){this.wrapper=this.video.querySelector("[data-video-wrapper]"),this.cover=this.video.querySelector("[data-video-cover]"),this.triggerListener=this.video.querySelector("[data-video-trigger-listener]"),this.controls=this.video.querySelector("[data-video-controls]"),this.progress=this.video.querySelector("[data-video-progress]"),this.connectedElements=document.body.querySelectorAll('[data-video-connected="'.concat(this.id,'"]'))}initCoverImages(){var e,t,i,s,a=v.a.isSupported?"webp":"jpeg",{containerWidth:r}=this.getContainerSize({el:this.video}),n=parseInt(r*p.a.pixelRatio,10);if(this.cover)if(e=this.cover.querySelector("[data-landscape-img-src]"),t=this.cover.querySelector("[data-portrait-img-src]"),e&&t){i=e.getAttribute("data-landscape-img-src"),s=t.getAttribute("data-portrait-img-src");var o=i.split("&"),l=s.split("&");i=o[0],s=l[0];var c=i,d=s;c=null!==i.match(/\?/gi)?"".concat(i,"&width=").concat(n):"".concat(i,"?width=").concat(n),d=null!==s.match(/\?/gi)?"".concat(s,"&width=").concat(n):"".concat(s,"?width=").concat(n),c="".concat(c,"&format=").concat(a,"&quality=50"),d="".concat(d,"&format=").concat(a,"&quality=50");var h=u()(()=>{e.style.backgroundImage="url(".concat(c,")")}),m=u()(()=>{t.style.backgroundImage="url(".concat(d,")")});this.injectCoverImages(h,m)}else console.log("%c %s %s %s ","color: yellow; background-color: black;","--","Please check cover image for the video ".concat(this.id,", it is not set!"),"--")}initPlayerParams(){for(var e,t=this.video.attributes.length,i=0;i<t;i++)e=this.video.attributes[i],"touchOnly"===n.a.deviceType&&this.isMobileEnabled&&"hover"===e.value&&(e.value="in-view"),e.name.includes("data-video-")&&(this.params[m(e.name.substring(11))]=e.value.toLowerCase());this.fixBooleans()}initEvents(){this.player.addEventListener("canplay",this.onLoaded.bind(this)),this.player.addEventListener("playing",this.onPlay.bind(this)),this.player.addEventListener("pause",this.onPause.bind(this)),this.player.addEventListener("ended",this.onEnd.bind(this)),this.player.addEventListener("error",this.onError.bind(this)),this.player.addEventListener("timeupdate",this.onTimeUpdate.bind(this))}initBindings(){if(this.params.controlsEnabled&&a()(this.video.querySelectorAll("[data-video-control]"),e=>{e.addEventListener("click",this.onControlClick.bind(this)),g.accessibilityHelper.subscribe(e,"open",this.onControlClick.bind(this))}),"click"===this.params.trigger)this.triggerListener.addEventListener("click",this.onClick.bind(this)),g.accessibilityHelper.subscribe(this.triggerListener,"open",this.onClick.bind(this));else if("hover"===this.params.trigger)this.triggerListener.addEventListener("mouseover",this.onMouseOver.bind(this)),this.triggerListener.addEventListener("mouseleave",this.onMouseLeave.bind(this));else if("in-view"===this.params.trigger){var e=document.querySelector('[data-video="'.concat(this.id,'"]'));document.querySelector('[data-video-toggle-fullscreen-inited="true"]')||!document.querySelector('[data-video-page="box"]')?(null!=e&&l.a.is(e)&&setTimeout(()=>{this.getState("loaded")||this.loadVideo(),this.playVideo()},100),l()('[data-video="'.concat(this.id,'"]')).on("enter",()=>{this.getState("loaded")||this.loadVideo(),this.playVideo(),this.setActiveControl()}),l()('[data-video="'.concat(this.id,'"]')).on("exit",()=>{this.pauseVideo()})):this.loadVideo()}else"none"===this.params.trigger&&this.loadVideo()}orientationMethod(e,t){window.innerHeight>window.innerWidth?t():e()}injectCoverImages(e,t){this.orientationMethod(e,t),window.addEventListener("resize",d()(()=>{this.orientationMethod(e,t)},50),!!n.a.passiveEvents&&{capture:!1,passive:!0})}checkPlayerState(){this.player.readyState>3?(this.onLoaded(),this.onPlayerReady()):window.setTimeout(()=>{this.checkPlayerState()},100)}onClick(e){e.preventDefault(),this.getState(y)?this.pauseVideo():this.playVideo()}onMouseOver(){!0!==this.getState(y)&&this.getState("loaded")&&this.playVideo()}onMouseLeave(){this.getState(y)&&this.pauseVideo()}onControlClick(e){switch(e.currentTarget.getAttribute("data-video-control").toLowerCase()){case"play":this.firstPlay&&(this.firstPlay=!1,this.unmuteVideo()),this.playVideo(),this.setActiveControl();break;case"pause":this.pauseVideo(),this.setActiveControl();break;case"mute":this.firstPlay=!1,this.video.querySelector('[data-video-control="unmute"]').classList.add("control-button--active"),this.video.querySelector('[data-video-control="mute"]').classList.remove("control-button--active"),this.video.querySelector('[data-video-control="unmute"]').focus(),this.muteVideo();break;case"unmute":this.firstPlay=!1,this.video.querySelector('[data-video-control="mute"]').classList.add("control-button--active"),this.video.querySelector('[data-video-control="unmute"]').classList.remove("control-button--active"),this.video.querySelector('[data-video-control="mute"]').focus(),this.unmuteVideo()}}onPlayerReady(){l.a.threshold(.1),this.initBindings(),this.configurePlayer(),this.update()}onPlay(){this.removeState("paused"),this.setState(y)}onPause(){this.removeState(y),this.setState("paused")}onEnd(){this.removeState(y),this.removeState("paused"),this.setState("ended"),this.endCallback&&"function"==typeof this.endCallback&&this.endCallback()}onError(){this.removeState("paused"),this.removeState(y),this.setState("error")}onLoaded(){this.setState("loaded"),this.muteVideo(),this.loadedCallback&&"function"==typeof this.loadedCallback&&this.loadedCallback()}onTimeUpdate(){var e=Math.floor(this.player.currentTime/this.player.duration*100);isNaN(e)&&(e=0),e>0&&e<50&&!0===this.endCallbackCalled&&(this.endCallbackCalled=!1),e>96&&!0===this.params.loop&&!1===this.endCallbackCalled&&this.endCallback&&"function"==typeof this.endCallback&&(this.endCallbackCalled=!0,this.endCallback())}setActiveControl(){this.getState(y)?(this.video.querySelector('[data-video-control="play"]').classList.add("control-button--active"),this.video.querySelector('[data-video-control="pause"]').classList.remove("control-button--active"),this.video.querySelector('[data-video-control="play"]').focus()):(this.video.querySelector('[data-video-control="play"]').classList.remove("control-button--active"),this.video.querySelector('[data-video-control="pause"]').classList.add("control-button--active"),this.video.querySelector('[data-video-control="pause"]').focus())}update(){this.params.controlsEnabled&&!0===this.getState(y)&&this.updateProgressBar(),this.requestID=requestAnimationFrame(this.update.bind(this))}updateProgressBar(){var e=Math.floor(this.player.currentTime/this.player.duration*1e3)/1e3;this.progress.style.transform="scaleX(".concat(e,")")}getState(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return this.state.includes(e)}setState(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&!1===this.state.includes(e)&&(this.state.push(e),this.video.classList.add("video--".concat(e)),a()(this.connectedElements,t=>{t.classList.add("video--".concat(e))})),this.video.setAttribute("data-video-state",this.state.join("|"))}removeState(e){this.video.classList.remove("video--".concat(e)),a()(this.connectedElements,t=>{t.classList.remove("video--".concat(e))}),this.state=this.state.filter(t=>t!==e),this.setState()}fixBooleans(){var e;a()(this.params,(t,i)=>{"true"===(e=t)&&(e=!0),"false"===e&&(e=!1),this.params[i]=e})}configurePlayer(){this.setPosterImage(),this.checkAutoPlay()}setPosterImage(){!0===this.params.hidePoster&&this.video.classList.add("video--hide-poster")}checkAutoPlay(){this.player.pause();var e=document.querySelector('[data-video="'.concat(this.id,'"]'));!0===this.params.autoplay&&("none"===this.params.trigger||null!=e&&l.a.is(e))&&(this.player.readyState<1&&(this.player.volume=0,this.loadVideo()),this.playVideo())}loadVideo(){this.isLoading||(this.isLoading=!0,this.initCoverImages(),this.player.load())}playVideo(){this.player.play()}pauseVideo(){this.player.pause()}stopVideo(){this.pauseVideo(),this.player.currentTime=0,this.updateProgressBar()}muteVideo(){this.player.volume=0}unmuteVideo(){this.video.querySelector('[data-video-control="mute"]').classList.add("control-button--active"),this.video.querySelector('[data-video-control="unmute"]').classList.remove("control-button--active"),this.player.volume=1}setLoadedCallback(e){this.loadedCallback=e,("touchOnly"===n.a.deviceType||this.player.readyState>3)&&this.loadedCallback()}setPlayCallback(e){this.playCallback=e,this.playCallback&&"function"==typeof this.playCallback&&this.playCallback()}setPauseCallback(e){this.pauseCallback=e,this.pauseCallback&&"function"==typeof this.pauseCallback&&this.pauseCallback()}setEndCallback(e){this.endCallback=e}getContainerSize(e){var t,i,s=e.el;return"img"===s.nodeName.toLowerCase()&&!1===e.fullSize?(t=s.offsetWidth,i=s.offsetHeight):(t=this.screenWidth,i=this.screenHeight),{containerWidth:t,containerHeight:i}}},b=i(55),w=i(75);var S=new class{constructor(){this.players=[],this.isInited=!1}init(){this.isInited||(Object(w.a)(),this.initPlayers(),this.initBindings(),this.isInited=!0,this.emitInitEvent())}destroy(){this.players.forEach(e=>{var t=e;t.player.pauseVideo(),t.player.player&&(t.player.player.src=""),delete t.id,delete t.player}),this.players=[]}initPlayers(){var e;a()(document.body.querySelectorAll("[data-video]"),t=>{e=t.getAttribute("data-video"),null===t.getAttribute("data-video-inited")&&(this.players.push({id:e,player:new f(t,e)}),t.setAttribute("data-video-inited",!0))})}initBindings(){a()(document.body.querySelectorAll("[data-video-play]"),e=>{var t=e.getAttribute("data-video-play"),i=this.getPlayerById(t);null!==i&&null===e.getAttribute("data-video-play-inited")&&e.addEventListener("click",s=>{s.preventDefault(),e.setAttribute("data-video-play-inited",!0),null!==t&&i.playVideo()},!1)}),a()(document.body.querySelectorAll("[data-video-toggle]"),e=>{var t=e.getAttribute("data-video-toggle"),i=this.getPlayerById(t);null!==i&&null===e.getAttribute("data-video-toggle-inited")&&e.addEventListener("click",s=>{var a=i.getState("playing");s.preventDefault(),e.setAttribute("data-video-toggle-inited",!0),null!==t&&!1===a?i.playVideo():i.pauseVideo()},!1)}),"mouseOnly"===n.a.deviceType?(a()(document.body.querySelectorAll("[data-video-toggle-fullscreen]"),e=>{var t=e.getAttribute("data-video-toggle-fullscreen"),i=this.getPlayerById(t);null!==i&&null===e.getAttribute("data-video-toggle-fullscreen-inited")&&(e.setAttribute("data-trigger","click"),e.addEventListener("click",s=>{s.preventDefault(),this.onToggleFullscreen(e,t,i)},!1),g.accessibilityHelper.subscribe(e,"open",()=>{this.onToggleFullscreen(e,t,i)}))}),a()(document.body.querySelectorAll("[data-video-go-fullscreen]"),e=>{var t=e.getAttribute("data-video-go-fullscreen"),i=this.getPlayerById(t);null!==i&&null===e.getAttribute("data-video-go-fullscreen-inited")&&i.setEndCallback(()=>{this.closeFullscreen(t)})}),a()(document.body.querySelectorAll("[data-video-close-fullscreen]"),e=>{var t=e.getAttribute("data-video-close-fullscreen");null===e.getAttribute("data-video-close-fullscreen-inited")&&(e.addEventListener("click",i=>{i.preventDefault(),e.setAttribute("data-video-close-fullscreen-inited",!0),this.closeFullscreen(t)},!1),g.accessibilityHelper.subscribe(e,"open",()=>{e.setAttribute("data-video-close-fullscreen-inited",!0),this.closeFullscreen(t)}))}),a()(document.body.querySelectorAll("[data-video-fullscreen]"),e=>{var t=e.getAttribute("data-video-fullscreen");g.accessibilityHelper.subscribe(e,"close",()=>{e.setAttribute("data-video-close-fullscreen-inited",!0),this.closeFullscreen(t)})})):a()(document.body.querySelectorAll("[data-video-toggle-fullscreen]"),e=>{var t=e.getAttribute("data-video-toggle-fullscreen"),i=this.getPlayerById(t);if(null!==i&&null===e.getAttribute("data-video-toggle-fullscreen-inited")&&i.isMobileEnabled){var s=null!==i.player.querySelector("[data-video-normaldef]").getAttribute("data-video-normaldef")?i.player.querySelector("[data-video-normaldef]").getAttribute("data-video-normaldef"):i.player.querySelector("[data-video-highdef]").getAttribute("data-video-highdef");e.addEventListener("click",()=>{s?window.location=s:console.log("Warring: Video src is empty.")})}})}openFullscreen(e){var t=this.getPlayerById(e),i=document.body.querySelector('[data-video-fullscreen="'.concat(e,'"]'));!1===i.classList.contains("fullscreen-video--active")&&(i.classList.add("fullscreen-video--active"),i.setAttribute("aria-hidden","false"),t.initBindings(),t.unmuteVideo(),t.playVideo(),t.setActiveControl(),i.focus())}closeFullscreen(e){var t=this.getPlayerById(e),i=document.body.querySelector('[data-video-fullscreen="'.concat(e,'"]'));t.unmuteVideo(),i.classList.remove("fullscreen-video--active"),i.setAttribute("aria-hidden","true"),t.stopVideo()}onGoFullscreen(e,t,i){var s=i.getState("playing");e.setAttribute("data-video-go-fullscreen-inited",!0),null!==t&&!1===s&&(this.openFullscreen(t),b.objectFit.update())}onToggleFullscreen(e,t){e.setAttribute("data-video-toggle-fullscreen-inited",!0),null!==t?(this.openFullscreen(t),b.objectFit.update()):this.closeFullscreen(t)}emitInitEvent(){var e=new CustomEvent("video-controller-inited",{});document.dispatchEvent(e)}getAllPlayers(){return this.players}getPlayerById(e){var t=this.players.filter(t=>t.id===e);return t&&t[0]&&t[0].player?t[0].player:null}}},9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(i(50)),a=o(i(51)),r=o(i(52)),n=o(i(53));function o(e){return e&&e.__esModule?e:{default:e}}var l={state:{detectHover:s.default,detectPointer:a.default,detectTouchEvents:r.default,detectPassiveEvents:n.default},update:function(){l.state.detectHover.update(),l.state.detectPointer.update(),l.state.detectTouchEvents.update(),l.state.detectPassiveEvents.update(),l.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){var e,t,i,s;"undefined"!=typeof window&&(l.passiveEvents=l.state.detectPassiveEvents.hasSupport||!1,l.hasTouch=l.state.detectTouchEvents.hasSupport||!1,l.deviceType=(e=l.hasTouch,t=l.state.detectHover.anyHover,i=l.state.detectPointer.anyFine,s=l.state,e&&(t||i)?"hybrid":e&&Object.keys(s.detectHover).filter((function(e){return"update"!==e})).every((function(e){return!1===s.detectHover[e]}))&&Object.keys(s.detectPointer).filter((function(e){return"update"!==e})).every((function(e){return!1===s.detectPointer[e]}))?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":e?"touchOnly":"mouseOnly"),l.hasMouse="touchOnly"!==l.deviceType,l.primaryInput=("mouseOnly"===l.deviceType?"mouse":"touchOnly"===l.deviceType&&"touch")||l.state.detectHover.hover&&"mouse"||l.state.detectHover.none&&"touch"||"mouse",/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10)>=59&&l.hasTouch&&(l.deviceType="hybrid",l.hasMouse=!0,l.primaryInput="mouse"))}};l.updateOnlyOwnProperties(),t.default=l},90:function(e,t,i){!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var i,s=e.HTMLElement||e.Element,a={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:s.prototype.scroll||o,scrollIntoView:s.prototype.scrollIntoView},r=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,n=(i=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?p.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):a.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?a.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},s.prototype.scroll=s.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var e=arguments[0].left,t=arguments[0].top;p.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},s.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):a.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},s.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var i=u(this),s=i.getBoundingClientRect(),r=this.getBoundingClientRect();i!==t.body?(p.call(this,i,i.scrollLeft+r.left-s.left,i.scrollTop+r.top-s.top),"fixed"!==e.getComputedStyle(i).position&&e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})):e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else a.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function o(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+n<e.scrollHeight:"X"===t?e.clientWidth+n<e.scrollWidth:void 0}function d(t,i){var s=e.getComputedStyle(t,null)["overflow"+i];return"auto"===s||"scroll"===s}function h(e){var t=c(e,"Y")&&d(e,"Y"),i=c(e,"X")&&d(e,"X");return t||i}function u(e){for(;e!==t.body&&!1===h(e);)e=e.parentNode||e.host;return e}function m(t){var i,s,a,n,o=(r()-t.startTime)/468;n=o=o>1?1:o,i=.5*(1-Math.cos(Math.PI*n)),s=t.startX+(t.x-t.startX)*i,a=t.startY+(t.y-t.startY)*i,t.method.call(t.scrollable,s,a),s===t.x&&a===t.y||e.requestAnimationFrame(m.bind(e,t))}function p(i,s,n){var l,c,d,h,u=r();i===t.body?(l=e,c=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,h=a.scroll):(l=i,c=i.scrollLeft,d=i.scrollTop,h=o),m({scrollable:l,method:h,startTime:u,startX:c,startY:d,x:s,y:n})}}}}()},91:function(e,t,i){var s=i(92);e.exports=function(e){return s(2,e)}},92:function(e,t,i){var s=i(93);e.exports=function(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=s(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=void 0),i}}},93:function(e,t,i){var s=i(94);e.exports=function(e){var t=s(e),i=t%1;return t==t?i?t-i:t:0}},94:function(e,t,i){var s=i(68);e.exports=function(e){return e?(e=s(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}}}]);
//# sourceMappingURL=overlay-controller.bundle.js.map